var recurly =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/build/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_recurly_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/recurly.css */ \"./lib/recurly.css\");\n/* harmony import */ var _lib_recurly_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lib_recurly_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_recurly__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/recurly */ \"./lib/recurly.js\");\n/**\n * License information available at https://docs.recurly.com/page/open-source-attribution\n * @attribution\n */\n\n\nvar recurly = new _lib_recurly__WEBPACK_IMPORTED_MODULE_1__[\"Recurly\"]();\n/* harmony default export */ __webpack_exports__[\"default\"] = (recurly);\n\n//# sourceURL=webpack://recurly/./index.js?");

/***/ }),

/***/ "./lib/recurly.css":
/*!*************************!*\
  !*** ./lib/recurly.css ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack://recurly/./lib/recurly.css?");

/***/ }),

/***/ "./lib/recurly.js":
/*!************************!*\
  !*** ./lib/recurly.js ***!
  \************************/
/*! exports provided: Recurly */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Recurly\", function() { return Recurly; });\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-clone */ \"./node_modules/component-clone/index.js\");\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_clone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_deep_assign__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/deep-assign */ \"./lib/util/deep-assign.js\");\n/* harmony import */ var deep_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! deep-filter */ \"./node_modules/deep-filter/index.js\");\n/* harmony import */ var deep_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(deep_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash.pick */ \"./node_modules/lodash.pick/index.js\");\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/uid */ \"./lib/util/uid.js\");\n/* harmony import */ var _recurly_errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./recurly/errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _recurly_bank_account__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./recurly/bank-account */ \"./lib/recurly/bank-account.js\");\n/* harmony import */ var _recurly_coupon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./recurly/coupon */ \"./lib/recurly/coupon.js\");\n/* harmony import */ var _recurly_gift_card__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./recurly/gift-card */ \"./lib/recurly/gift-card.js\");\n/* harmony import */ var _recurly_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./recurly/item */ \"./lib/recurly/item.js\");\n/* harmony import */ var _recurly_plan__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./recurly/plan */ \"./lib/recurly/plan.js\");\n/* harmony import */ var _recurly_tax__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./recurly/tax */ \"./lib/recurly/tax.js\");\n/* harmony import */ var _recurly_version__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./recurly/version */ \"./lib/recurly/version.js\");\n/* harmony import */ var _recurly_version__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_recurly_version__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _recurly_token__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./recurly/token */ \"./lib/recurly/token.js\");\n/* harmony import */ var _recurly_adyen__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./recurly/adyen */ \"./lib/recurly/adyen.js\");\n/* harmony import */ var _recurly_apple_pay__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./recurly/apple-pay */ \"./lib/recurly/apple-pay/index.js\");\n/* harmony import */ var _recurly_bank_redirect__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./recurly/bank-redirect */ \"./lib/recurly/bank-redirect.js\");\n/* harmony import */ var _recurly_elements__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./recurly/elements */ \"./lib/recurly/elements.js\");\n/* harmony import */ var _recurly_frame__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./recurly/frame */ \"./lib/recurly/frame.js\");\n/* harmony import */ var _recurly_paypal__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./recurly/paypal */ \"./lib/recurly/paypal/index.js\");\n/* harmony import */ var _recurly_venmo__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./recurly/venmo */ \"./lib/recurly/venmo/index.js\");\n/* harmony import */ var _recurly_risk__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./recurly/risk */ \"./lib/recurly/risk/index.js\");\n/* harmony import */ var _recurly_paypal_strategy_direct__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./recurly/paypal/strategy/direct */ \"./lib/recurly/paypal/strategy/direct.js\");\n/* harmony import */ var _recurly_bus__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./recurly/bus */ \"./lib/recurly/bus.js\");\n/* harmony import */ var _recurly_reporter__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./recurly/reporter */ \"./lib/recurly/reporter.js\");\n/* harmony import */ var _recurly_fraud__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./recurly/fraud */ \"./lib/recurly/fraud.js\");\n/* harmony import */ var _recurly_hosted_fields__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./recurly/hosted-fields */ \"./lib/recurly/hosted-fields.js\");\n/* harmony import */ var _recurly_request__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./recurly/request */ \"./lib/recurly/request.js\");\n/* harmony import */ var _util_web_storage__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./util/web-storage */ \"./lib/util/web-storage.js\");\n/* harmony import */ var _recurly_pricing_checkout__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./recurly/pricing/checkout */ \"./lib/recurly/pricing/checkout/index.js\");\n/* harmony import */ var _recurly_pricing_subscription__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./recurly/pricing/subscription */ \"./lib/recurly/pricing/subscription/index.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*jshint -W058 */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly');\n\nvar DEFAULT_API_URL = 'https://api.recurly.com/js/v1';\nvar DEFAULT_API_URL_EU = 'https://api.eu.recurly.com/js/v1';\n/**\n * Default configuration values.\n *\n * currency: ISO 4217\n * timeout: API request timeout in ms\n * publicKey: Recurly site public key\n * cors: Whether to use XHR2/XDR+CORS over jsonp for API requests\n * fraud: fraud configuration\n * api: URL of API\n * fields: field behavior and styling configuration\n *\n * @private\n * @type {Object}\n */\n\nvar DEFAULTS = {\n  currency: 'USD',\n  timeout: 60000,\n  publicKey: '',\n  parent: true,\n  parentVersion: _recurly_version__WEBPACK_IMPORTED_MODULE_13___default.a,\n  cors: true,\n  fraud: {\n    kount: {\n      dataCollector: false,\n      form: undefined\n    },\n    litle: {\n      sessionId: undefined\n    },\n    braintree: {\n      deviceData: undefined\n    }\n  },\n  risk: {\n    threeDSecure: {\n      preflightDeviceDataCollector: true\n    }\n  },\n  api: DEFAULT_API_URL,\n  fields: {\n    all: {\n      style: {}\n    },\n    number: {\n      selector: '[data-recurly=number]',\n      style: {}\n    },\n    month: {\n      selector: '[data-recurly=month]',\n      style: {}\n    },\n    year: {\n      selector: '[data-recurly=year]',\n      style: {}\n    },\n    cvv: {\n      selector: '[data-recurly=cvv]',\n      style: {}\n    },\n    card: {\n      selector: '[data-recurly=card]',\n      style: {}\n    }\n  }\n};\n/**\n * Initialize defaults.\n *\n * @param {Object} options\n * @constructor\n * @public\n */\n\nvar Recurly = /*#__PURE__*/function (_Emitter) {\n  _inherits(Recurly, _Emitter);\n\n  var _super = _createSuper(Recurly);\n\n  // DEPRECATED\n\n  /**\n   * Expose the class through its common name\n   */\n  function Recurly(options) {\n    var _this;\n\n    _classCallCheck(this, Recurly);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"Adyen\", _recurly_adyen__WEBPACK_IMPORTED_MODULE_15__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"ApplePay\", _recurly_apple_pay__WEBPACK_IMPORTED_MODULE_16__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"BankRedirect\", _recurly_bank_redirect__WEBPACK_IMPORTED_MODULE_17__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"coupon\", _recurly_coupon__WEBPACK_IMPORTED_MODULE_8__[\"default\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"Elements\", _recurly_elements__WEBPACK_IMPORTED_MODULE_18__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"Frame\", _recurly_frame__WEBPACK_IMPORTED_MODULE_19__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"giftCard\", _recurly_gift_card__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"giftcard\", _recurly_gift_card__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"item\", _recurly_item__WEBPACK_IMPORTED_MODULE_10__[\"default\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"PayPal\", _recurly_paypal__WEBPACK_IMPORTED_MODULE_20__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"Venmo\", _recurly_venmo__WEBPACK_IMPORTED_MODULE_21__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"paypal\", _recurly_paypal_strategy_direct__WEBPACK_IMPORTED_MODULE_23__[\"deprecated\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"plan\", _recurly_plan__WEBPACK_IMPORTED_MODULE_11__[\"default\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"Risk\", _recurly_risk__WEBPACK_IMPORTED_MODULE_22__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"tax\", _recurly_tax__WEBPACK_IMPORTED_MODULE_12__[\"default\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"token\", _recurly_token__WEBPACK_IMPORTED_MODULE_14__[\"tokenDispatcher\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"validate\", __webpack_require__(/*! ./recurly/validate */ \"./lib/recurly/validate.js\").publicMethods);\n\n    _defineProperty(_assertThisInitialized(_this), \"Recurly\", _this.constructor);\n\n    _this.id = Object(_util_uid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n    _this.version = _recurly_version__WEBPACK_IMPORTED_MODULE_13___default.a;\n    _this.configured = false;\n    _this.readyState = 0;\n    _this.config = Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, DEFAULTS);\n    if (options) _this.configure(options);\n    _this.bankAccount = {\n      token: _recurly_bank_account__WEBPACK_IMPORTED_MODULE_7__[\"bankAccount\"].token.bind(_assertThisInitialized(_this)),\n      bankInfo: _recurly_bank_account__WEBPACK_IMPORTED_MODULE_7__[\"bankAccount\"].bankInfo.bind(_assertThisInitialized(_this))\n    };\n    _this.reporter = new _recurly_reporter__WEBPACK_IMPORTED_MODULE_25__[\"Reporter\"]({\n      recurly: _assertThisInitialized(_this)\n    });\n    _this.request = new _recurly_request__WEBPACK_IMPORTED_MODULE_28__[\"Request\"]({\n      recurly: _assertThisInitialized(_this)\n    });\n\n    _this.Pricing = function () {\n      return new _recurly_pricing_subscription__WEBPACK_IMPORTED_MODULE_31__[\"default\"](_assertThisInitialized(_this));\n    }; // deprecated\n\n\n    _this.Pricing.Checkout = function () {\n      return new _recurly_pricing_checkout__WEBPACK_IMPORTED_MODULE_30__[\"default\"](_assertThisInitialized(_this));\n    };\n\n    _this.Pricing.Subscription = function () {\n      return new _recurly_pricing_subscription__WEBPACK_IMPORTED_MODULE_31__[\"default\"](_assertThisInitialized(_this));\n    };\n\n    _this.once('ready', function () {\n      return _this.report('ready');\n    });\n\n    _this.bindReporting();\n\n    return _this;\n  }\n  /**\n   * Whether this instance is considered a parent\n   *\n   * @return {Boolean}\n   */\n\n\n  _createClass(Recurly, [{\n    key: \"isParent\",\n    get: function get() {\n      return !!this.config.parent;\n    }\n  }, {\n    key: \"deviceId\",\n    get: function get() {\n      return Object(_util_web_storage__WEBPACK_IMPORTED_MODULE_29__[\"fetch\"])({\n        key: 'deviceId',\n        otherwise: Object(_util_uid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])()\n      });\n    },\n    set: function set(id) {\n      return Object(_util_web_storage__WEBPACK_IMPORTED_MODULE_29__[\"set\"])({\n        key: 'deviceId',\n        value: id\n      });\n    }\n  }, {\n    key: \"sessionId\",\n    get: function get() {\n      return Object(_util_web_storage__WEBPACK_IMPORTED_MODULE_29__[\"fetch\"])({\n        scope: 'session',\n        key: 'sessionId',\n        otherwise: Object(_util_uid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])()\n      });\n    },\n    set: function set(id) {\n      return Object(_util_web_storage__WEBPACK_IMPORTED_MODULE_29__[\"set\"])({\n        scope: 'session',\n        key: 'sessionId',\n        value: id\n      });\n    }\n    /**\n     * Configuration Object prepared for marshalling\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: \"sanitizedConfig\",\n    get: function get() {\n      return deep_filter__WEBPACK_IMPORTED_MODULE_2___default()(this.config, function (val) {\n        return !(val instanceof Node);\n      });\n    }\n    /**\n     * Assembles the API endpoint\n     *\n     * @return {String} route\n     */\n\n  }, {\n    key: \"url\",\n    value: function url(route) {\n      return this.config.api + route;\n    }\n    /**\n     * Queues or immediately invokes a callback when the instance is\n     * in the ready state\n     *\n     * @param  {Function} done callback\n     */\n\n  }, {\n    key: \"ready\",\n    value: function ready(done) {\n      if (this.readyState > 1) done();else this.once('ready', done);\n    }\n    /**\n     * Configure settings.\n     *\n     * @param {String|Object} options Either publicKey or object containing\n     *                                publicKey and other optional members\n     * @param {String} options.publicKey\n     * @param {String} [options.currency] sets a default currency\n     * @param {String} [options.api]\n     * @param {Boolean} [options.cors] Enables data transmission over XHR+CORS\n     * @param {Array} [options.required] Adds additional field requirements for\n     *                                   tokenization. ex: ['cvv']\n     * @public\n     */\n\n  }, {\n    key: \"configure\",\n    value: function configure(options) {\n      debug('configure');\n      options = component_clone__WEBPACK_IMPORTED_MODULE_0___default()(options);\n      if (typeof options === 'string') options = {\n        publicKey: options\n      };\n      options = normalizeOptions(options);\n\n      if (options.publicKey) {\n        this.config.publicKey = options.publicKey;\n      } else if (!this.config.publicKey) {\n        throw Object(_recurly_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('config-missing-public-key');\n      }\n\n      if (options.api) {\n        this.config.api = options.api;\n      } else if (this.config.publicKey.lastIndexOf('fra-', 0) === 0 && this.config.api === DEFAULT_API_URL) {\n        this.config.api = DEFAULT_API_URL_EU;\n      }\n\n      if (options.currency) {\n        this.config.currency = options.currency;\n      }\n\n      if ('cors' in options) {\n        this.config.cors = options.cors;\n      }\n\n      if ('fraud' in options) {\n        Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.config.fraud, options.fraud);\n      }\n\n      if ('risk' in options) {\n        Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.config.risk, options.risk);\n      }\n\n      if ('parent' in options) {\n        this.config.parent = options.parent;\n      }\n\n      if (_typeof(options.fields) === 'object') {\n        Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.config.fields, options.fields);\n      }\n\n      this.config.required = options.required || this.config.required || []; // Begin parent role configuration and setup\n\n      if (this.config.parent) {\n        this.parent();\n      } else {\n        if (options.parentVersion) this.config.parentVersion = options.parentVersion;\n      }\n\n      if (!this.configured) {\n        this.configured = true;\n        this.emit('configured');\n        this.report('configured');\n      } // Since this readyState indicates synchronous preparation, we may now\n      // emit ready\n\n\n      if (this.readyState === 3) {\n        this.emit('ready');\n      }\n    }\n    /**\n     * Disables a recurly.js instance\n     *\n     * - Removes all listeners\n     * - Propagates a destroy call to the bus\n     * - Stops the bus\n     * - Removes external references\n     *\n     * TODO:\n     *  - destroy pricing instances, or let them live on? Currently they\n     *    may live on since their associated recurly instances remain configured\n     *    for API requests.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      debug('destroying Recurly instance', this.id);\n      this.off();\n\n      if (this.bus) {\n        this.bus.send('destroy');\n        this.bus.destroy();\n      }\n\n      if (this.fraud) {\n        this.fraud.destroy();\n      }\n\n      if (this.reporter) {\n        this.reporter.destroy();\n        delete this.reporter;\n      }\n    }\n    /**\n     * Initialize the parent recurly instance concerns: hosted fields and message bus\n     *\n     * TODO: readyState is not a good pattern\n     *\n     * sets this.readyState\n     *   0: unconfigured\n     *   1: begun intializing hosted fields\n     *   2: done initializing hosted fields\n     *   3: done initializing (no hosted fields)\n     *\n     * @private\n     */\n\n  }, {\n    key: \"parent\",\n    value: function parent() {\n      var _this2 = this;\n\n      // Check integrity of hostedFields. If fields are dead or\n      // do not match chosen selectors, reset\n      var reset = this.hostedFields && this.readyState > 0 && !this.hostedFields.integrityCheck(this.config.fields);\n\n      if (reset) {\n        // If we are between states 1 and 2, we must abandon the advancement listeners\n        if (this.readyState === 1) {\n          this.off('hostedFields:ready');\n          this.off('hostedFields:state:change');\n          this.off('hostedField:submit');\n        }\n\n        this.readyState = 0;\n        this.hostedFields.destroy();\n      }\n\n      if (this.readyState > 0) {\n        this.bus.send('hostedFields:configure', {\n          recurlyConfig: this.sanitizedConfig\n        });\n        return;\n      }\n\n      if (!this.fraud) this.fraud = new _recurly_fraud__WEBPACK_IMPORTED_MODULE_26__[\"Fraud\"](this);\n      this.fraud.on('error', function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this2.emit.apply(_this2, ['error'].concat(args));\n      });\n\n      if (!this.bus) {\n        this.bus = new _recurly_bus__WEBPACK_IMPORTED_MODULE_24__[\"Bus\"]({\n          api: this.config.api,\n          role: 'recurly'\n        });\n        this.bus.add(this);\n      }\n\n      if (!this.hostedFields || reset) {\n        this.hostedFields = new _recurly_hosted_fields__WEBPACK_IMPORTED_MODULE_27__[\"HostedFields\"]({\n          recurly: this\n        });\n      }\n\n      if (this.hostedFields.errors.length === 0) {\n        this.bus.add(this.hostedFields);\n        this.once('hostedFields:ready', function () {\n          _this2.readyState = 2;\n          setTimeout(function () {\n            return _this2.emit('ready');\n          }, 0);\n        });\n        this.on('hostedFields:state:change', function (body) {\n          return _this2.emit('change', {\n            fields: body\n          });\n        });\n        this.on('hostedField:submit', function () {\n          return _this2.emit('field:submit');\n        });\n        this.readyState = 1;\n      } else {\n        this.readyState = 3;\n      }\n    }\n    /**\n     * Reports an event to the Reporter if it is available\n     *\n     * @private\n     */\n\n  }, {\n    key: \"report\",\n    value: function report() {\n      var _this$reporter;\n\n      if (!this.reporter) return;\n\n      (_this$reporter = this.reporter).send.apply(_this$reporter, arguments);\n    }\n  }, {\n    key: \"error\",\n    value: function error(code) {\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return Object(_recurly_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(code, context, {\n        reporter: this.reporter\n      });\n    }\n    /**\n     * Binds important events to the EventDispatcher\n     *\n     * @private\n     */\n\n  }, {\n    key: \"bindReporting\",\n    value: function bindReporting() {\n      var _this3 = this;\n\n      if (!this.isParent) return;\n      ['focus', 'blur'].forEach(function (eventName) {\n        _this3.on(\"hostedField:\".concat(eventName), function (_ref) {\n          var type = _ref.type;\n          var state = _this3.hostedFields.state[type];\n          var meta = lodash_pick__WEBPACK_IMPORTED_MODULE_4___default()(state, ['type', 'valid', 'empty']);\n          if (state.brand) meta.brand = state.brand;\n\n          _this3.report(\"hosted-field:\".concat(eventName), meta);\n        });\n      });\n    }\n  }]);\n\n  return Recurly;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_3___default.a);\n/**\n * Standardizes old configuration structure to current\n *\n * 1. options.fields.[field] {String} -> options.fields.[field].selector {String}\n * 2. options.style.[field] {Object} -> options.fields.[field].style {Object}\n * 3. options.style.all {Object} -> options.fields.all.style {Object}\n *\n * @param  {Object} options\n * @return {Object}\n */\n\nfunction normalizeOptions(options) {\n  var baseStyleConfig = options.style || {};\n  delete options.style;\n  _recurly_hosted_fields__WEBPACK_IMPORTED_MODULE_27__[\"FIELD_TYPES\"].forEach(function (type) {\n    // 1\n    if (options.fields && typeof options.fields[type] === 'string') {\n      options.fields[type] = {\n        selector: options.fields[type]\n      };\n    } // 2\n\n\n    if (baseStyleConfig[type]) {\n      options.fields = options.fields || {};\n      options.fields[type] = options.fields[type] || {};\n      options.fields[type].style = Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, baseStyleConfig[type], options.fields[type].style);\n    }\n  }); // 3\n\n  if (baseStyleConfig.all) {\n    options.fields = options.fields || {};\n    options.fields.all = {\n      style: baseStyleConfig.all\n    };\n  }\n\n  return options;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly.js?");

/***/ }),

/***/ "./lib/recurly/adyen.js":
/*!******************************!*\
  !*** ./lib/recurly/adyen.js ***!
  \******************************/
/*! exports provided: factory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:adyen');\n/**\n * Instantiation factory\n *\n * @param  {Object} options\n * @return {Adyen}\n */\n\n\nfunction factory(options) {\n  return new Adyen(_extends({}, options, {\n    recurly: this\n  }));\n}\n/**\n * Initializes an Adyen session.\n *\n * @param {Object} options\n * @param {Recurly} options.recurly\n * @constructor\n * @public\n */\n\nvar Adyen = /*#__PURE__*/function (_Emitter) {\n  _inherits(Adyen, _Emitter);\n\n  var _super = _createSuper(Adyen);\n\n  function Adyen(options) {\n    var _this;\n\n    _classCallCheck(this, Adyen);\n\n    debug('Creating new Adyen session');\n    _this = _super.call(this);\n    _this.recurly = options.recurly;\n    return _this;\n  }\n  /**\n   * Invokes the Adyen Payment Modal\n   * @param {Object} opts\n   * @param {String} opts.invoiceUuid - invoice Uuid from PendingPurchase\n   * @param {String} [opts.countryCode] - 2 Digit Country Code\n   * @param {String} [opts.shopperLocale] - shopperLocale for Payment Modal\n   * @param {String} [opts.skinCode] - Skin code provided by Adyen\n  */\n\n\n  _createClass(Adyen, [{\n    key: \"start\",\n    value: function start(opts) {\n      var _this2 = this;\n\n      debug('Invoking Adyen Modal');\n      var payload = {\n        invoiceUuid: opts.invoiceUuid,\n        countryCode: opts.countryCode,\n        shopperLocale: opts.shopperLocale,\n        skinCode: opts.skinCode\n      };\n      var errors = validatePayload(payload);\n\n      if (errors.length > 0) {\n        return this.error('validation', {\n          fields: errors\n        });\n      }\n\n      var frame = this.recurly.Frame({\n        height: 600,\n        path: '/adyen/start',\n        payload: payload\n      });\n      frame.once('error', function (cause) {\n        return _this2.error('adyen-error', {\n          cause: cause\n        });\n      });\n      frame.once('done', function (token) {\n        return _this2.emit('token', token);\n      });\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var err = (arguments.length <= 0 ? undefined : arguments[0]) instanceof Error ? arguments.length <= 0 ? undefined : arguments[0] : _errors__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apply(void 0, arguments);\n      this.emit('error', err);\n      return err;\n    }\n  }]);\n\n  return Adyen;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\nfunction validatePayload(payload) {\n  var errors = [];\n\n  if (payload.skinCode && payload.skinCode.length != 8) {\n    errors.push('skinCode should be 8 characters');\n  }\n\n  if (payload.countryCode && payload.countryCode.length != 2) {\n    errors.push('countryCode should be 2 characters');\n  }\n\n  if (payload.shopperLocale && payload.shopperLocale.length != 5) {\n    errors.push('shopperLocale should be 5 characters');\n  }\n\n  if (!payload.invoiceUuid) {\n    errors.push('invoiceUuid cannot be blank');\n  }\n\n  debug('validate errors', errors);\n  return errors;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/adyen.js?");

/***/ }),

/***/ "./lib/recurly/apple-pay/apple-pay.braintree.js":
/*!******************************************************!*\
  !*** ./lib/recurly/apple-pay/apple-pay.braintree.js ***!
  \******************************************************/
/*! exports provided: ApplePayBraintree */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ApplePayBraintree\", function() { return ApplePayBraintree; });\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! load-script */ \"./node_modules/load-script/index.js\");\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(load_script__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _apple_pay__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apple-pay */ \"./lib/recurly/apple-pay/apple-pay.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:apple-pay:braintree');\n\nvar promisify = promise__WEBPACK_IMPORTED_MODULE_0___default.a.denodeify;\nvar CLIENT_VERSION = '3.76.0';\nvar LIBS = {\n  client: 'client',\n  applePay: 'apple-pay',\n  dataCollector: 'data-collector'\n};\n\nvar loadBraintree = function loadBraintree() {\n  for (var _len = arguments.length, libs = new Array(_len), _key = 0; _key < _len; _key++) {\n    libs[_key] = arguments[_key];\n  }\n\n  var loadLib = function loadLib(lib) {\n    var _window$braintree, _window$braintree$cli;\n\n    var isLibPresent = ((_window$braintree = window.braintree) === null || _window$braintree === void 0 ? void 0 : (_window$braintree$cli = _window$braintree.client) === null || _window$braintree$cli === void 0 ? void 0 : _window$braintree$cli.VERSION) === CLIENT_VERSION && lib in window.braintree;\n    return isLibPresent ? promise__WEBPACK_IMPORTED_MODULE_0___default.a.resolve() : promisify(load_script__WEBPACK_IMPORTED_MODULE_1___default.a)(ApplePayBraintree.libUrl(lib));\n  };\n\n  return loadLib('client').then(function () {\n    return promise__WEBPACK_IMPORTED_MODULE_0___default.a.all(libs.map(loadLib));\n  });\n};\n\nvar ApplePayBraintree = /*#__PURE__*/function (_ApplePay) {\n  _inherits(ApplePayBraintree, _ApplePay);\n\n  var _super = _createSuper(ApplePayBraintree);\n\n  function ApplePayBraintree() {\n    _classCallCheck(this, ApplePayBraintree);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ApplePayBraintree, [{\n    key: \"configure\",\n    value: function configure(options) {\n      var _this = this;\n\n      debug('Initializing client');\n      var authorization = options.braintree.clientAuthorization;\n      loadBraintree('applePay', 'dataCollector').then(function () {\n        return window.braintree.client.create({\n          authorization: authorization\n        });\n      }).then(function (client) {\n        return promise__WEBPACK_IMPORTED_MODULE_0___default.a.all([window.braintree.dataCollector.create({\n          client: client\n        }), window.braintree.applePay.create({\n          client: client\n        })]);\n      }).then(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            dataCollector = _ref2[0],\n            applePay = _ref2[1];\n\n        _this.braintree = {\n          dataCollector: dataCollector,\n          applePay: applePay\n        };\n      }).catch(function (err) {\n        _this.initError = _this.error('apple-pay-init-error', {\n          err: err\n        });\n        return promise__WEBPACK_IMPORTED_MODULE_0___default.a.reject(_this.initError);\n      }).then(function () {\n        return _get(_getPrototypeOf(ApplePayBraintree.prototype), \"configure\", _this).call(_this, options);\n      });\n    }\n  }, {\n    key: \"onValidateMerchant\",\n    value: function onValidateMerchant(event) {\n      var _this2 = this;\n\n      debug('Validating merchant session', event);\n      this.braintree.applePay.performValidation({\n        validationURL: event.validationURL,\n        displayName: 'My Store'\n      }).then(function (merchantSession) {\n        return _this2.session.completeMerchantValidation(merchantSession);\n      }).catch(function (err) {\n        return _this2.error(err);\n      });\n    }\n  }, {\n    key: \"token\",\n    value: function token(event, applePayPayment) {\n      var _this3 = this;\n\n      debug('Creating token');\n      this.braintree.applePay.tokenize({\n        token: event.payment.token\n      }).then(function (tokenizePayload) {\n        return _get(_getPrototypeOf(ApplePayBraintree.prototype), \"token\", _this3).call(_this3, event, {\n          type: 'braintree',\n          payload: {\n            deviceData: _this3.braintree.dataCollector.deviceData,\n            applePayPayment: applePayPayment,\n            tokenizePayload: tokenizePayload\n          }\n        });\n      }).catch(function (err) {\n        return _this3.error('apple-pay-payment-failure', err);\n      });\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(event) {\n      var _this4 = this;\n\n      debug('Teardown payment', event);\n      this.braintree.applePay.teardown().finally(function () {\n        return _get(_getPrototypeOf(ApplePayBraintree.prototype), \"onCancel\", _this4).call(_this4, event);\n      });\n    }\n  }], [{\n    key: \"libUrl\",\n    value: function libUrl(lib) {\n      return \"https://js.braintreegateway.com/web/\".concat(CLIENT_VERSION, \"/js/\").concat(LIBS[lib], \".min.js\");\n    }\n  }]);\n\n  return ApplePayBraintree;\n}(_apple_pay__WEBPACK_IMPORTED_MODULE_2__[\"ApplePay\"]);\n\n//# sourceURL=webpack://recurly/./lib/recurly/apple-pay/apple-pay.braintree.js?");

/***/ }),

/***/ "./lib/recurly/apple-pay/apple-pay.js":
/*!********************************************!*\
  !*** ./lib/recurly/apple-pay/apple-pay.js ***!
  \********************************************/
/*! exports provided: ApplePay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ApplePay\", function() { return ApplePay; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _pricing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../pricing */ \"./lib/recurly/pricing/index.js\");\n/* harmony import */ var _pricing_promise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pricing/promise */ \"./lib/recurly/pricing/promise.js\");\n/* harmony import */ var _util_normalize__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../util/normalize */ \"./lib/util/normalize.js\");\n/* harmony import */ var _util_decimalize__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../util/decimalize */ \"./lib/util/decimalize.js\");\n/* harmony import */ var _token__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../token */ \"./lib/recurly/token.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:apple-pay');\n\nvar APPLE_PAY_API_VERSION = 2;\nvar APPLE_PAY_ADDRESS_MAP = {\n  first_name: 'givenName',\n  last_name: 'familyName',\n  address1: 'addressLines',\n  address2: 'addressLines',\n  city: 'locality',\n  state: 'administrativeArea',\n  postal_code: 'postalCode',\n  country: 'countryCode'\n};\nvar I18N = {\n  authorizationLineItemLabel: 'Card Authorization (Temporary)',\n  subtotalLineItemLabel: 'Subtotal',\n  discountLineItemLabel: 'Discount',\n  taxLineItemLabel: 'Tax',\n  giftCardLineItemLabel: 'Gift card'\n};\n/**\n * Initializes an Apple Pay session.\n *\n * @param {Object} options\n * @param {Recurly} options.recurly\n * @param {String} options.country\n * @param {String} options.currency\n * @param {String} options.label label to display to customers in the Apple Pay dialogue\n * @param {String} options.total transaction total in format '1.00'\n * @param {HTMLElement} [options.form] to provide additional customer data\n * @param {Pricing} [options.pricing] to provide transaction total from Pricing\n * @constructor\n * @public\n */\n\nvar ApplePay = /*#__PURE__*/function (_Emitter) {\n  _inherits(ApplePay, _Emitter);\n\n  var _super = _createSuper(ApplePay);\n\n  function ApplePay(options) {\n    var _this;\n\n    _classCallCheck(this, ApplePay);\n\n    _this = _super.call(this);\n    _this._ready = false;\n    _this.config = {\n      i18n: I18N\n    };\n\n    _this.once('ready', function () {\n      return _this._ready = true;\n    }); // Detect whether Apple Pay is available\n\n\n    if (!window.ApplePaySession) {\n      _this.initError = _this.error('apple-pay-not-supported');\n    } else if (!window.ApplePaySession.canMakePayments()) {\n      _this.initError = _this.error('apple-pay-not-available');\n    }\n\n    if (!_this.initError) {\n      _this.configure(options);\n    }\n\n    return _this;\n  }\n  /**\n   * @return {ApplePaySession} Bound Apple Pay session\n   * @private\n   */\n\n\n  _createClass(ApplePay, [{\n    key: \"session\",\n    get: function get() {\n      if (this._session) return this._session;\n      debug('Creating new Apple Pay session');\n      this.addAuthorizationLineItem();\n      var session = new window.ApplePaySession(APPLE_PAY_API_VERSION, {\n        countryCode: this.config.country,\n        currencyCode: this.config.currency,\n        supportedNetworks: this.config.supportedNetworks,\n        merchantCapabilities: this.config.merchantCapabilities,\n        requiredBillingContactFields: ['postalAddress'],\n        requiredShippingContactFields: this.config.requiredShippingContactFields,\n        total: this.totalLineItem\n      });\n      session.onvalidatemerchant = this.onValidateMerchant.bind(this);\n      session.onshippingcontactselected = this.onShippingContactSelected.bind(this);\n      session.onshippingmethodselected = this.onShippingMethodSelected.bind(this);\n      session.onpaymentmethodselected = this.onPaymentMethodSelected.bind(this);\n      session.onpaymentauthorized = this.onPaymentAuthorized.bind(this);\n      session.oncancel = this.onCancel.bind(this);\n      return this._session = session;\n    }\n    /**\n     * @return {Array} subtotal line items for display on payment sheet\n     * @private\n     */\n\n  }, {\n    key: \"lineItems\",\n    get: function get() {\n      // Clone configured line items\n      return [].concat(this.config.lineItems);\n    }\n    /**\n     * @return {Object} total cost line item\n     * @private\n     */\n\n  }, {\n    key: \"totalLineItem\",\n    get: function get() {\n      return lineItem(this.config.label, this.config.total);\n    }\n    /**\n     * @return {Object} total cost line item indicating a finalized line item\n     * @private\n     */\n\n  }, {\n    key: \"finalTotalLineItem\",\n    get: function get() {\n      return _extends({}, this.totalLineItem, {\n        type: 'final'\n      });\n    }\n    /**\n     * Used when the total price is zero, to circumvent Apple Pay\n     * zero amount authorization limitation\n     * @return {Object} card authorization line item, $1.00\n     * @private\n     */\n\n  }, {\n    key: \"authorizationLineItem\",\n    get: function get() {\n      return lineItem(this.config.i18n.authorizationLineItemLabel, 1.00);\n    }\n    /**\n     * Initialized state callback registry\n     *\n     * @param  {Function} cb callback\n     * @public\n     */\n\n  }, {\n    key: \"ready\",\n    value: function ready(cb) {\n      if (this._ready) cb();else this.once('ready', cb);\n    }\n    /**\n     * Configures a new instance\n     *\n     * @param  {Object} options\n     * @emit 'ready'\n     * @private\n     */\n\n  }, {\n    key: \"configure\",\n    value: function configure(options) {\n      var _this2 = this;\n\n      if ('label' in options) this.config.label = options.label;else return this.initError = this.error('apple-pay-config-missing', {\n        opt: 'label'\n      });\n      if ('form' in options) this.config.form = options.form; // Initialize with no line items\n\n      this.config.lineItems = [];\n      if ('recurly' in options) this.recurly = options.recurly;else return this.initError = this.error('apple-pay-factory-only');\n      if ('i18n' in options) _extends(this.config.i18n, options.i18n);\n\n      if (options.pricing instanceof _pricing_promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n        this.config.pricing = options.pricing.pricing;\n      } else if (options.pricing instanceof _pricing__WEBPACK_IMPORTED_MODULE_2__[\"Pricing\"]) {\n        this.config.pricing = options.pricing;\n      } else if ('total' in options) {\n        this.config.total = options.total;\n      } else {\n        return this.initError = this.error('apple-pay-config-missing', {\n          opt: 'total'\n        });\n      } // If pricing is provided, attach change listeners\n\n\n      if (this.config.pricing) {\n        this.config.pricing.on('change', function () {\n          return _this2.onPricingChange();\n        });\n        if (this.config.pricing.hasPrice) this.onPricingChange();\n      }\n\n      this.recurly.request.get({\n        route: '/apple_pay/info',\n        data: {\n          currency: options.currency\n        },\n        done: this.applyRemoteConfig(options)\n      });\n    }\n    /**\n     * Assigns ApplePay configuration from site config\n     * @param  {object} options\n     * @private\n     */\n\n  }, {\n    key: \"applyRemoteConfig\",\n    value: function applyRemoteConfig(options) {\n      var _this3 = this;\n\n      return function (err, info) {\n        if (err) return _this3.initError = _this3.error(err);\n        if ('countries' in info && ~info.countries.indexOf(options.country)) _this3.config.country = options.country;else return _this3.initError = _this3.error('apple-pay-config-invalid', {\n          opt: 'country',\n          set: info.countries\n        });\n        if ('currencies' in info && ~info.currencies.indexOf(options.currency)) _this3.config.currency = options.currency;else return _this3.initError = _this3.error('apple-pay-config-invalid', {\n          opt: 'currency',\n          set: info.currencies\n        });\n        _this3.config.merchantCapabilities = info.merchantCapabilities || [];\n        _this3.config.supportedNetworks = info.supportedNetworks || [];\n        _this3.config.requiredShippingContactFields = options.requiredShippingContactFields || [];\n\n        _this3.emit('ready');\n      };\n    }\n    /**\n     * Begins Apple Pay transaction\n     *\n     * @public\n     */\n\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      if (this.initError) return this.error('apple-pay-init-error', {\n        err: this.initError\n      });\n      delete this._session;\n      this.session.begin();\n    }\n    /**\n     * Conditionally adds an authorization line item in order to circumvent Apple Pay\n     * zero-amount authorization limitation\n     *\n     * @private\n     */\n\n  }, {\n    key: \"addAuthorizationLineItem\",\n    value: function addAuthorizationLineItem() {\n      if (parseFloat(this.config.total) > 0) return;\n      this.config.lineItems.push(this.authorizationLineItem);\n      this.config.total = this.authorizationLineItem.amount;\n    }\n    /**\n     * Updates line items and total price on pricing module changes\n     *\n     * @param  {Object} price Pricing.price\n     * @private\n     */\n\n  }, {\n    key: \"onPricingChange\",\n    value: function onPricingChange() {\n      var pricing = this.config.pricing;\n      var lineItems = this.config.lineItems = [];\n      this.config.total = pricing.totalNow;\n      if (!pricing.hasPrice) return;\n      var taxAmount = pricing.price.now.taxes || pricing.price.now.tax;\n      lineItems.push(lineItem(this.config.i18n.subtotalLineItemLabel, pricing.subtotalPreDiscountNow));\n\n      if (+pricing.price.now.discount) {\n        lineItems.push(lineItem(this.config.i18n.discountLineItemLabel, -pricing.price.now.discount));\n      }\n\n      if (+taxAmount) {\n        lineItems.push(lineItem(this.config.i18n.taxLineItemLabel, taxAmount));\n      }\n\n      if (+pricing.price.now.giftCard) {\n        lineItems.push(lineItem(this.config.i18n.giftCardLineItemLabel, -pricing.price.now.giftCard));\n      }\n\n      this.config.lineItems = lineItems;\n    }\n    /**\n     * Validates the merchant session\n     *\n     * @param  {Event} event ApplePayValidateMerchantEvent\n     * @return {[type]} [description]\n     * @private\n     */\n\n  }, {\n    key: \"onValidateMerchant\",\n    value: function onValidateMerchant(event) {\n      var _this4 = this;\n\n      debug('Validating Apple Pay merchant session', event);\n      var validationURL = event.validationURL;\n      this.recurly.request.post({\n        route: '/apple_pay/start',\n        data: {\n          validationURL: validationURL\n        },\n        done: function done(err, merchantSession) {\n          if (err) return _this4.error(err);\n\n          _this4.session.completeMerchantValidation(merchantSession);\n        }\n      });\n    }\n    /**\n     * Handles payment method selection\n     *\n     * @param  {Event} event\n     * @private\n     */\n\n  }, {\n    key: \"onPaymentMethodSelected\",\n    value: function onPaymentMethodSelected(event) {\n      debug('Payment method selected', event);\n      this.session.completePaymentMethodSelection(this.finalTotalLineItem, this.lineItems);\n    }\n    /**\n     * Handles shipping contact selection. Not utilized\n     *\n     * @param  {Event} event\n     * @private\n     */\n\n  }, {\n    key: \"onShippingContactSelected\",\n    value: function onShippingContactSelected(event) {\n      var status = this.session.STATUS_SUCCESS;\n      var newShippingMethods = [];\n      this.emit('shippingContactSelected', event);\n      this.session.completeShippingContactSelection(status, newShippingMethods, this.finalTotalLineItem, this.lineItems);\n    }\n    /**\n     * Handles shipping method selection. Not utilized\n     *\n     * @param  {Event} event\n     * @private\n     */\n\n  }, {\n    key: \"onShippingMethodSelected\",\n    value: function onShippingMethodSelected(event) {\n      var status = this.session.STATUS_SUCCESS;\n      this.emit('shippingMethodSelected', event);\n      this.session.completeShippingMethodSelection(status, this.finalTotalLineItem, this.lineItems);\n    }\n    /**\n     * Handles payment authorization. Submits payment token and\n     * emits the resultant authorization token\n     *\n     * @param  {Event} event\n     * @emit 'token'\n     * @private\n     */\n\n  }, {\n    key: \"onPaymentAuthorized\",\n    value: function onPaymentAuthorized(event) {\n      debug('Payment authorization received', event);\n      var data = {};\n\n      if (this.config.form) {\n        data = Object(_util_normalize__WEBPACK_IMPORTED_MODULE_4__[\"normalize\"])(this.config.form, _token__WEBPACK_IMPORTED_MODULE_6__[\"FIELDS\"], {\n          parseCard: false\n        }).values;\n      }\n\n      this.emit('paymentAuthorized', event);\n      this.mapPaymentData(data, event.payment);\n      return this.token(event, data);\n    }\n  }, {\n    key: \"token\",\n    value: function token(event, data) {\n      var _this5 = this;\n\n      this.recurly.request.post({\n        route: '/apple_pay/token',\n        data: data,\n        done: function done(err, token) {\n          if (err) {\n            _this5.session.completePayment(_this5.session.STATUS_FAILURE);\n\n            return _this5.error('apple-pay-payment-failure', err);\n          }\n\n          debug('Token received', token);\n\n          _this5.session.completePayment(_this5.session.STATUS_SUCCESS);\n\n          _this5.emit('authorized', event);\n\n          _this5.emit('token', token);\n        }\n      });\n    }\n    /**\n     * Handles customer cancelation. Passes on the event\n     *\n     * @param  {Event} event\n     * @emit 'cancel'\n     * @private\n     */\n\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(event) {\n      debug('User canceled Apple Pay payment', event);\n      this.emit('cancel', event);\n    }\n    /**\n     * Creates and emits a RecurlyError\n     *\n     * @param  {...Mixed} params to be passed to the Recurlyerror factory\n     * @return {RecurlyError}\n     * @emit 'error'\n     * @private\n     */\n\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this6 = this;\n\n      var err = (arguments.length <= 0 ? undefined : arguments[0]) instanceof Error ? arguments.length <= 0 ? undefined : arguments[0] : _errors__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apply(void 0, arguments);\n      setTimeout(function () {\n        return _this6.emit('error', err);\n      }, 0);\n      return err;\n    }\n    /**\n     * Maps data from the Apple Pay token into the inputs\n     * object that is sent to RA for tokenization\n     *\n     * @private\n     */\n\n  }, {\n    key: \"mapPaymentData\",\n    value: function mapPaymentData(inputs, data) {\n      inputs.paymentData = data.token.paymentData;\n      inputs.paymentMethod = data.token.paymentMethod;\n      if (!data.billingContact) return;\n      if (_token__WEBPACK_IMPORTED_MODULE_6__[\"FIELDS\"].some(function (field) {\n        return inputs[field];\n      })) return;\n      _token__WEBPACK_IMPORTED_MODULE_6__[\"FIELDS\"].forEach(function (field) {\n        if (!APPLE_PAY_ADDRESS_MAP[field]) return;\n        var tokenData = data.billingContact[APPLE_PAY_ADDRESS_MAP[field]]; // address lines are an array from Apple Pay\n\n        if (field === 'address1') tokenData = tokenData[0];else if (field === 'address2') tokenData = tokenData[1];\n        inputs[field] = tokenData;\n      });\n    }\n  }]);\n\n  return ApplePay;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n/**\n * Builds an ApplePayLineItem\n * @param  {String} label\n * @param  {Number} amount\n * @return {object}\n */\n\nfunction lineItem() {\n  var label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var amount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return {\n    label: label,\n    amount: Object(_util_decimalize__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(amount)\n  };\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/apple-pay/apple-pay.js?");

/***/ }),

/***/ "./lib/recurly/apple-pay/index.js":
/*!****************************************!*\
  !*** ./lib/recurly/apple-pay/index.js ***!
  \****************************************/
/*! exports provided: factory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony import */ var _apple_pay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apple-pay */ \"./lib/recurly/apple-pay/apple-pay.js\");\n/* harmony import */ var _apple_pay_braintree__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apple-pay.braintree */ \"./lib/recurly/apple-pay/apple-pay.braintree.js\");\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n/**\n * Instantiation factory\n *\n * @param  {Object} options\n * @return {ApplePay}\n */\n\nfunction factory(options) {\n  var _options$braintree;\n\n  var factoryClass = options !== null && options !== void 0 && (_options$braintree = options.braintree) !== null && _options$braintree !== void 0 && _options$braintree.clientAuthorization ? _apple_pay_braintree__WEBPACK_IMPORTED_MODULE_1__[\"ApplePayBraintree\"] : _apple_pay__WEBPACK_IMPORTED_MODULE_0__[\"ApplePay\"];\n  return new factoryClass(_extends({}, options, {\n    recurly: this\n  }));\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/apple-pay/index.js?");

/***/ }),

/***/ "./lib/recurly/bank-account.js":
/*!*************************************!*\
  !*** ./lib/recurly/bank-account.js ***!
  \*************************************/
/*! exports provided: bankAccount */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bankAccount\", function() { return bankAccount; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _util_normalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/normalize */ \"./lib/util/normalize.js\");\n/* harmony import */ var _validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validate */ \"./lib/recurly/validate.js\");\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:bankAccount');\n\nvar bankAccount = {\n  token: token,\n  bankInfo: bankInfo\n};\n/**\n * Fields that are sent to API.\n *\n * @type {Array}\n * @private\n */\n\nvar FIELDS = ['account_number', 'account_number_confirmation', 'bsb_code', 'iban', 'routing_number', 'sort_code', 'name_on_account', 'account_type', 'address1', 'address2', 'company', 'country', 'city', 'state', 'postal_code', 'phone', 'vat_number', 'token', 'type'];\n/**\n * Generates a token from customer data.\n *\n * The callback signature: `err, response` where `err` is a\n * connection, request, or server error, and `response` is the\n * recurly service response. The generated token is accessed\n * at `response.token`.\n *\n * @param {Object|HTMLFormElement} options Billing properties or an HTMLFormElement\n * with children corresponding to billing properties via 'data-recurly' attributes.\n * @param {String} options.name_on_account customer name on bank account\n *\n * -- required when tokenizing a US bank account\n *\n * @param {String} options.account_number bank account number\n * @param {String} options.account_number_confirmation bank account number confirmation\n * @param {String} options.routing_number bank routing number\n * @param {String} options.account_type type of bank account (checking/savings)\n *\n * -- required when tokenizing an IBAN bank account\n *\n * @param {String} options.iban\n *\n * @param {String} [options.address1]\n * @param {String} [options.address2]\n * @param {String} [options.country]\n * @param {String} [options.city]\n * @param {String} [options.state]\n * @param {String|Number} [options.postal_code]\n * @param {Function} done callback\n */\n\nfunction token(options, _done) {\n  debug('token');\n  var data = Object(_util_normalize__WEBPACK_IMPORTED_MODULE_1__[\"normalize\"])(options, FIELDS);\n  var inputs = data.values;\n  var userErrors = Object(_validate__WEBPACK_IMPORTED_MODULE_2__[\"validateBankAccountInputs\"])(inputs);\n\n  if (typeof _done !== 'function') {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('missing-callback');\n  }\n\n  if (userErrors.length) {\n    return _done(Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('validation', {\n      fields: userErrors.map(function (e) {\n        return e.field;\n      }),\n      details: userErrors\n    }));\n  }\n\n  if ('iban' in inputs) {\n    inputs.type = 'iban_bank_account';\n  }\n\n  if (inputs.type === 'bacs') {\n    inputs.type = 'bacs_bank_account';\n  }\n\n  if (inputs.type === 'becs') {\n    inputs.type = 'becs_bank_account';\n  }\n\n  this.request.post({\n    route: '/tokens',\n    data: inputs,\n    done: function done(err, res) {\n      if (err) return _done(err);\n\n      if (data.fields.token && res.id) {\n        data.fields.token.value = res.id;\n      }\n\n      _done(null, res);\n    }\n  });\n}\n/**\n * performs a bank lookup\n *\n * The callback signature: `err, response` where `err` is\n * a lookup or server error and `response` and the object containing\n * the found bank info.\n *\n * At this time, the only parameter accepted in the options argument\n * is `routingNumber`.\n *\n * @param  {Object} options lookup properties\n * @param  {String} options.routingNumber the rounting number to use for the bank lookup\n * @param  {Function} done callback\n */\n\n\nfunction bankInfo(options, _done2) {\n  debug('bankInfo');\n\n  if (typeof _done2 !== 'function') {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('missing-callback');\n  }\n\n  var routingNumber = options && options.routingNumber;\n  var userErrors = Object(_validate__WEBPACK_IMPORTED_MODULE_2__[\"validateBankRoutingNumber\"])(routingNumber);\n\n  if (userErrors.length) {\n    return _done2(Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('validation', {\n      fields: userErrors.map(function (e) {\n        return e.field;\n      }),\n      details: userErrors\n    }));\n  }\n\n  this.request.get({\n    route: '/bank',\n    data: {\n      routing_number: routingNumber\n    },\n    done: function done(err, res) {\n      if (err) return _done2(err);\n\n      _done2(null, res);\n    }\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/bank-account.js?");

/***/ }),

/***/ "./lib/recurly/bank-redirect.js":
/*!**************************************!*\
  !*** ./lib/recurly/bank-redirect.js ***!
  \**************************************/
/*! exports provided: factory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:bank-redirect');\n/**\n * Instantiation factory.\n *\n * @param  {Object} options\n * @return {BankRedirect}\n */\n\n\nfunction factory(options) {\n  return new BankRedirect(_extends({}, options, {\n    recurly: this\n  }));\n}\n/**\n * Initializes a BankRedirect session.\n *\n * @param {Object} options\n * @param {Recurly} options.recurly\n * @constructor\n * @public\n */\n\nvar BankRedirect = /*#__PURE__*/function (_Emitter) {\n  _inherits(BankRedirect, _Emitter);\n\n  var _super = _createSuper(BankRedirect);\n\n  function BankRedirect(options) {\n    var _this;\n\n    _classCallCheck(this, BankRedirect);\n\n    debug('Creating new BankRedirect session');\n    _this = _super.call(this);\n    _this.recurly = options.recurly;\n    return _this;\n  }\n  /**\n   * Fetch the banks.\n   * @param {Object} data\n   * @param {string} attachTo\n   */\n\n\n  _createClass(BankRedirect, [{\n    key: \"loadBanks\",\n    value: function loadBanks(data, attachTo) {\n      var _this2 = this;\n\n      debug('Load banks');\n      var errors = validateBankPayload(data);\n\n      if (errors.length > 0) {\n        return this.error('validation', {\n          fields: errors\n        });\n      }\n\n      this.recurly.request.get({\n        route: '/bank_redirect/banks',\n        data: data,\n        done: function done(error, response) {\n          if (error) {\n            return _this2.error('banks-error', {\n              cause: error\n            });\n          }\n\n          if (attachTo) {\n            attachListToSelect(attachTo, response.banks, 'issuer_id');\n          }\n\n          _this2.emit('banks', response.banks);\n        }\n      });\n    }\n    /**\n     * Fetch the countries.\n     * @param {Object} data\n     * @param {string} attachTo\n     */\n\n  }, {\n    key: \"loadCountries\",\n    value: function loadCountries(data, attachTo) {\n      debug('Load countries');\n      var errors = validateCountriesPayload(data);\n\n      if (errors.length > 0) {\n        return this.error('validation', {\n          fields: errors\n        });\n      }\n\n      var countries = [{\n        id: 'AT',\n        name: 'Austria'\n      }, {\n        id: 'BE',\n        name: 'Belgium'\n      }, {\n        id: 'DE',\n        name: 'Germany'\n      }, {\n        id: 'IT',\n        name: 'Italy'\n      }, {\n        id: 'ES',\n        name: 'Spain'\n      }, {\n        id: 'NL',\n        name: 'The Netherlands'\n      }];\n\n      if (attachTo) {\n        attachListToSelect(attachTo, countries, 'country_code');\n      }\n\n      this.emit('countries', countries);\n    }\n    /**\n     * Start the BankRedirect Payment Modal.\n     * @param {Object} data\n    */\n\n  }, {\n    key: \"start\",\n    value: function start(data) {\n      var _this3 = this;\n\n      debug('Start BankRedirect Payment Modal');\n      var errors = validatePayload(data);\n\n      if (errors.length > 0) {\n        return this.error('validation', {\n          fields: errors\n        });\n      }\n\n      var frame = this.recurly.Frame({\n        height: 600,\n        path: '/bank_redirect/start',\n        payload: data\n      });\n      frame.once('error', function (cause) {\n        return _this3.error('bank-redirect-error', {\n          cause: cause\n        });\n      });\n      frame.once('done', function (token) {\n        return _this3.emit('token', token);\n      });\n      return frame;\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var err = (arguments.length <= 0 ? undefined : arguments[0]) instanceof Error ? arguments.length <= 0 ? undefined : arguments[0] : _errors__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apply(void 0, arguments);\n      this.emit('error', err);\n      return err;\n    }\n  }]);\n\n  return BankRedirect;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\nfunction validatePayload(data) {\n  var errors = validatePaymentMethodType(data);\n  var validation = {\n    ideal: validateIdealPayload,\n    sofort: validateSofortPayload\n  }[data && data.payment_method_type];\n\n  if (validation) {\n    errors.push.apply(errors, _toConsumableArray(validation(data)));\n  }\n\n  return errors;\n}\n\nfunction validateBankPayload(data) {\n  return validatePaymentMethodType(data);\n}\n\nfunction validateCountriesPayload(data) {\n  return validatePaymentMethodType(data);\n}\n\nfunction validatePaymentMethodType(data) {\n  if (!data || !data.payment_method_type) {\n    return ['payment_method_type cannot be blank'];\n  }\n\n  if (data.payment_method_type !== 'ideal' && data.payment_method_type !== 'sofort') {\n    return ['invalid payment_method_type'];\n  }\n\n  return [];\n}\n\nfunction validateIdealPayload(data) {\n  var errors = [];\n\n  if (!data || !data.issuer_id) {\n    errors.push('issuer_id cannot be blank');\n  }\n\n  if (!data || !data.invoice_uuid) {\n    errors.push('invoice_uuid cannot be blank');\n  }\n\n  return errors;\n}\n\nfunction validateSofortPayload(data) {\n  var errors = [];\n\n  if (!data || !data.country_code) {\n    errors.push('country_code cannot be blank');\n  }\n\n  if (!data || !data.invoice_uuid) {\n    errors.push('invoice_uuid cannot be blank');\n  }\n\n  return errors;\n}\n\nfunction attachListToSelect(selector, list, selectorId) {\n  var $select = document.querySelector(selector);\n\n  if (!$select) {\n    return;\n  }\n\n  if ($select.tagName != 'SELECT') {\n    var $container = $select;\n    $select = document.createElement('select');\n    $select.id = selectorId;\n    $select.setAttribute('name', selectorId);\n    $container.appendChild($select);\n  }\n\n  while ($select.options.length > 0) {\n    $select.remove(0);\n  }\n\n  var _iterator = _createForOfIteratorHelper(list),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          id = _step$value.id,\n          name = _step$value.name;\n      var $option = document.createElement('option');\n      $option.appendChild(document.createTextNode(name));\n      $option.setAttribute('value', id);\n      $select.appendChild($option);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/bank-redirect.js?");

/***/ }),

/***/ "./lib/recurly/bus.js":
/*!****************************!*\
  !*** ./lib/recurly/bus.js ***!
  \****************************/
/*! exports provided: Bus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Bus\", function() { return Bus; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./message */ \"./lib/recurly/message.js\");\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/uid */ \"./lib/util/uid.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n/**\n * Hosted field generic message bus\n *\n * Listens to message events on the window, filters recurly messages,\n * and emits them to all registered recipients\n *\n * May also receive generic messages, which it sends to all recipients\n */\n\nvar Bus = /*#__PURE__*/function (_Emitter) {\n  _inherits(Bus, _Emitter);\n\n  var _super = _createSuper(Bus);\n\n  function Bus() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Bus);\n\n    _this = _super.call(this);\n    _this.id = Object(_util_uid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    _this.groupId = options.groupId || Object(_util_uid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    _this.emitters = [];\n    _this.recipients = [];\n    _this.receive = _this.receive.bind(_assertThisInitialized(_this));\n    _this.config = {\n      api: options.api\n    };\n    _this.debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")(\"recurly:bus:\".concat(options.role ? \"\".concat(options.role, \":\") : '').concat(_this.id.split('-')[0]));\n\n    _this.connect();\n\n    _this.send = _this.send.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Bus, [{\n    key: \"connect\",\n    value: function connect() {\n      window.addEventListener('message', this.receive, false);\n      this.debug('listening for postMessage events on', window);\n    }\n    /**\n     * Receives a postMessage, filters it, and sends it out\n     *\n     * @private\n     * @param {MessageEvent} messageEvent\n     */\n\n  }, {\n    key: \"receive\",\n    value: function receive(messageEvent) {\n      // allow for listening to the raw message spout\n      this.emit('raw-message', messageEvent);\n      if (!this.originMatches(messageEvent.origin)) return;\n      this.debug('message event received', messageEvent.data);\n      var message = _message__WEBPACK_IMPORTED_MODULE_1__[\"Message\"].createFromMessageEvent(messageEvent, this.debug.bind(this));\n      if (!this.shouldHandleMessage(message)) return;\n      this.send(message, null, {\n        exclude: [messageEvent.srcElement, messageEvent.source]\n      });\n    }\n    /**\n     * Adds a recipient to the bus\n     *\n     * @public\n     * @param {Window|Emitter} recipient that may receive messages from `send`\n     */\n\n  }, {\n    key: \"add\",\n    value: function add(recipient) {\n      if (~this.recipients.indexOf(recipient)) return;\n      this.recipients.push(recipient);\n      if (recipient instanceof component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a) recipient.emit('bus:added', this);\n      this.debug(\"added recipient. Total: \".concat(this.recipients.length), recipient);\n    }\n    /**\n     * Removes a recipient from the bus\n     *\n     * @public\n     * @param {Window|Emitter} recipient to remove\n     * @return {Boolean} whether the removal was performed\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(recipient) {\n      var pos = this.recipients.indexOf(recipient);\n      return !!(~pos && this.recipients.splice(pos, 1));\n    }\n    /**\n     * Sends a generic message to all recipients\n     *\n     * @public\n     * @param {String} event name of the message's event\n     * @param {Object} body message contents\n     * @param {Object} [options]\n     * @param {Array} [options.exclude] a list of recipients to exlude from receiving the message\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(event, body) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        exclude: []\n      };\n      var groupId = this.groupId;\n      var message = new _message__WEBPACK_IMPORTED_MODULE_1__[\"Message\"](event, body, groupId);\n      var exclude = options.exclude;\n\n      if (!message.event) {\n        this.debug('discarding message due to lack of event name', message);\n        return;\n      }\n\n      var recipients = this.recipients.filter(function (r) {\n        return !~exclude.indexOf(r);\n      });\n      this.debug(\"sending message to \".concat(recipients.length, \" recipients\"), recipients, message);\n      recipients.forEach(function (r) {\n        if (r.postMessage) {\n          if (typeof r.postMessage === 'function') r.postMessage(message, '*');\n        } else if (typeof r.emit === 'function') {\n          r.emit(message.event, message.body);\n        }\n      });\n    }\n    /**\n     * Empties recipients and disconnects the listener\n     *\n     * @public\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.debug('destroying bus', this.groupId, this.id);\n      this.recipients = [];\n      window.removeEventListener('message', this.receive, false);\n    }\n    /**\n     * Determines whether a message received should be handled by this bus\n     *\n     * @private\n     * @param {Message} message\n     */\n\n  }, {\n    key: \"shouldHandleMessage\",\n    value: function shouldHandleMessage(message) {\n      // If a message has a group id, it must match\n      if (message.groupId) return message.groupId === this.groupId;\n      return true;\n    }\n    /**\n     * Checks a message origin for compatibility\n     *\n     * @private\n     * @param {String} url message origin url\n     */\n\n  }, {\n    key: \"originMatches\",\n    value: function originMatches(url) {\n      return origin(url) === origin(this.config.api);\n    }\n  }]);\n\n  return Bus;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n/**\n * Parses an origin from a url\n *\n * @private\n * @param  {String} url\n * @return {Boolean}\n */\n\nfunction origin(url) {\n  var parser = window.document.createElement('a');\n  parser.href = url;\n  return \"\".concat(parser.protocol, \"//\").concat(parser.host);\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/bus.js?");

/***/ }),

/***/ "./lib/recurly/coupon.js":
/*!*******************************!*\
  !*** ./lib/recurly/coupon.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return coupon; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:coupon');\n/**\n * Coupon\n *\n * Retrieves coupon information for the `coupon` and optional `plan`.\n * The `callback` signature is `err, coupon` where `err` may be a request\n * or server error, and `coupon` is a representation of the requested coupon.\n *\n * @param {Object} options\n * @param {String} options.coupon coupon code\n * @param {String} [options.plan] plan code\n * @param {Array[String]} [options.plans] plan codes\n * @param {Function} done\n */\n\n\nfunction coupon() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var done = arguments.length > 1 ? arguments[1] : undefined;\n  debug('%j', options);\n  var coupon = options.coupon,\n      plans = options.plans,\n      plan = options.plan,\n      currency = options.currency;\n  if (!coupon) throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('missing-coupon');\n  if (typeof done !== 'function') throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('missing-callback');\n  if (!plans && plan) plans = [plan];\n  this.request.piped({\n    route: \"/coupons/\".concat(coupon),\n    data: {\n      plan_codes: plans,\n      currency: currency\n    },\n    by: 'plan_codes'\n  }).nodeify(done);\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/coupon.js?");

/***/ }),

/***/ "./lib/recurly/element/card-cvv.js":
/*!*****************************************!*\
  !*** ./lib/recurly/element/card-cvv.js ***!
  \*****************************************/
/*! exports provided: factory, CardCvvElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CardCvvElement\", function() { return CardCvvElement; });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/element.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nfunction factory(options) {\n  return new CardCvvElement(_objectSpread(_objectSpread({}, options), {}, {\n    elements: this\n  }));\n}\nvar CardCvvElement = /*#__PURE__*/function (_Element) {\n  _inherits(CardCvvElement, _Element);\n\n  var _super = _createSuper(CardCvvElement);\n\n  function CardCvvElement() {\n    _classCallCheck(this, CardCvvElement);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(CardCvvElement);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(CardCvvElement, \"type\", 'cvv');\n\n_defineProperty(CardCvvElement, \"elementClassName\", 'CardCvvElement');\n\n//# sourceURL=webpack://recurly/./lib/recurly/element/card-cvv.js?");

/***/ }),

/***/ "./lib/recurly/element/card-month.js":
/*!*******************************************!*\
  !*** ./lib/recurly/element/card-month.js ***!
  \*******************************************/
/*! exports provided: factory, CardMonthElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CardMonthElement\", function() { return CardMonthElement; });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/element.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nfunction factory(options) {\n  return new CardMonthElement(_objectSpread(_objectSpread({}, options), {}, {\n    elements: this\n  }));\n}\nvar CardMonthElement = /*#__PURE__*/function (_Element) {\n  _inherits(CardMonthElement, _Element);\n\n  var _super = _createSuper(CardMonthElement);\n\n  function CardMonthElement() {\n    _classCallCheck(this, CardMonthElement);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(CardMonthElement);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(CardMonthElement, \"type\", 'month');\n\n_defineProperty(CardMonthElement, \"elementClassName\", 'CardMonthElement');\n\n//# sourceURL=webpack://recurly/./lib/recurly/element/card-month.js?");

/***/ }),

/***/ "./lib/recurly/element/card-number.js":
/*!********************************************!*\
  !*** ./lib/recurly/element/card-number.js ***!
  \********************************************/
/*! exports provided: factory, CardNumberElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CardNumberElement\", function() { return CardNumberElement; });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/element.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nfunction factory(options) {\n  return new CardNumberElement(_objectSpread(_objectSpread({}, options), {}, {\n    elements: this\n  }));\n}\nvar CardNumberElement = /*#__PURE__*/function (_Element) {\n  _inherits(CardNumberElement, _Element);\n\n  var _super = _createSuper(CardNumberElement);\n\n  function CardNumberElement() {\n    _classCallCheck(this, CardNumberElement);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(CardNumberElement);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(CardNumberElement, \"type\", 'number');\n\n_defineProperty(CardNumberElement, \"elementClassName\", 'CardNumberElement');\n\n_defineProperty(CardNumberElement, \"supportsTokenization\", true);\n\n//# sourceURL=webpack://recurly/./lib/recurly/element/card-number.js?");

/***/ }),

/***/ "./lib/recurly/element/card-year.js":
/*!******************************************!*\
  !*** ./lib/recurly/element/card-year.js ***!
  \******************************************/
/*! exports provided: factory, CardYearElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CardYearElement\", function() { return CardYearElement; });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/element.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nfunction factory(options) {\n  return new CardYearElement(_objectSpread(_objectSpread({}, options), {}, {\n    elements: this\n  }));\n}\nvar CardYearElement = /*#__PURE__*/function (_Element) {\n  _inherits(CardYearElement, _Element);\n\n  var _super = _createSuper(CardYearElement);\n\n  function CardYearElement() {\n    _classCallCheck(this, CardYearElement);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(CardYearElement);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(CardYearElement, \"type\", 'year');\n\n_defineProperty(CardYearElement, \"elementClassName\", 'CardYearElement');\n\n//# sourceURL=webpack://recurly/./lib/recurly/element/card-year.js?");

/***/ }),

/***/ "./lib/recurly/element/card.js":
/*!*************************************!*\
  !*** ./lib/recurly/element/card.js ***!
  \*************************************/
/*! exports provided: factory, CardElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CardElement\", function() { return CardElement; });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/element.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nfunction factory(options) {\n  return new CardElement(_objectSpread(_objectSpread({}, options), {}, {\n    elements: this\n  }));\n}\nvar CardElement = /*#__PURE__*/function (_Element) {\n  _inherits(CardElement, _Element);\n\n  var _super = _createSuper(CardElement);\n\n  function CardElement() {\n    _classCallCheck(this, CardElement);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(CardElement);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(CardElement, \"type\", 'card');\n\n_defineProperty(CardElement, \"elementClassName\", 'CardElement');\n\n_defineProperty(CardElement, \"supportsTokenization\", true);\n\n//# sourceURL=webpack://recurly/./lib/recurly/element/card.js?");

/***/ }),

/***/ "./lib/recurly/element/element.js":
/*!****************************************!*\
  !*** ./lib/recurly/element/element.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Element; });\n/* harmony import */ var _util_deep_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../util/deep-assign */ \"./lib/util/deep-assign.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/dom */ \"./lib/util/dom.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_util_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash.pick */ \"./node_modules/lodash.pick/index.js\");\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var to_slug_case__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! to-slug-case */ \"./node_modules/to-slug-case/index.js\");\n/* harmony import */ var to_slug_case__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(to_slug_case__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var tabbable__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tabbable */ \"./node_modules/tabbable/index.js\");\n/* harmony import */ var tabbable__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(tabbable__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../util/uid */ \"./lib/util/uid.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar _excluded = [\"elements\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\nvar bowser = __webpack_require__(/*! bowser */ \"./node_modules/bowser/src/bowser.js\");\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:element');\n/**\n * Element\n *\n * Controller for a DOM element that accepts protected customer data\n *\n * @param  {Object} options\n * @param  {Elements} options.elements\n * @return {Element}\n */\n\n\nvar Element = /*#__PURE__*/function (_Emitter) {\n  _inherits(Element, _Emitter);\n\n  var _super = _createSuper(Element);\n\n  function Element(_ref) {\n    var _this;\n\n    var elements = _ref.elements,\n        options = _objectWithoutProperties(_ref, _excluded);\n\n    _classCallCheck(this, Element);\n\n    _this = _super.call(this);\n    _this.elements = elements;\n    _this.recurly = elements.recurly;\n    _this.bus = elements.bus;\n    _this.id = Object(_util_uid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n    _this._config = {};\n    _this.state = {};\n\n    _this.configure(options);\n\n    _this.bus.add(_assertThisInitialized(_this));\n\n    _this.elements.add(_assertThisInitialized(_this));\n\n    _this.on(_this.messageName('state:change'), function () {\n      var _this2;\n\n      return (_this2 = _this).onStateChange.apply(_this2, arguments);\n    });\n\n    _this.on(_this.messageName('focus'), function () {\n      return _this.onFocus();\n    });\n\n    _this.on(_this.messageName('blur'), function () {\n      return _this.onBlur();\n    });\n\n    _this.on(_this.messageName('tab:previous'), function () {\n      return _this.onTab('previous');\n    });\n\n    _this.on(_this.messageName('tab:next'), function () {\n      return _this.onTab('next');\n    });\n\n    _this.on(_this.messageName('submit'), function () {\n      return _this.onSubmit();\n    });\n\n    _this.on('destroy', function () {\n      var _this3;\n\n      return (_this3 = _this).destroy.apply(_this3, arguments);\n    });\n\n    debug('create', _this.id);\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(Element, [{\n    key: \"type\",\n    get: function get() {\n      return this.constructor.type;\n    }\n  }, {\n    key: \"supportsTokenization\",\n    get: function get() {\n      return this.constructor.supportsTokenization;\n    }\n  }, {\n    key: \"elementClassName\",\n    get: function get() {\n      return this.constructor.elementClassName;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"container\",\n    get: function get() {\n      var _this4 = this;\n\n      if (this._container) return this._container;\n      var classList = this.classList,\n          iframe = this.iframe,\n          tabProxy = this.tabProxy,\n          id = this.id;\n      var _this$constructor = this.constructor,\n          DATA_ATTRIBUTE_ID = _this$constructor.DATA_ATTRIBUTE_ID,\n          INSTANCE_REF_NAME = _this$constructor.INSTANCE_REF_NAME;\n      var container = this._container = document.createElement('div');\n      _util_dom__WEBPACK_IMPORTED_MODULE_1___default.a.data(container, DATA_ATTRIBUTE_ID, id);\n      container[INSTANCE_REF_NAME] = this;\n      container.setAttribute('class', classList);\n\n      if (isMobile()) {\n        container.appendChild(tabProxy);\n      }\n\n      container.appendChild(iframe);\n      container.addEventListener('click', function () {\n        return _this4.focus();\n      });\n      return container;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"tabProxy\",\n    get: function get() {\n      var _this5 = this;\n\n      if (this._tabProxy) return this._tabProxy;\n      var proxy = this._tabProxy = _util_dom__WEBPACK_IMPORTED_MODULE_1___default.a.createHiddenInput();\n      proxy.addEventListener('focus', function () {\n        return _this5.focus();\n      });\n      return proxy;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"iframe\",\n    get: function get() {\n      if (this._iframe) return this._iframe;\n      var id = this.id,\n          url = this.url;\n      var FRAME_NAME_PREFIX = this.constructor.FRAME_NAME_PREFIX;\n      var iframe = this._iframe = document.createElement('iframe');\n      iframe.setAttribute('allowtransparency', 'true');\n      iframe.setAttribute('frameborder', '0');\n      iframe.setAttribute('scrolling', 'no');\n      iframe.setAttribute('name', \"\".concat(FRAME_NAME_PREFIX).concat(id));\n      iframe.setAttribute('allowpaymentrequest', 'true');\n      iframe.setAttribute('style', 'background: none; width: 100%; height: 100%;');\n      iframe.src = url;\n      return iframe;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.iframe.contentWindow;\n    }\n    /**\n     * @private\n     *\n     * FIXME: contentWindow access is very slow.\n     *   - we may wish to use a sentinel to track attached state,\n     *     toggled by 'attach' event and .remove()\n     */\n\n  }, {\n    key: \"attached\",\n    get: function get() {\n      return !!this.window;\n    }\n    /**\n     * Whether this instance has begun attachment but is awaiting the 'ready' message\n     *\n     * @public\n     */\n\n  }, {\n    key: \"attaching\",\n    get: function get() {\n      return this.hasListeners(this.messageName('ready'));\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"url\",\n    get: function get() {\n      return 'https://cyberxander90.github.io/testing-recurly/field.html';\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"config\",\n    get: function get() {\n      var bus = this.bus,\n          id = this.id,\n          recurly = this.recurly,\n          type = this.type;\n      var deviceId = recurly.deviceId,\n          sessionId = recurly.sessionId;\n      return _objectSpread(_objectSpread({}, this._config), {}, {\n        busGroupId: bus.groupId,\n        deviceId: deviceId,\n        elementId: id,\n        recurly: recurly.sanitizedConfig,\n        sessionId: sessionId,\n        type: type\n      });\n    }\n    /**\n     * Provides a string of class names corresponding to\n     * the current state\n     *\n     * @private\n     */\n\n  }, {\n    key: \"classList\",\n    get: function get() {\n      var attached = this.attached,\n          state = this.state,\n          type = this.type;\n      var prefix = 'recurly-element';\n      var classes = [prefix];\n\n      if (attached) {\n        classes.push(\"\".concat(prefix, \"-\").concat(type));\n\n        if (state.focus) {\n          classes.push(\"\".concat(prefix, \"-focus\"));\n          classes.push(\"\".concat(prefix, \"-\").concat(type, \"-focus\"));\n        }\n\n        if (state.valid) {\n          classes.push(\"\".concat(prefix, \"-valid\"));\n          classes.push(\"\".concat(prefix, \"-\").concat(type, \"-valid\"));\n        } else if (!state.focus && !state.empty) {\n          classes.push(\"\".concat(prefix, \"-invalid\"));\n          classes.push(\"\".concat(prefix, \"-\").concat(type, \"-invalid\"));\n        }\n      }\n\n      return classes.join(' ');\n    }\n    /**\n     * Attach the element to an HTMLElement\n     *\n     * Usage\n     *\n     * ```\n     * element.attach('#my-card-container');\n     * ```\n     *\n     * ```\n     * element.attach(document.querySelector('#my-card-container'));\n     * ```\n     *\n     * @public\n     * @param  {HTMLElement|String} parent element or selector reference to the attach target\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(parent) {\n      var _this6 = this;\n\n      parent = _util_dom__WEBPACK_IMPORTED_MODULE_1___default.a.element(parent);\n\n      if (!parent) {\n        throw new Error('Invalid parent. Expected HTMLElement.');\n      }\n\n      var attached = this.attached,\n          bus = this.bus,\n          container = this.container,\n          id = this.id;\n      debug('attach', id);\n\n      if (attached) {\n        if (container.parentElement === parent) return this;\n        this.remove();\n      }\n\n      parent.appendChild(container);\n      bus.add(this.window);\n      this.once(this.messageName('ready'), function () {\n        return _this6.emit('attach', _this6);\n      });\n      return this;\n    }\n    /**\n     * Removes the element from the DOM\n     *\n     * @public\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var attached = this.attached,\n          bus = this.bus,\n          id = this.id,\n          container = this.container;\n      debug('remove', id);\n      if (!attached) return this;\n      var parent = container.parentElement;\n      if (!parent) return this;\n      bus.remove(this.window);\n      parent.removeChild(container); // Prevent dangling ready listeners from triggering the 'attach' event\n\n      this.off(this.messageName('ready'));\n      this.emit('remove', this);\n      return this;\n    }\n    /**\n     * Destroys the element and disables its functionality\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.remove();\n      this.off();\n      this.bus.remove(this);\n      this.elements.remove(this);\n      delete this.container;\n      delete this.iframe;\n      delete this.window;\n      return this;\n    }\n    /**\n     * Configures the element, enforcing the config allowlist\n     *\n     * @public\n     */\n\n  }, {\n    key: \"configure\",\n    value: function configure() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _config = this._config;\n      var OPTIONS = this.constructor.OPTIONS;\n      var newConfig = Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, _config, lodash_pick__WEBPACK_IMPORTED_MODULE_4___default()(options, OPTIONS));\n      if (JSON.stringify(_config) === JSON.stringify(newConfig)) return this;\n      this._config = newConfig;\n      this.update();\n      return this;\n    }\n    /**\n     * Places focus on this element\n     */\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.bus.send(this.messageName('focus!'));\n    }\n    /**\n     * Updates element DOM properties to latest values\n     *\n     * @private\n     */\n\n  }, {\n    key: \"update\",\n    value: function update() {\n      var bus = this.bus,\n          classList = this.classList,\n          config = this.config,\n          id = this.id,\n          iframe = this.iframe;\n      var tabIndex = parseInt(config.tabIndex, 10) || 0;\n      debug('update', id);\n      this.container.className = classList;\n      iframe.setAttribute('tabindex', tabIndex);\n      bus.send(this.messageName('configure!'), config);\n    }\n    /**\n     * Builds a standard message name string in the format expected from\n     * a frame message\n     *\n     * @private\n     * @param {string} name message name\n     * @return {String} fully qualified message name\n     */\n\n  }, {\n    key: \"messageName\",\n    value: function messageName(name) {\n      return \"element:\".concat(this.id, \":\").concat(name);\n    }\n    /**\n     * Provides an Array of tabbable HTMLElements in the document body,\n     * excluding (Recurly) Element frames\n     *\n     * @private\n     * @return {Array} of HTMLElements\n     */\n\n  }, {\n    key: \"tabbableItems\",\n    value: function tabbableItems() {\n      var FRAME_NAME_PREFIX = this.constructor.FRAME_NAME_PREFIX;\n      return tabbable__WEBPACK_IMPORTED_MODULE_6___default()(window.document.body).filter(function (el) {\n        if (!el.name) return true;\n        return el.name.indexOf(FRAME_NAME_PREFIX) !== 0;\n      });\n    } // Event handlers\n\n    /**\n     * Updates state to reflect changes signaled by the Element iframe\n     *\n     * @private\n     * @param  {Object} body message body, containing new state\n     */\n\n  }, {\n    key: \"onStateChange\",\n    value: function onStateChange(body) {\n      debug('state change', this.id, body);\n\n      var newState = _objectSpread({}, body);\n\n      delete newState.type;\n      if (JSON.stringify(this.state) === JSON.stringify(newState)) return;\n      this.state = newState;\n      debug('state change committed', this.id, {\n        old: this.state,\n        new: newState\n      });\n      this.emit('change', _objectSpread({}, this.state));\n      this.update();\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      debug('focus', this.id);\n      this.emit('focus', this);\n    }\n  }, {\n    key: \"onBlur\",\n    value: function onBlur() {\n      debug('blur', this.id);\n      this.emit('blur', this);\n    }\n  }, {\n    key: \"onTab\",\n    value: function onTab(direction) {\n      debug('tab', this.id, direction);\n      var tabProxy = this.tabProxy;\n      if (!tabProxy) return;\n      var tabbableItems = this.tabbableItems();\n      var pos = tabbableItems.indexOf(tabProxy);\n      var dest = direction === 'previous' ? tabbableItems[pos - 1] : tabbableItems[pos + 1];\n      if (dest) dest.focus();\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      debug('submit', this.id);\n      this.emit('submit', this);\n    }\n  }], [{\n    key: \"findElementInDOMTree\",\n    value:\n    /**\n     * Locates the first Element in a DOM tree\n     *\n     * @param {HTMLElement} root\n     * @return {Element} First element encountered in the tree\n     */\n    function findElementInDOMTree(parent) {\n      var DATA_ATTRIBUTE_ID = Element.DATA_ATTRIBUTE_ID,\n          INSTANCE_REF_NAME = Element.INSTANCE_REF_NAME;\n      var maybes = parent.querySelectorAll(\"[data-\".concat(to_slug_case__WEBPACK_IMPORTED_MODULE_5___default()(DATA_ATTRIBUTE_ID), \"]\"));\n      var container = component_find__WEBPACK_IMPORTED_MODULE_3___default()(maybes, function (maybe) {\n        return INSTANCE_REF_NAME in maybe;\n      });\n      if (container) return container[INSTANCE_REF_NAME];\n    }\n  }]);\n\n  return Element;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_2___default.a);\n/**\n * Determine if user's browser is mobile or non-mobile\n * @return {Boolean} value\n */\n\n\n_defineProperty(Element, \"DATA_ATTRIBUTE_ID\", 'recurlyElementId');\n\n_defineProperty(Element, \"FRAME_NAME_PREFIX\", 'recurly-element--');\n\n_defineProperty(Element, \"INSTANCE_REF_NAME\", '__recurlyElement');\n\n_defineProperty(Element, \"OPTIONS\", ['displayIcon', 'inputType', 'style', 'tabIndex']);\n\n_defineProperty(Element, \"supportsTokenization\", false);\n\n_defineProperty(Element, \"type\", null);\n\n\n\nfunction isMobile() {\n  return bowser.mobile || bowser.tablet;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/element/element.js?");

/***/ }),

/***/ "./lib/recurly/element/index.js":
/*!**************************************!*\
  !*** ./lib/recurly/element/index.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/element.js\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n//# sourceURL=webpack://recurly/./lib/recurly/element/index.js?");

/***/ }),

/***/ "./lib/recurly/elements.js":
/*!*********************************!*\
  !*** ./lib/recurly/elements.js ***!
  \*********************************/
/*! exports provided: factory, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Elements; });\n/* harmony import */ var _bus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bus */ \"./lib/recurly/bus.js\");\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _element_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./element/card */ \"./lib/recurly/element/card.js\");\n/* harmony import */ var _element_card_number__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./element/card-number */ \"./lib/recurly/element/card-number.js\");\n/* harmony import */ var _element_card_month__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./element/card-month */ \"./lib/recurly/element/card-month.js\");\n/* harmony import */ var _element_card_year__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./element/card-year */ \"./lib/recurly/element/card-year.js\");\n/* harmony import */ var _element_card_cvv__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./element/card-cvv */ \"./lib/recurly/element/card-cvv.js\");\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../util/uid */ \"./lib/util/uid.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:elements');\n\nfunction factory(options) {\n  return new Elements(_extends({}, options, {\n    recurly: this\n  }));\n}\n/**\n * Elements\n *\n * Controls a group of Element instances\n *\n * @param  {Object} options\n * @param  {Elements} options.recurly\n */\n\nvar Elements = /*#__PURE__*/function (_Emitter) {\n  _inherits(Elements, _Emitter);\n\n  var _super = _createSuper(Elements);\n\n  function Elements(_ref) {\n    var _this;\n\n    var recurly = _ref.recurly;\n\n    _classCallCheck(this, Elements);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"CardElement\", _element_card__WEBPACK_IMPORTED_MODULE_4__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"CardNumberElement\", _element_card_number__WEBPACK_IMPORTED_MODULE_5__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"CardMonthElement\", _element_card_month__WEBPACK_IMPORTED_MODULE_6__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"CardYearElement\", _element_card_year__WEBPACK_IMPORTED_MODULE_7__[\"factory\"]);\n\n    _defineProperty(_assertThisInitialized(_this), \"CardCvvElement\", _element_card_cvv__WEBPACK_IMPORTED_MODULE_8__[\"factory\"]);\n\n    _this.recurly = recurly;\n    _this.id = \"recurly-elements:\".concat(Object(_util_uid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])());\n    _this.elements = [];\n    _this.bus = new _bus__WEBPACK_IMPORTED_MODULE_0__[\"Bus\"]({\n      api: recurly.config.api,\n      role: 'elements'\n    });\n\n    _this.bus.add(_assertThisInitialized(_this));\n\n    _this.bus.add(recurly);\n\n    _this.on('destroy', function () {\n      var _this2;\n\n      return (_this2 = _this).destroy.apply(_this2, arguments);\n    });\n\n    _this.on('token:init', function () {\n      var _this3;\n\n      return (_this3 = _this).ensureTokenCapability.apply(_this3, arguments);\n    });\n\n    debug('create', _this.id);\n    return _this;\n  }\n  /**\n   * Adds an element\n   *\n   * @private\n   * @param  {Element} element\n   */\n\n\n  _createClass(Elements, [{\n    key: \"add\",\n    value: function add(element) {\n      debug('add', this.id, element);\n      var elements = this.elements;\n      var VALID_SETS = this.constructor.VALID_SETS;\n\n      if (!(element instanceof _element__WEBPACK_IMPORTED_MODULE_1__[\"default\"])) {\n        throw new Error(\"Invalid element. Expected Element, got \".concat(_typeof(element)));\n      }\n\n      if (elements.some(function (e) {\n        return e === element;\n      })) {\n        throw new Error(\"\\n        Invalid element. There is already a `\".concat(element.elementClassName, \"` in this set.\\n      \"));\n      } // Validate that the new element can be added to the existing set\n      // TODO: Add set rules documentation link to the error\n\n\n      var newSet = elements.concat(element);\n\n      if (!VALID_SETS.some(function (set) {\n        return newSet.every(function (ne) {\n          return ~set.indexOf(ne.constructor);\n        });\n      })) {\n        throw new Error(\"\\n        Invalid element. A `\".concat(element.elementClassName, \"` may not be added to the existing set:\\n        \").concat(elements.map(function (e) {\n          return \"'\".concat(e.elementClassName, \"'\");\n        }).join(', '), \"\\n      \"));\n      }\n\n      elements.push(element);\n      element.on('attach', this.onElementAttach.bind(this));\n      element.on('submit', this.onElementSubmit.bind(this));\n      this.sendPeerAnnounce();\n    }\n    /**\n     * Removes an element\n     *\n     * @private\n     * @param  {Element} element\n     * @return {Boolean} whether the removal was performed\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(element) {\n      debug('remove', this.id, element);\n      var elements = this.elements;\n      var pos = elements.indexOf(element);\n      var removed = ~pos && elements.splice(pos, 1);\n      if (removed) this.sendPeerAnnounce();\n      return removed;\n    }\n    /**\n     * Destroys this controller\n     *\n     * TODO: disable instance upon destruction?\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      debug('destroy', this.id);\n      var elements = this.elements,\n          bus = this.bus;\n      elements.forEach(function (e) {\n        return e.destroy();\n      });\n      bus.destroy();\n    }\n    /**\n     * Sends a message announcing the ids of the associated elements\n     *\n     * @private\n     */\n\n  }, {\n    key: \"sendPeerAnnounce\",\n    value: function sendPeerAnnounce() {\n      var elements = this.elements,\n          bus = this.bus;\n      var ids = elements.map(function (e) {\n        return e.id;\n      });\n      bus.send('elements:peer-announce', {\n        ids: ids\n      });\n    } // Event handlers\n\n    /**\n     * Sends the 'elements:ready!' event when no elements are in the process\n     * of attaching\n     *\n     * Called when any element has finished attaching and initializing\n     *\n     * @private\n     * @param {Element} element\n     */\n\n  }, {\n    key: \"onElementAttach\",\n    value: function onElementAttach(element) {\n      debug('element attach', this.id, element);\n      var elements = this.elements,\n          bus = this.bus;\n      if (elements.length < 1) return;\n      if (elements.some(function (e) {\n        return e.attaching;\n      })) return;\n      bus.send('elements:ready!');\n      this.sendPeerAnnounce();\n    }\n    /**\n     * Emits the submit event to indicate when the event has occurred on an Element\n     *\n     * @private\n     * @param {Element} element\n     */\n\n  }, {\n    key: \"onElementSubmit\",\n    value: function onElementSubmit(element) {\n      debug('submit', this.id, element);\n      this.emit('submit', element);\n    }\n    /**\n     * Ensures the current elements group contains one Element supporting tokenization.\n     * If one is not present, then this will emit an error to the token listener.\n     *\n     * @param {String} options.id tokenization id\n     */\n\n  }, {\n    key: \"ensureTokenCapability\",\n    value: function ensureTokenCapability(_ref2) {\n      var id = _ref2.id;\n      var elements = this.elements,\n          bus = this.bus;\n\n      if (!elements.some(function (el) {\n        return el.supportsTokenization;\n      })) {\n        var found = elements.map(function (el) {\n          return el.elementClassName;\n        });\n        var err = Object(_errors__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('elements-tokenization-not-possible', {\n          found: found\n        });\n        bus.send(\"token:done:\".concat(id), {\n          err: err\n        });\n      }\n    }\n  }]);\n\n  return Elements;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_2___default.a);\n\n_defineProperty(Elements, \"VALID_SETS\", [[_element_card__WEBPACK_IMPORTED_MODULE_4__[\"CardElement\"]], [_element_card_number__WEBPACK_IMPORTED_MODULE_5__[\"CardNumberElement\"], _element_card_month__WEBPACK_IMPORTED_MODULE_6__[\"CardMonthElement\"], _element_card_year__WEBPACK_IMPORTED_MODULE_7__[\"CardYearElement\"], _element_card_cvv__WEBPACK_IMPORTED_MODULE_8__[\"CardCvvElement\"]]]);\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/elements.js?");

/***/ }),

/***/ "./lib/recurly/errors.js":
/*!*******************************!*\
  !*** ./lib/recurly/errors.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return error; });\n/* harmony import */ var _reporter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reporter */ \"./lib/recurly/reporter.js\");\n/* harmony import */ var string_squish__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! string-squish */ \"./node_modules/string-squish/index.js\");\n/* harmony import */ var string_squish__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(string_squish__WEBPACK_IMPORTED_MODULE_1__);\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\nvar BASE_URL = 'https://dev.recurly.com/docs/recurly-js-';\nvar ERRORS = [{\n  code: 'not-configured',\n  message: 'Not configured. You must first call recurly.configure().',\n  classification: 'merchant',\n  help: 'getting-started#section-configure'\n}, {\n  code: 'config-missing-public-key',\n  message: 'The publicKey setting is required.',\n  classification: 'merchant',\n  help: '#identify-your-site'\n}, {\n  code: 'config-missing-fields',\n  message: 'The fields setting is required.',\n  classification: 'merchant'\n}, {\n  code: 'missing-hosted-field-target',\n  message: function message(c) {\n    return \"Target HTMLElement not found for \".concat(c.type, \" field using selector '\").concat(c.selector, \"'\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'elements-tokenization-not-possible',\n  message: function message(c) {\n    return \"No Element capable of tokenization was found in the given Elements group\\n                   (\".concat(c.found.join(','), \"). Please review documentation for a list of tokenizing Elements.\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'api-error',\n  message: 'There was an error with your request.',\n  classification: 'api'\n}, {\n  code: 'api-timeout',\n  message: 'The API request timed out.',\n  classification: 'api'\n}, {\n  code: 'validation',\n  message: 'There was an error validating your request.',\n  classification: 'customer'\n}, {\n  code: 'missing-callback',\n  message: 'Missing callback',\n  classification: 'merchant'\n}, {\n  code: 'invalid-options',\n  message: 'Options must be an object',\n  classification: 'merchant'\n}, {\n  code: 'invalid-option',\n  message: function message(c) {\n    return \"Option \".concat(c.name, \" must be \").concat(c.expect);\n  },\n  classification: 'merchant'\n}, {\n  code: 'missing-plan',\n  message: 'A plan must be specified.',\n  classification: 'merchant'\n}, {\n  code: 'missing-coupon',\n  message: 'A coupon must be specified.',\n  classification: 'merchant'\n}, {\n  code: 'invalid-item',\n  message: 'The given item does not appear to be a valid recurly plan, coupon, addon, or taxable address.',\n  classification: 'merchant'\n}, {\n  code: 'invalid-addon',\n  message: 'The given addon_code is not among the valid addons for the specified plan.',\n  classification: 'merchant'\n}, {\n  code: 'invalid-currency',\n  message: function message(c) {\n    return \"The given currency (\".concat(c.currency, \") is not among the valid codes for the specified plan(s): \").concat(c.allowed, \".\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'invalid-plan-currency',\n  message: function message(c) {\n    return \"The requested plan (\".concat(c.planCode, \") does not support the possible checkout currencies: \").concat(c.currencies, \".\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'invalid-subscription-currency',\n  message: \"The given subscription does not support the currencies of this Checkout instance's existing subscriptions\",\n  classification: 'merchant'\n}, {\n  code: 'invalid-item-currency',\n  message: function message(c) {\n    return \"The requested item (\".concat(c.itemCode, \") does not support the requested currency: \").concat(c.currency, \".\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'unremovable-item',\n  message: 'The given item cannot be removed.',\n  classification: 'merchant'\n}, {\n  code: 'fraud-data-collector-request-failed',\n  message: function message(c) {\n    return \"There was an error getting the data collector fields: \".concat(c.error);\n  },\n  classification: 'internal'\n}, {\n  code: 'fraud-data-collector-missing-form',\n  message: function message(c) {\n    return \"There was an error finding a form to inject the data collector fields using selector '\".concat(c.selector, \"'\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'gift-card-currency-mismatch',\n  message: 'The giftcard currency does not match the given currency.',\n  classification: 'merchant'\n}, {\n  code: 'apple-pay-not-supported',\n  message: 'Apple Pay is not supported by this device or browser.',\n  classification: 'environment'\n}, {\n  code: 'apple-pay-not-available',\n  message: 'Apple Pay is supported by this device, but the customer has not configured Apple Pay.',\n  classification: 'environment'\n}, {\n  code: 'apple-pay-config-missing',\n  message: function message(c) {\n    return \"Missing Apple Pay configuration option: '\".concat(c.opt, \"'\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'apple-pay-config-invalid',\n  message: function message(c) {\n    return \"Apple Pay configuration option '\".concat(c.opt, \"' is not among your available options: \").concat(c.set, \".\\n                   Please refer to your site configuration if the available options is incorrect.\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'apple-pay-factory-only',\n  message: 'Apple Pay must be initialized by calling recurly.ApplePay',\n  classification: 'merchant'\n}, {\n  code: 'apple-pay-init-error',\n  message: function message(c) {\n    var message = 'Apple Pay did not initialize due to a fatal error';\n    if (c.err) message += \": \".concat(c.err.message);\n    return message;\n  },\n  classification: 'internal'\n}, {\n  code: 'apple-pay-payment-failure',\n  message: 'Apply Pay could not charge the customer',\n  classification: 'internal'\n}, {\n  code: 'paypal-factory-only',\n  message: 'PayPal must be initialized by calling recurly.PayPal',\n  classification: 'merchant'\n}, {\n  code: 'venmo-factory-only',\n  message: 'Venmo must be initialized by calling recurly.Venmo',\n  classification: 'merchant'\n}, {\n  code: 'paypal-config-missing',\n  message: function message(c) {\n    return \"Missing PayPal configuration option: '\".concat(c.opt, \"'\");\n  },\n  classification: 'merchant'\n}, {\n  code: 'paypal-load-error',\n  message: 'Client libraries failed to load',\n  classification: 'environment'\n}, {\n  code: 'paypal-client-error',\n  message: 'PayPal encountered an unexpected error',\n  classification: 'internal'\n}, {\n  code: 'paypal-tokenize-error',\n  message: 'An error occurred while attempting to generate the PayPal token',\n  classification: 'internal'\n}, {\n  code: 'paypal-tokenize-recurly-error',\n  message: 'An error occurred while attempting to generate the Recurly token',\n  classification: 'internal'\n}, {\n  code: 'paypal-braintree-not-ready',\n  message: 'Braintree PayPal is not yet ready to create a checkout flow',\n  classification: 'merchant'\n}, {\n  code: 'paypal-braintree-api-error',\n  message: 'Braintree API experienced an error',\n  classification: 'internal'\n}, {\n  code: 'venmo-braintree-api-error',\n  message: 'Braintree API experienced an error',\n  classification: 'internal'\n}, {\n  code: 'venmo-braintree-tokenize-braintree-error',\n  message: 'An error occurred while attempting to generate the Braintree token',\n  classification: 'internal'\n}, {\n  code: 'venmo-braintree-tokenize-recurly-error',\n  message: 'An error occurred while attempting to generate the Braintree token within Recurly',\n  classification: 'internal'\n}, {\n  code: 'paypal-braintree-tokenize-braintree-error',\n  message: 'An error occurred while attempting to generate the Braintree token',\n  classification: 'internal'\n}, {\n  code: 'paypal-braintree-tokenize-recurly-error',\n  message: 'An error occurred while attempting to generate the Braintree token within Recurly',\n  classification: 'internal'\n}, {\n  code: 'adyen-error',\n  message: \"An error occurred within your Adyen checkout process. Please refer to the\\n              cause property for more detail.\",\n  classification: 'internal'\n}, {\n  code: 'bank-redirect-error',\n  message: \"An error occurred within your BankRedirect payment process. Please refer to the\\n              cause property for more detail.\",\n  classification: 'internal'\n}, {\n  code: 'banks-error',\n  message: \"An error occurred while loading the available banks. Please refer to the\\n              cause property for more detail.\",\n  classification: 'api'\n}, {\n  code: '3ds-vendor-load-error',\n  message: function message(c) {\n    return \"An error occurred while loading a dependency from \".concat(c.vendor, \". Please refer\\n                   to the cause property for more detail.\");\n  },\n  classification: 'internal'\n}, {\n  code: '3ds-auth-error',\n  message: \"We were unable to authenticate your payment method. Please choose a different payment\\n              method and try again.\",\n  classification: 'internal'\n}, {\n  code: '3ds-result-tokenization-error',\n  message: \"An error occurred while attempting to tokenize 3D Secure results.\\n              Please refer to the cause property for more detail.\",\n  classification: 'api'\n}, {\n  code: 'risk-preflight-timeout',\n  message: function message(c) {\n    return \"recurly.Risk timeout out in preflight procedure for \".concat(c.processor, \". Skipping.\");\n  },\n  classification: 'internal'\n}];\n/**\n * Error directory\n *\n * @param {Recurly} recurly instance\n */\n\nvar ErrorDirectory = /*#__PURE__*/function () {\n  function ErrorDirectory() {\n    _classCallCheck(this, ErrorDirectory);\n\n    this.ERROR_MAP = ERRORS.reduce(function (memo, definition) {\n      memo[definition.code] = recurlyErrorFactory(definition);\n      return memo;\n    }, {});\n  }\n  /**\n   * Retrieves an error from the directory\n   *\n   * @param {String} code\n   * @param {Object} [context] arbitrary error property dictionary\n   * @param {Object} [options]\n   * @param {Reporter} [options.reporter] Reporter instance to report errors\n   * @return {RecurlyError}\n   * @throws {Error} if the requested error is not in the directory\n   */\n\n\n  _createClass(ErrorDirectory, [{\n    key: \"get\",\n    value: function get(code) {\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var options = arguments.length > 2 ? arguments[2] : undefined;\n\n      if (!(code in this.ERROR_MAP)) {\n        throw new Error(\"invalid error: \".concat(code));\n      } else {\n        return new this.ERROR_MAP[code](context, options);\n      }\n    }\n  }]);\n\n  return ErrorDirectory;\n}();\n/**\n * Generates a function which binds error properties to a RecurlyError\n *\n * @param {Object} definition\n * @return {Function}\n */\n\n\nfunction recurlyErrorFactory(definition) {\n  var code = definition.code,\n      message = definition.message,\n      help = definition.help;\n  /**\n   * Recurly domain-specific error class\n   *\n   * Provides helpful context to runtime errors. Logs errors.\n   *\n   * @param {String} code error code\n   * @param {String} message error message\n   * @param {Object} context suplementary error data\n   * @param {Object} [options]\n   * @param {Reporter} [options.reporter] Reporter instance used to report an error\n   * @param {String} [help] documentation reference\n   */\n\n  function RecurlyError() {\n    var context = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        reporter = _ref.reporter;\n\n    this.code = this.name = code;\n\n    if (message instanceof Function) {\n      this.message = message(context);\n    } else {\n      this.message = message;\n    }\n\n    this.message = string_squish__WEBPACK_IMPORTED_MODULE_1___default()(this.message);\n\n    _extends(this, context);\n\n    if (help) {\n      this.help = BASE_URL + help;\n      this.message += \" (need help? \".concat(this.help, \")\");\n    }\n\n    if (reporter instanceof _reporter__WEBPACK_IMPORTED_MODULE_0__[\"Reporter\"]) {\n      // Warning: any errors that occur in this code path risk\n      // a stack overflow if they include a reporter\n      reporter.send('error', {\n        code: code,\n        context: context\n      });\n    }\n  }\n\n  RecurlyError.prototype = new Error();\n  return RecurlyError;\n}\n\nvar errorDirectory = new ErrorDirectory();\n/**\n * Exported singleton proxy\n *\n * See ErrorDirectory.get\n */\n\nfunction error() {\n  if ((arguments.length <= 0 ? undefined : arguments[0]) instanceof Error) return arguments.length <= 0 ? undefined : arguments[0];\n  return errorDirectory.get.apply(errorDirectory, arguments);\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/errors.js?");

/***/ }),

/***/ "./lib/recurly/frame.js":
/*!******************************!*\
  !*** ./lib/recurly/frame.js ***!
  \******************************/
/*! exports provided: factory, Frame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Frame\", function() { return Frame; });\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! qs */ \"./node_modules/qs/lib/index.js\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/uid */ \"./lib/util/uid.js\");\nvar _excluded = [\"recurly\", \"path\", \"payload\"];\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:frame');\n/**\n * Options for Frame\n *\n * @typedef {Object} FrameOptions\n * @property {Recurly} recurly\n * @property {String} path            API endpoint to load\n * @property {Object} payload         Message payload to deliver to endpoint\n * @property {TYPE} [type=Frame.TYPES.WINDOW]          window or iframe\n * @property {HTMLElement} container  only valid for type='iframe' --\n *                                      attaches iframe to this container\n * @property {Number} [height=450]    frame height\n * @property {Number} [width=535]     frame width\n */\n\n/**\n * Frame factory. Binds the caller to the `recurly` {FrameOptions} property\n *\n * @public\n * @param {FrameOptions} options\n *\n * @return {Frame}\n */\n\n\nfunction factory(options) {\n  options = _extends({}, options, {\n    recurly: this\n  });\n  return new Frame(options);\n}\n/**\n * Issues an API request to a popup window.\n *\n * @param {FrameOptions} options\n */\n\nvar Frame = /*#__PURE__*/function (_Emitter) {\n  _inherits(Frame, _Emitter);\n\n  var _super = _createSuper(Frame);\n\n  function Frame(_ref) {\n    var _this;\n\n    var recurly = _ref.recurly,\n        path = _ref.path,\n        _ref$payload = _ref.payload,\n        payload = _ref$payload === void 0 ? {} : _ref$payload,\n        options = _objectWithoutProperties(_ref, _excluded);\n\n    _classCallCheck(this, Frame);\n\n    _this = _super.call(this);\n    _this.recurly = recurly;\n    _this.id = \"\".concat(_this.recurly.id, \"-\").concat(Object(_util_uid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])());\n    _this.name = \"recurly-frame-\".concat(_this.id);\n    _this.config = options;\n\n    _this.prepare(path, payload);\n\n    _this.listen();\n\n    return _this;\n  }\n  /**\n   * Whether this Frame is to be rendered as an iframe\n   * @type {Boolean}\n   */\n\n\n  _createClass(Frame, [{\n    key: \"isIframe\",\n    get: function get() {\n      return this.type === Frame.TYPES.IFRAME;\n    }\n    /**\n     * Default event name to listen for.\n     */\n\n  }, {\n    key: \"defaultEventName\",\n    get: function get() {\n      return this.config.defaultEventName;\n    }\n    /**\n     * Frame height from configuration\n     * @type {Number}\n     */\n\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.config.height || this.constructor.DEFAULTS.height;\n    }\n    /**\n     * Frame width from configuration\n     * @type {Number}\n     */\n\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.config.width || this.constructor.DEFAULTS.width;\n    }\n    /**\n     * Frame type from configuration\n     * @type {String}\n     */\n\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this.config.type || this.constructor.DEFAULTS.type;\n    }\n    /**\n     * Frame container element\n     * @type {HTMLElement}\n     */\n\n  }, {\n    key: \"container\",\n    get: function get() {\n      return this.config.container;\n    }\n    /**\n     * Idomatic list of window attributes meant for a `window.open`` call\n     * @type {String}\n     */\n\n  }, {\n    key: \"windowAttributes\",\n    get: function get() {\n      var width = this.width,\n          height = this.height,\n          top = this.top,\n          left = this.left;\n      return \"resizable,scrollbars,width=\".concat(width, \",height=\").concat(height, \",top=\").concat(top, \",left=\").concat(left);\n    }\n    /**\n     * Calculated window top position in order to place a new window above the center\n     * of the parent viewport\n     *\n     * @type {Number}\n     */\n\n  }, {\n    key: \"top\",\n    get: function get() {\n      var outerHeight = window.outerHeight || window.document.documentElement.clientHeight;\n      var outerTop = window.screenY === null ? window.screenTop : window.screenY;\n      return center(outerHeight, this.height, outerTop);\n    }\n    /**\n     * Calculated window left position in order to place a new window above the center\n     * of the parent viewport\n     *\n     * @type {Number}\n     */\n\n  }, {\n    key: \"left\",\n    get: function get() {\n      var outerWidth = window.outerWidth || window.document.documentElement.clientWidth;\n      var outerLeft = window.screenX === null ? window.screenLeft : window.screenX;\n      return center(outerWidth, this.width, outerLeft);\n    }\n    /**\n     * Prepares the url and payload prior to launching the Frame\n     *\n     * @private\n     * @param {String} path - API path to load\n     * @param {Object} payload - Request payload\n     */\n\n  }, {\n    key: \"prepare\",\n    value: function prepare(path, payload) {\n      var _this2 = this;\n\n      var name = this.name,\n          recurly = this.recurly;\n      debug('creating request frame');\n      payload.version = recurly.version;\n      payload.event = name;\n      payload.key = recurly.config.publicKey;\n\n      var ev = function ev(res) {\n        _this2.removeRelay();\n\n        if (res.error) {\n          _this2.emit('error', res.error);\n        } else {\n          _this2.emit('done', res);\n        }\n\n        _this2.destroy();\n      };\n\n      this.once(payload.event, ev);\n\n      if (this.defaultEventName) {\n        this.once(this.defaultEventName, ev);\n      }\n\n      this.url = this.recurly.url(path);\n      this.url += (~this.url.indexOf('?') ? '&' : '?') + qs__WEBPACK_IMPORTED_MODULE_0___default.a.stringify(payload, {\n        encodeValuesOnly: true\n      });\n      this.once('destroy', function () {\n        return _this2.destroy();\n      });\n    }\n    /**\n     * Adds the Frame to the Bus and creates a relay if necessary\n     *\n     * @private\n     */\n\n  }, {\n    key: \"listen\",\n    value: function listen() {\n      var _this3 = this;\n\n      this.recurly.bus.add(this); // IE (including 11) will not allow communication between windows;\n      // thus we must create a frame relay\n\n      if ('documentMode' in document) {\n        debug('creating relay');\n        var relay = document.createElement('iframe');\n        relay.width = relay.height = 0;\n        relay.src = this.recurly.url('/relay');\n        relay.name = \"recurly-relay-\".concat(this.id);\n        relay.style.display = 'none';\n\n        relay.onload = function () {\n          return _this3.create();\n        };\n\n        window.document.body.appendChild(relay);\n        this.relay = relay;\n        debug('created relay', relay);\n      } else {\n        this.create();\n      }\n    }\n    /**\n     * Initiates creation of the frame\n     *\n     * @private\n     */\n\n  }, {\n    key: \"create\",\n    value: function create() {\n      if (this.isIframe) this.createIFrame();else this.createWindow();\n    }\n    /**\n     * Creates a new window (popup)\n     *\n     * @private\n     */\n\n  }, {\n    key: \"createWindow\",\n    value: function createWindow() {\n      var name = this.name,\n          url = this.url,\n          windowAttributes = this.windowAttributes;\n      this.window = window.open(url, name, windowAttributes);\n      debug('opening window', this.window, url, name, windowAttributes);\n      this.bindWindowCloseListener();\n    }\n    /**\n     * Creates a new iframe\n     *\n     * @private\n     */\n\n  }, {\n    key: \"createIFrame\",\n    value: function createIFrame() {\n      var container = this.container,\n          url = this.url;\n      var iframe = document.createElement('iframe');\n\n      if (!(container instanceof HTMLElement)) {\n        throw new Error(\"Invalid container. Expected HTMLElement, got \".concat(_typeof(container)));\n      }\n\n      iframe.src = url;\n      iframe.setAttribute('allowtransparency', 'true');\n      iframe.setAttribute('border', '0');\n      iframe.setAttribute('frameborder', '0');\n      iframe.setAttribute('scrolling', 'no');\n      iframe.setAttribute('style', 'background: transparent; width: 100%; height: 100%;');\n      container.appendChild(iframe);\n      this.iframe = iframe;\n      debug('created iframe and attached to', container);\n    }\n    /**\n     * Destroys the frame\n     *  - closes the window or removes the iframe\n     *  - removes listeners\n     *  - instructs instance to remove any existing relay\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var iframe = this.iframe,\n          frameWindow = this.window;\n\n      if (iframe) {\n        var parentElement = iframe.parentElement;\n        if (parentElement) parentElement.removeChild(iframe);\n        delete this.iframe;\n      } else if (frameWindow) {\n        if (frameWindow.close) frameWindow.close();\n        this.removeWindowCloseListener();\n      }\n\n      this.off();\n      this.removeRelay();\n    }\n    /**\n     * Removes any existing relay\n     *\n     * @private\n     */\n\n  }, {\n    key: \"removeRelay\",\n    value: function removeRelay() {\n      if (!this.relay) return;\n      if (!window.document.body.contains(this.relay)) return;\n      window.document.body.removeChild(this.relay);\n    }\n  }, {\n    key: \"bindWindowCloseListener\",\n    value: function bindWindowCloseListener() {\n      var _this4 = this;\n\n      var tick = this.windowCloseListenerTick = setInterval(function () {\n        if (!_this4.window) {\n          return clearInterval(tick);\n        }\n\n        if (_this4.window.closed) {\n          debug('detected frame window closure. Destroying.', _this4.window);\n\n          _this4.emit('close');\n\n          _this4.destroy();\n        }\n      }, 1000);\n    }\n  }, {\n    key: \"removeWindowCloseListener\",\n    value: function removeWindowCloseListener() {\n      var tick = this.windowCloseListenerTick;\n      if (tick) clearInterval(tick);\n    }\n  }]);\n\n  return Frame;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_1___default.a);\n/**\n * Calculates the center position given screen and window dimensions\n *\n * @param {Number} outer\n * @param {Number} inner\n * @param {Number} offset\n *\n * @return {Number} center position\n */\n\n_defineProperty(Frame, \"TYPES\", {\n  WINDOW: 0,\n  IFRAME: 1\n});\n\n_defineProperty(Frame, \"DEFAULTS\", {\n  height: 535,\n  width: 450,\n  type: Frame.TYPES.WINDOW\n});\n\nfunction center(outer, inner, offset) {\n  return (outer - inner) / 2 + offset;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/frame.js?");

/***/ }),

/***/ "./lib/recurly/fraud.js":
/*!******************************!*\
  !*** ./lib/recurly/fraud.js ***!
  \******************************/
/*! exports provided: Fraud */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Fraud\", function() { return Fraud; });\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/dom */ \"./lib/util/dom.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_util_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:fraud');\n\nvar Fraud = /*#__PURE__*/function (_Emitter) {\n  _inherits(Fraud, _Emitter);\n\n  var _super = _createSuper(Fraud);\n\n  function Fraud(recurly) {\n    var _this;\n\n    _classCallCheck(this, Fraud);\n\n    _this = _super.call(this);\n    _this.recurly = recurly;\n    _this.dataCollectorInitiated = false;\n    _this.attachedNodes = [];\n\n    if (_this.shouldCollectData) {\n      recurly.ready(_this.attachDataCollector.bind(_assertThisInitialized(_this)));\n    }\n\n    return _this;\n  }\n\n  _createClass(Fraud, [{\n    key: \"shouldCollectData\",\n    get: function get() {\n      return !!this.recurly.config.fraud.kount.dataCollector;\n    }\n    /**\n     * gets the fraud params present including injected form fields\n     * as well as grabbing litle session id if configured\n     */\n\n  }, {\n    key: \"params\",\n    value: function params(data) {\n      var fraudConfig = this.recurly.config.fraud;\n      var fraudParams = [];\n\n      if (fraudConfig.kount.dataCollector && data.fraud_session_id) {\n        fraudParams.push({\n          processor: 'kount',\n          session_id: data.fraud_session_id\n        });\n      }\n\n      if (fraudConfig.litle.sessionId) {\n        fraudParams.push({\n          processor: 'litle_threat_metrix',\n          session_id: fraudConfig.litle.sessionId\n        });\n      }\n\n      if (fraudConfig.braintree.deviceData) {\n        fraudParams.push({\n          processor: 'braintree',\n          session_id: fraudConfig.braintree.deviceData\n        });\n      }\n\n      return fraudParams;\n    }\n    /**\n     * requests the data collector form fields from the\n     * Recurly server and injects them into the payment form\n     */\n\n  }, {\n    key: \"attachDataCollector\",\n    value: function attachDataCollector() {\n      var _this2 = this;\n\n      if (this.dataCollectorInitiated) return;\n      this.dataCollectorInitiated = true;\n      this.recurly.request.get({\n        route: '/risk/info',\n        done: function done(error, response) {\n          debug('risk info', error, response);\n\n          if (error) {\n            return _this2.emit('error', Object(_errors__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('fraud-data-collector-request-failed', {\n              error: error\n            }));\n          }\n\n          var profiles = response.profiles;\n          profiles.forEach(function (profile) {\n            var processor = profile.processor,\n                params = profile.params;\n\n            if (processor === 'kount') {\n              var configuredForm = _this2.recurly.config.fraud.kount.form;\n              var scriptElement = document.createElement('script');\n              var initializerElement = document.createElement('div');\n              var sessionIdInputElement = _util_dom__WEBPACK_IMPORTED_MODULE_2___default.a.createHiddenInput({\n                'data-recurly': 'fraud_session_id',\n                'value': params.session_id\n              });\n\n              var initialize = function initialize() {\n                if (!window.ka) {\n                  return _this2.emit('error', Object(_errors__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('fraud-data-collector-request-failed', {\n                    error: 'Kount SDK failed to load.'\n                  }));\n                } // eslint-disable-next-line no-undef\n\n\n                var client = new ka.ClientSDK();\n                client.autoLoadEvents();\n              };\n\n              scriptElement.setAttribute('src', params.script_url);\n              scriptElement.onload = initialize;\n              initializerElement.className = 'kaxsdc';\n              initializerElement.setAttribute('data-event', 'load');\n\n              var form = _util_dom__WEBPACK_IMPORTED_MODULE_2___default.a.element(configuredForm) || _this2.getHostedFieldParentForm();\n\n              if (form) {\n                var nodes = [sessionIdInputElement, scriptElement, initializerElement];\n                nodes.forEach(function (node) {\n                  return form.appendChild(node);\n                });\n                _this2.attachedNodes = nodes;\n              }\n\n              _this2.emit('ready');\n            }\n          });\n        }\n      });\n    }\n    /**\n     * Attempts to discover a form element using the assumed configuration of\n     * hosted fields as a basis for DOM tree upward traversal\n     *\n     * @return {HTMLFormElement}\n     * @throws {RecurlyError} if a form cannot be discovered\n     */\n\n  }, {\n    key: \"getHostedFieldParentForm\",\n    value: function getHostedFieldParentForm() {\n      if (this._form) return this._form;\n      var fields = this.recurly.config.fields;\n      var selectors = Object.keys(fields).map(function (name) {\n        return fields[name].selector;\n      }).filter(Boolean);\n      var form;\n      component_find__WEBPACK_IMPORTED_MODULE_0___default()(selectors, function (selector) {\n        var node = _util_dom__WEBPACK_IMPORTED_MODULE_2___default.a.findNodeInParents(window.document.querySelector(selector), 'form');\n        if (_util_dom__WEBPACK_IMPORTED_MODULE_2___default.a.element(node)) form = node;\n      });\n\n      if (form) {\n        return this._form = form;\n      } else {\n        var missingFormError = Object(_errors__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('fraud-data-collector-missing-form', {\n          selectors: selectors\n        });\n        this.emit('error', missingFormError);\n      }\n    }\n    /**\n     * Removes any attached data collectors\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.attachedNodes.forEach(function (node) {\n        if (!node.parentElement) return;\n        node.parentElement.removeChild(node);\n      });\n    }\n  }]);\n\n  return Fraud;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_1___default.a);\n\n//# sourceURL=webpack://recurly/./lib/recurly/fraud.js?");

/***/ }),

/***/ "./lib/recurly/gift-card.js":
/*!**********************************!*\
  !*** ./lib/recurly/gift-card.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return giftCard; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:giftcard');\n/**\n * giftCard\n *\n * Retrieves giftCard pricing info based on a redemption code. The `callback` signature\n * is `err, gift_card` where `err` may be a request or server error and `gift_card` is\n * giftcard pricing data.\n *\n * @param {Object} options\n * @param {String} options.code Gift card redemption code\n * @param {Function} callback\n */\n\n\nfunction giftCard(options, done) {\n  debug('%j', options);\n\n  if (typeof done !== 'function') {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('missing-callback');\n  }\n\n  if (_typeof(options) !== 'object') {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('invalid-options');\n  } // DEPRECATED: 'options.giftcard'\n\n\n  var code = options.code || options.giftcard;\n\n  if (!code) {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('invalid-option', {\n      name: 'code',\n      expect: 'a String'\n    });\n  }\n\n  var route = \"/gift_cards/\".concat(code);\n  this.request.get({\n    route: route,\n    data: options,\n    done: done\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/gift-card.js?");

/***/ }),

/***/ "./lib/recurly/hosted-field.js":
/*!*************************************!*\
  !*** ./lib/recurly/hosted-field.js ***!
  \*************************************/
/*! exports provided: HostedField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HostedField\", function() { return HostedField; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-clone */ \"./node_modules/component-clone/index.js\");\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_clone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/dom */ \"./lib/util/dom.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_util_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\nvar bowser = __webpack_require__(/*! bowser */ \"./node_modules/bowser/src/bowser.js\");\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:hostedField');\n/**\n * HostedField\n *\n * @constructor\n * @param {Object} options\n * @param {String} options.selector target selector\n * @private\n */\n\n\nvar HostedField = /*#__PURE__*/function (_Emitter) {\n  _inherits(HostedField, _Emitter);\n\n  var _super = _createSuper(HostedField);\n\n  function HostedField(options) {\n    var _this;\n\n    _classCallCheck(this, HostedField);\n\n    _this = _super.call(this);\n    _this.onReady = _this.onReady.bind(_assertThisInitialized(_this));\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_this));\n    _this.onConfigure = _this.onConfigure.bind(_assertThisInitialized(_this));\n    _this.onStateChange = _this.onStateChange.bind(_assertThisInitialized(_this));\n    _this.focus = _this.focus.bind(_assertThisInitialized(_this));\n    _this.destroy = _this.destroy.bind(_assertThisInitialized(_this));\n    _this.ready = false;\n    _this.state = {};\n\n    _this.configure(options);\n\n    _this.inject();\n\n    _this.bindDeferredFocus();\n\n    _this.on('bus:added', function (bus) {\n      _this.bus = bus;\n\n      _this.bus.add(_this.window);\n    });\n\n    _this.on('hostedField:ready', _this.onReady);\n\n    _this.on('hostedField:change', _this.onChange);\n\n    _this.on('hostedField:configure', _this.onConfigure);\n\n    _this.on('hostedField:state:change', _this.onStateChange);\n\n    _this.once('destroy', _this.destroy);\n\n    return _this;\n  }\n\n  _createClass(HostedField, [{\n    key: \"type\",\n    get: function get() {\n      return this.config.type;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return 'https://cyberxander90.github.io/testing-recurly/field.html';\n    }\n  }, {\n    key: \"classList\",\n    get: function get() {\n      var prefix = 'recurly-hosted-field';\n      var classes = [prefix];\n\n      if (this.ready) {\n        classes.push(\"\".concat(prefix, \"-\").concat(this.config.type));\n\n        if (this.state.focus) {\n          classes.push(\"\".concat(prefix, \"-focus\"));\n          classes.push(\"\".concat(prefix, \"-\").concat(this.config.type, \"-focus\"));\n        }\n\n        if (this.state.valid) {\n          classes.push(\"\".concat(prefix, \"-valid\"));\n          classes.push(\"\".concat(prefix, \"-\").concat(this.config.type, \"-valid\"));\n        } else if (!this.state.focus && !this.state.empty) {\n          classes.push(\"\".concat(prefix, \"-invalid\"));\n          classes.push(\"\".concat(prefix, \"-\").concat(this.config.type, \"-invalid\"));\n        }\n      }\n\n      return classes.join(' ');\n    }\n  }, {\n    key: \"tabIndex\",\n    get: function get() {\n      var tabIndex = parseInt(this.config.tabIndex, 10);\n      return isNaN(tabIndex) ? 0 : tabIndex;\n    }\n    /**\n     * Checks that the elements necessary to display the hostedField are in the document.body\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"integrityCheck\",\n    value: function integrityCheck() {\n      var els = [this.target, this.container, this.iframe];\n      var present = document.body.contains.bind(document.body);\n      return !~els.map(present).indexOf(false);\n    } // Private\n\n  }, {\n    key: \"configure\",\n    value: function configure(options) {\n      options = component_clone__WEBPACK_IMPORTED_MODULE_1___default()(options);\n      if (!this.target) this.target = _util_dom__WEBPACK_IMPORTED_MODULE_2___default.a.element(window.document.querySelector(options.selector));\n\n      if (!this.target) {\n        var _options = options,\n            type = _options.type,\n            selector = _options.selector;\n        throw Object(_errors__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('missing-hosted-field-target', {\n          type: type,\n          selector: selector\n        });\n      }\n\n      this.config = options;\n    }\n  }, {\n    key: \"inject\",\n    value: function inject() {\n      this.target.innerHTML = \"\\n      <div class=\\\"\".concat(this.classList, \"\\\">\\n        <iframe\\n          src=\\\"\").concat(this.url, \"\\\"\\n          allowtransparency=\\\"true\\\"\\n          border=\\\"0\\\"\\n          frameborder=\\\"0\\\"\\n          scrolling=\\\"no\\\"\\n          style=\\\"background: transparent; width: 100%; height: 100%;\\\">\\n        </iframe>\\n      </div>\\n    \");\n      this.container = this.target.children[0];\n      this.iframe = this.container.querySelector('iframe');\n      this.window = this.iframe.contentWindow; // Inject mobile tabbing proxy before the iframe\n\n      if (isMobile()) {\n        this.tabbingProxy = _util_dom__WEBPACK_IMPORTED_MODULE_2___default.a.createHiddenInput();\n        this.tabbingProxy.addEventListener('focus', this.focus);\n        this.container.insertBefore(this.tabbingProxy, this.iframe);\n      }\n    }\n    /**\n     * Binds focus on the following elements to the `focus!` event on the hosted field\n     *  - the container element\n     *  - `<label>` elements with a `for` attribute matching the target `id` attribute\n     *\n     * @private\n     */\n\n  }, {\n    key: \"bindDeferredFocus\",\n    value: function bindDeferredFocus() {\n      var _this2 = this;\n\n      this.container.addEventListener('click', this.focus);\n      if (!this.target.id) return;\n      var labels = window.document.querySelectorAll(\"label[for=\".concat(this.target.id, \"]\"));\n      [].slice.apply(labels).forEach(function (label) {\n        label.addEventListener('click', _this2.focus);\n      });\n    }\n    /**\n     * Removes listeners, and clears references\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      debug(\"destroying \".concat(this.type, \" hosted field\"), this);\n      this.off();\n\n      if (this.bus) {\n        this.bus.remove(this.window);\n        this.bus.remove(this);\n      }\n\n      if (this.target) this.target.innerHTML = '';\n      delete this.target;\n      delete this.container;\n      delete this.iframe;\n      delete this.window;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this.container.className = this.classList;\n      this.iframe.setAttribute('tabindex', this.tabIndex);\n    }\n  }, {\n    key: \"onReady\",\n    value: function onReady(body) {\n      if (body.type !== this.type) return;\n      this.ready = true;\n      this.off('hostedField:ready', this.onReady);\n      this.update();\n    }\n  }, {\n    key: \"onStateChange\",\n    value: function onStateChange(body) {\n      if (body.type !== this.type) return;\n\n      var newState = _extends({}, body);\n\n      delete newState.type;\n      this.state = newState;\n      this.update();\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(body) {\n      if (body.type !== this.type) return;\n      this.update();\n    }\n  }, {\n    key: \"onConfigure\",\n    value: function onConfigure(body) {\n      if (body.type !== this.type) return;\n      this.configure(body);\n      this.update();\n    }\n    /**\n     * Places focus on this hosted field\n     */\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (!this.bus) return;\n      this.bus.send(\"hostedField:\".concat(this.type, \":focus!\"));\n    }\n  }]);\n\n  return HostedField;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n/**\n * Determine if user's browser is mobile or non-mobile\n * @return {Boolean} value\n */\n\nfunction isMobile() {\n  return bowser.mobile || bowser.tablet;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/hosted-field.js?");

/***/ }),

/***/ "./lib/recurly/hosted-fields.js":
/*!**************************************!*\
  !*** ./lib/recurly/hosted-fields.js ***!
  \**************************************/
/*! exports provided: FIELD_TYPES, HostedFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FIELD_TYPES\", function() { return FIELD_TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HostedFields\", function() { return HostedFields; });\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-clone */ \"./node_modules/component-clone/index.js\");\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_clone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_deep_assign__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/deep-assign */ \"./lib/util/deep-assign.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tabbable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tabbable */ \"./node_modules/tabbable/index.js\");\n/* harmony import */ var tabbable__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tabbable__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _hosted_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hosted-field */ \"./lib/recurly/hosted-field.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:hostedFields');\n\nvar FIELD_TYPES = ['number', 'month', 'year', 'cvv', 'card'];\n/**\n * HostedFields\n *\n * @constructor\n * @param {Object} options\n * @param {Recurly} options.recurly Associated Recurly instance\n * @public\n */\n\nvar HostedFields = /*#__PURE__*/function (_Emitter) {\n  _inherits(HostedFields, _Emitter);\n\n  var _super = _createSuper(HostedFields);\n\n  function HostedFields(_ref) {\n    var _this;\n\n    var recurly = _ref.recurly;\n\n    _classCallCheck(this, HostedFields);\n\n    _this = _super.call(this);\n    _this.ready = false;\n    _this.state = {};\n    _this.fields = [];\n    _this.errors = [];\n    _this.initQueue = [];\n    _this.recurly = recurly;\n\n    _this.configure(recurly.sanitizedConfig);\n\n    _this.inject();\n\n    _this.on('hostedFields:configure', function (opts) {\n      _this.configure(opts.recurlyConfig);\n\n      _this.fields.forEach(function (field) {\n        if (_this.bus) _this.bus.send('hostedField:configure', _this.fieldConfig(field.type));\n      });\n    });\n\n    _this.on('hostedField:ready', _this.onReady.bind(_assertThisInitialized(_this)));\n\n    _this.on('hostedField:tab:previous', function (message) {\n      return _this.onTab('previous', message);\n    });\n\n    _this.on('hostedField:tab:next', function (message) {\n      return _this.onTab('next', message);\n    });\n\n    _this.on('hostedField:state:change', _this.update.bind(_assertThisInitialized(_this)));\n\n    _this.on('bus:added', function (bus) {\n      _this.bus = bus;\n\n      _this.fields.forEach(function (hf) {\n        return bus.add(hf);\n      });\n    });\n\n    _this.once('destroy', _this.destroy.bind(_assertThisInitialized(_this)));\n\n    return _this;\n  }\n  /**\n   * checks integrity of constituent fields\n   * optionally compares fields configuration with current state for parity\n   *\n   * @param {Object} fields fields configuration to compare against\n   * @return {Boolean} whether all fields are present and receivable\n   */\n\n\n  _createClass(HostedFields, [{\n    key: \"integrityCheck\",\n    value: function integrityCheck(fields) {\n      var _this2 = this;\n\n      if (!this.ready) return false;\n      if (this.fields.length === 0) return false;\n\n      if (fields) {\n        var newSelectors = Object.keys(fields).map(function (key) {\n          return fields[key].selector;\n        }).join('');\n        var currentSelectors = Object.keys(this.config.recurly.fields).map(function (key) {\n          return _this2.config.recurly.fields[key].selector;\n        }).join('');\n        if (newSelectors !== currentSelectors) return false;\n      }\n\n      return !~this.fields.map(function (f) {\n        return f.integrityCheck();\n      }).indexOf(false);\n    } // Private\n\n    /**\n     * Creates HostedField instances\n     *\n     * @private\n     */\n\n  }, {\n    key: \"inject\",\n    value: function inject() {\n      var _this3 = this;\n\n      FIELD_TYPES.forEach(function (type) {\n        try {\n          _this3.fields.push(new _hosted_field__WEBPACK_IMPORTED_MODULE_4__[\"HostedField\"](_this3.fieldConfig(type)));\n\n          _this3.initQueue.push(type);\n        } catch (e) {\n          if (e.name === 'missing-hosted-field-target') {\n            if (~['number', 'month', 'year', 'card'].indexOf(type)) {\n              _this3.errors.push(e);\n            }\n          } else {\n            throw e;\n          }\n        }\n      }); // If we have a card hosted field, clear all missing target errors.\n\n      var cardFieldMissingErrorPresent = this.errors.some(function (e) {\n        return e.type === 'card';\n      });\n\n      if (cardFieldMissingErrorPresent) {\n        // If we are only missing the card field, clear the error\n        var missingFieldErrors = this.errors.filter(function (e) {\n          return e.name === 'missing-hosted-field-target';\n        });\n\n        if (missingFieldErrors.length === 1) {\n          this.errors = this.errors.filter(function (e) {\n            return !(e.name === 'missing-hosted-field-target' && e.type === 'card');\n          });\n        }\n      } else {\n        this.errors = this.errors.filter(function (e) {\n          return e.name !== 'missing-hosted-field-target';\n        });\n      }\n    }\n  }, {\n    key: \"configure\",\n    value: function configure(recurlyConfig) {\n      this.config = {\n        recurly: component_clone__WEBPACK_IMPORTED_MODULE_0___default()(recurlyConfig || {})\n      };\n    }\n    /**\n     * Removes listeners and external references\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      debug('destroying HostedFields');\n      this.off();\n      this.ready = false;\n      this.fields.forEach(function (field) {\n        return field.destroy();\n      });\n      if (this.bus) this.bus.remove(this);\n      this.fields = [];\n      this.errors = [];\n      this.initQueue = [];\n      delete this.recurly;\n    }\n  }, {\n    key: \"onReady\",\n    value: function onReady(body) {\n      var pos = this.initQueue.indexOf(body.type);\n      if (~pos) this.initQueue.splice(pos, 1);\n\n      if (this.initQueue.length === 0) {\n        this.off('hostedField:ready', this.onReady);\n        this.bus.send('hostedFields:ready');\n        this.ready = true;\n      }\n\n      this.update(body);\n    }\n  }, {\n    key: \"onTab\",\n    value: function onTab(direction, message) {\n      var origin = this.getFieldByType(message.type);\n      if (!(origin instanceof _hosted_field__WEBPACK_IMPORTED_MODULE_4__[\"HostedField\"])) return; // Find the origin within the tabbable list, and focus in our intended direction\n\n      var tabbableItems = this.tabbableItems();\n      var pos = tabbableItems.indexOf(origin.tabbingProxy);\n      var destination = direction === 'previous' ? tabbableItems[pos - 1] : tabbableItems[pos + 1];\n      if (destination) destination.focus();\n    }\n    /**\n     * Provides an Array of tabbable Elements in the document body,\n     * excluding those which correspond to hosted field iframes\n     * @return {Array} Elements\n     */\n\n  }, {\n    key: \"tabbableItems\",\n    value: function tabbableItems() {\n      var fieldFrames = this.fields.map(function (f) {\n        return f.iframe;\n      });\n      return tabbable__WEBPACK_IMPORTED_MODULE_3___default()(window.document.body).filter(function (el) {\n        return !~fieldFrames.indexOf(el);\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update(body) {\n      var newState = _extends({}, body);\n\n      delete newState.type;\n      this.state[body.type] = newState;\n      if (!this.ready) return;\n      this.bus.send('hostedFields:state:change', this.state);\n    }\n  }, {\n    key: \"fieldConfig\",\n    value: function fieldConfig(type) {\n      var fields = this.config.recurly.fields;\n      var field = fields[type];\n      var busGroupId = this.recurly.bus.groupId;\n      var _this$config = this.config,\n          deviceId = _this$config.deviceId,\n          sessionId = _this$config.sessionId;\n      var displayIcon = field.displayIcon,\n          inputType = field.inputType,\n          selector = field.selector;\n      if (!fields[type]) return;\n      return {\n        type: type,\n        deviceId: deviceId,\n        sessionId: sessionId,\n        busGroupId: busGroupId,\n        displayIcon: displayIcon,\n        inputType: inputType,\n        selector: selector,\n        format: typeof field.format === 'boolean' ? field.format : fields.all.format,\n        recurly: this.config.recurly,\n        style: Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, fields.all.style, field.style),\n        tabIndex: typeof fields.all.tabIndex === 'number' ? fields.all.tabIndex : field.tabIndex\n      };\n    }\n  }, {\n    key: \"getFieldByType\",\n    value: function getFieldByType(type) {\n      return this.fields.filter(function (f) {\n        return f.config.type === type;\n      })[0];\n    }\n  }]);\n\n  return HostedFields;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_2___default.a);\n\n//# sourceURL=webpack://recurly/./lib/recurly/hosted-fields.js?");

/***/ }),

/***/ "./lib/recurly/item.js":
/*!*****************************!*\
  !*** ./lib/recurly/item.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return item; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:item');\n/**\n * Item\n *\n * Retrieves item pricing info based on an item code.\n *\n * @param {Object} options\n * @param {String} options.itemCode\n * @return {Promise}\n */\n\n\nfunction item() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      itemCode = _ref.itemCode;\n\n  debug(itemCode);\n\n  if (typeof itemCode !== 'string') {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('invalid-option', {\n      name: 'itemCode',\n      expect: 'a String'\n    });\n  }\n\n  return this.request.get({\n    route: \"/items/\".concat(itemCode),\n    cached: true\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/item.js?");

/***/ }),

/***/ "./lib/recurly/message.js":
/*!********************************!*\
  !*** ./lib/recurly/message.js ***!
  \********************************/
/*! exports provided: Message */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Message\", function() { return Message; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n// eslint-disable-next-line\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:message');\n/**\n * Message\n *\n * @param {String|Message|MessageEvent} event message event name or Message or MessageEvent\n * @param {Object} body message contents\n */\n\n\nvar Message = /*#__PURE__*/function () {\n  function Message(event) {\n    var body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var groupId = arguments.length > 2 ? arguments[2] : undefined;\n\n    _classCallCheck(this, Message);\n\n    if (event instanceof Message) return event;\n    this.event = event;\n    this.body = body;\n    this.groupId = groupId;\n  }\n  /**\n   * Creates a message from a window.MessageEvent\n   *\n   * @param  {MessageEvent} messageEvent\n   * @return {Message}\n   */\n\n\n  _createClass(Message, null, [{\n    key: \"createFromMessageEvent\",\n    value: function createFromMessageEvent(messageEvent) {\n      var debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : debug;\n      var data = messageEvent.data; // Parse a MessageEvent which originates from a relay\n\n      if (typeof data === 'string') {\n        debug('attempting to parse a relay-like message', data);\n        data = dataFromRelayMessageEvent(messageEvent, debug);\n      }\n\n      if (!data) return;\n      return new Message(data.event, data.body, data.groupId);\n    }\n  }]);\n\n  return Message;\n}();\n/**\n * Parses a messageEvent coming from a Frame relay\n *\n * NOTE: groupId is not handled because Frames subscribe to unique topics\n *\n * @param  {String} data message data as a JSON string\n * @return {Object} parsed message data: { event, body }\n */\n\nfunction dataFromRelayMessageEvent(messageEvent, debug) {\n  var data = messageEvent.data;\n\n  try {\n    data = JSON.parse(data);\n  } catch (e) {\n    debug('failed to parse relay message', e, messageEvent);\n  }\n\n  if (!data) {\n    debug('no data in relay message');\n    return;\n  }\n\n  return {\n    event: data.recurly_event,\n    body: data.recurly_message\n  };\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/message.js?");

/***/ }),

/***/ "./lib/recurly/paypal/index.js":
/*!*************************************!*\
  !*** ./lib/recurly/paypal/index.js ***!
  \*************************************/
/*! exports provided: factory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _strategy_direct__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strategy/direct */ \"./lib/recurly/paypal/strategy/direct.js\");\n/* harmony import */ var _strategy_braintree__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strategy/braintree */ \"./lib/recurly/paypal/strategy/braintree.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:paypal');\n/**\n * PayPal instantiation factory\n *\n * @param {Object} options\n * @return {PayPal}\n */\n\n\nfunction factory(options) {\n  options = _extends({}, options, {\n    recurly: this\n  });\n  return new PayPal(options);\n}\nvar DEFERRED_EVENTS = ['ready', 'token', 'error', 'cancel'];\n/**\n * PayPal strategy interface\n */\n\nvar PayPal = /*#__PURE__*/function (_Emitter) {\n  _inherits(PayPal, _Emitter);\n\n  var _super = _createSuper(PayPal);\n\n  function PayPal(options) {\n    var _this;\n\n    _classCallCheck(this, PayPal);\n\n    _this = _super.call(this);\n    _this.isReady = false;\n    _this.options = options;\n\n    _this.once('ready', function () {\n      return _this.isReady = true;\n    });\n\n    if (options.braintree) {\n      _this.strategy = new _strategy_braintree__WEBPACK_IMPORTED_MODULE_2__[\"BraintreeStrategy\"](options);\n\n      _this.strategy.onFail(_this.fallback.bind(_assertThisInitialized(_this)));\n    } else {\n      _this.strategy = new _strategy_direct__WEBPACK_IMPORTED_MODULE_1__[\"DirectStrategy\"](options);\n    }\n\n    _this.bindStrategy();\n\n    return _this;\n  }\n\n  _createClass(PayPal, [{\n    key: \"ready\",\n    value: function ready(done) {\n      if (this.isReady) done();else this.once('ready', done);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this$strategy;\n\n      return (_this$strategy = this.strategy).start.apply(_this$strategy, arguments);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var strategy = this.strategy;\n\n      if (strategy) {\n        strategy.destroy();\n        delete this.strategy;\n      }\n\n      this.off();\n    }\n    /**\n     * Handles strategy failure scenario\n     *\n     * @private\n     */\n\n  }, {\n    key: \"fallback\",\n    value: function fallback() {\n      var _this2 = this;\n\n      debug('Initializing strategy fallback');\n\n      var strategyOptions = _extends({}, this.options);\n\n      delete strategyOptions.braintree;\n      this.strategy = new _strategy_direct__WEBPACK_IMPORTED_MODULE_1__[\"DirectStrategy\"](strategyOptions);\n      this.bindStrategy();\n      this.strategy.ready(function () {\n        return _this2.emit('ready');\n      });\n    }\n    /**\n     * Binds external interface events to those on the strategy\n     *\n     * @private\n     */\n\n  }, {\n    key: \"bindStrategy\",\n    value: function bindStrategy() {\n      var _this3 = this;\n\n      DEFERRED_EVENTS.forEach(function (ev) {\n        return _this3.strategy.on(ev, _this3.emit.bind(_this3, ev));\n      });\n    }\n  }]);\n\n  return PayPal;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n//# sourceURL=webpack://recurly/./lib/recurly/paypal/index.js?");

/***/ }),

/***/ "./lib/recurly/paypal/strategy/braintree.js":
/*!**************************************************!*\
  !*** ./lib/recurly/paypal/strategy/braintree.js ***!
  \**************************************************/
/*! exports provided: BRAINTREE_CLIENT_VERSION, BraintreeStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BRAINTREE_CLIENT_VERSION\", function() { return BRAINTREE_CLIENT_VERSION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BraintreeStrategy\", function() { return BraintreeStrategy; });\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! load-script */ \"./node_modules/load-script/index.js\");\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(load_script__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_after__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../util/after */ \"./lib/util/after.js\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./lib/recurly/paypal/strategy/index.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:paypal:strategy:braintree');\n\nvar BRAINTREE_CLIENT_VERSION = '3.76.0';\n/**\n * Braintree-specific PayPal handler\n */\n\nvar BraintreeStrategy = /*#__PURE__*/function (_PayPalStrategy) {\n  _inherits(BraintreeStrategy, _PayPalStrategy);\n\n  var _super = _createSuper(BraintreeStrategy);\n\n  function BraintreeStrategy() {\n    var _this;\n\n    _classCallCheck(this, BraintreeStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.load();\n\n    return _this;\n  }\n\n  _createClass(BraintreeStrategy, [{\n    key: \"configure\",\n    value: function configure(options) {\n      _get(_getPrototypeOf(BraintreeStrategy.prototype), \"configure\", this).call(this, options);\n\n      if (!options.braintree || !options.braintree.clientAuthorization) {\n        throw this.error('paypal-config-missing', {\n          opt: 'braintree.clientAuthorization'\n        });\n      }\n\n      this.config.clientAuthorization = options.braintree.clientAuthorization;\n    }\n    /**\n     * Loads Braintree client and modules\n     *\n     * @todo semver client detection\n     */\n\n  }, {\n    key: \"load\",\n    value: function load() {\n      var _this2 = this;\n\n      debug('loading Braintree libraries');\n      var part = Object(_util_after__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(2, function () {\n        return _this2.initialize();\n      });\n\n      var get = function get(lib) {\n        var done = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var uri = \"https://js.braintreegateway.com/web/\".concat(BRAINTREE_CLIENT_VERSION, \"/js/\").concat(lib, \".min.js\");\n        load_script__WEBPACK_IMPORTED_MODULE_0___default()(uri, function (error) {\n          if (error) _this2.error('paypal-load-error', {\n            cause: error\n          });else done();\n        });\n      };\n\n      var modules = function modules() {\n        if (_this2.braintreeClientAvailable('paypal')) part();else get('paypal', part);\n        if (_this2.braintreeClientAvailable('dataCollector')) part();else get('data-collector', part);\n      };\n\n      if (this.braintreeClientAvailable()) modules();else get('client', modules);\n    }\n    /**\n     * Initializes a Braintree client, device data collection module, and paypal client\n     */\n\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this3 = this;\n\n      debug('Initializing Braintree client');\n      var authorization = this.config.clientAuthorization;\n      var braintree = window.braintree;\n      braintree.client.create({\n        authorization: authorization\n      }, function (error, client) {\n        if (error) return _this3.fail('paypal-braintree-api-error', {\n          cause: error\n        });\n        debug('Braintree client created');\n        braintree.dataCollector.create({\n          client: client,\n          paypal: true\n        }, function (error, collector) {\n          if (error) return _this3.fail('paypal-braintree-api-error', {\n            cause: error\n          });\n          debug('Device data collector created');\n          _this3.deviceFingerprint = collector.deviceData;\n          braintree.paypal.create({\n            client: client\n          }, function (error, paypal) {\n            if (error) return _this3.fail('paypal-braintree-api-error', {\n              cause: error\n            });\n            debug('PayPal client created');\n            _this3.paypal = paypal;\n\n            _this3.emit('ready');\n          });\n        });\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this4 = this;\n\n      var tokenOpts = _extends({}, this.config.display, {\n        flow: 'vault'\n      }); // Tokenize with Braintree\n\n\n      var _this$paypal$tokenize = this.paypal.tokenize(tokenOpts, function (error, payload) {\n        if (error) {\n          if (error.code === 'PAYPAL_POPUP_CLOSED') return _this4.emit('cancel');\n          return _this4.error('paypal-braintree-tokenize-braintree-error', {\n            cause: error\n          });\n        }\n\n        debug('Token payload received', payload);\n\n        if (_this4.deviceFingerprint) {\n          payload.deviceFingerprint = _this4.deviceFingerprint;\n        } // Tokenize with Recurly\n\n\n        // Tokenize with Recurly\n        _this4.recurly.request.post({\n          route: '/paypal/token',\n          data: {\n            type: 'braintree',\n            payload: payload\n          },\n          done: function done(error, token) {\n            if (error) return _this4.error('paypal-braintree-tokenize-recurly-error', {\n              cause: error\n            });\n\n            _this4.emit('token', token);\n          }\n        });\n      }),\n          close = _this$paypal$tokenize.close;\n\n      this.close = close;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.close) {\n        this.close();\n      }\n\n      this.off();\n    }\n  }, {\n    key: \"braintreeClientAvailable\",\n    value: function braintreeClientAvailable(module) {\n      var bt = window.braintree;\n      return bt && bt.client && bt.client.VERSION === BRAINTREE_CLIENT_VERSION && (module ? module in bt : true);\n    }\n  }]);\n\n  return BraintreeStrategy;\n}(_index__WEBPACK_IMPORTED_MODULE_2__[\"PayPalStrategy\"]);\n\n//# sourceURL=webpack://recurly/./lib/recurly/paypal/strategy/braintree.js?");

/***/ }),

/***/ "./lib/recurly/paypal/strategy/direct.js":
/*!***********************************************!*\
  !*** ./lib/recurly/paypal/strategy/direct.js ***!
  \***********************************************/
/*! exports provided: DirectStrategy, deprecated */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DirectStrategy\", function() { return DirectStrategy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deprecated\", function() { return deprecated; });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./lib/recurly/paypal/strategy/index.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:paypal:strategy:direct');\n/**\n * Direct PayPal Express Checkout strategy\n */\n\n\nvar DirectStrategy = /*#__PURE__*/function (_PayPalStrategy) {\n  _inherits(DirectStrategy, _PayPalStrategy);\n\n  var _super = _createSuper(DirectStrategy);\n\n  function DirectStrategy() {\n    var _this;\n\n    _classCallCheck(this, DirectStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.emit('ready');\n\n    return _this;\n  }\n\n  _createClass(DirectStrategy, [{\n    key: \"payload\",\n    get: function get() {\n      var payload = {\n        description: this.config.display.displayName\n      };\n      if (this.config.display.amount) payload.amount = this.config.display.amount;\n      if (this.config.display.logoImageUrl) payload.logoImageUrl = this.config.display.logoImageUrl;\n      if (this.config.display.headerImageUrl) payload.headerImageUrl = this.config.display.headerImageUrl;\n      return payload;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      var payload = this.payload;\n      var frame = this.frame = this.recurly.Frame({\n        path: '/paypal/start',\n        payload: payload\n      });\n      frame.once('done', function (token) {\n        return _this2.emit('token', token);\n      });\n      frame.once('close', function () {\n        return _this2.emit('cancel');\n      });\n      frame.once('error', function (cause) {\n        if (cause.code === 'paypal-cancel') _this2.emit('cancel');\n\n        _this2.error('paypal-tokenize-error', {\n          cause: cause\n        });\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.frame) {\n        this.frame.destroy();\n      }\n\n      this.off();\n    }\n  }]);\n\n  return DirectStrategy;\n}(_index__WEBPACK_IMPORTED_MODULE_0__[\"PayPalStrategy\"]);\n/**\n * Deprecated Paypal method\n *\n * @deprecated\n * @param {Object} payload\n * @param {String} payload.description - transaction description\n * @param {Function} done callback\n */\n\nfunction deprecated(payload, done) {\n  debug('start');\n  var frame = this.Frame({\n    path: '/paypal/start',\n    payload: payload\n  });\n  frame.once('error', function (error) {\n    return done(error);\n  });\n  frame.once('done', function (token) {\n    return done(null, token);\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/paypal/strategy/direct.js?");

/***/ }),

/***/ "./lib/recurly/paypal/strategy/index.js":
/*!**********************************************!*\
  !*** ./lib/recurly/paypal/strategy/index.js ***!
  \**********************************************/
/*! exports provided: PayPalStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PayPalStrategy\", function() { return PayPalStrategy; });\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.pick */ \"./node_modules/lodash.pick/index.js\");\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _recurly__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../recurly */ \"./lib/recurly.js\");\n/* harmony import */ var _pricing__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../pricing */ \"./lib/recurly/pricing/index.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:paypal:strategy');\n\nvar DISPLAY_OPTIONS = ['amount', 'currency', 'displayName', 'locale', 'enableShippingAddress', 'shippingAddressOverride', 'shippingAddressEditable', 'billingAgreementDescription', 'landingPageType', // Not compatible with Braintree options due to lack of support\n'logoImageUrl', 'headerImageUrl'];\nvar DEFAULTS = {\n  display: {\n    locale: 'en_US'\n  }\n};\n/**\n * PayPal base interface strategy\n *\n * @abstract\n */\n\nvar PayPalStrategy = /*#__PURE__*/function (_Emitter) {\n  _inherits(PayPalStrategy, _Emitter);\n\n  var _super = _createSuper(PayPalStrategy);\n\n  function PayPalStrategy(options) {\n    var _this;\n\n    _classCallCheck(this, PayPalStrategy);\n\n    _this = _super.call(this);\n    _this.isReady = false;\n    _this.config = {};\n\n    _this.once('ready', function () {\n      return _this.isReady = true;\n    });\n\n    _this.configure(options);\n\n    return _this;\n  }\n\n  _createClass(PayPalStrategy, [{\n    key: \"ready\",\n    value: function ready(done) {\n      if (this.isReady) done();else this.once('ready', done);\n    }\n  }, {\n    key: \"configure\",\n    value: function configure(options) {\n      var _this2 = this;\n\n      if (!(options.recurly instanceof _recurly__WEBPACK_IMPORTED_MODULE_2__[\"Recurly\"])) throw this.error('paypal-factory-only');\n      this.recurly = options.recurly;\n      this.config.display = {}; // PayPal EC flow display customization\n\n      if (_typeof(options.display) === 'object') {\n        this.config.display = lodash_pick__WEBPACK_IMPORTED_MODULE_0___default()(options.display, DISPLAY_OPTIONS);\n      }\n\n      if (!this.config.display.locale) this.config.display.locale = DEFAULTS.display.locale; // Bind pricing information to display options\n\n      if (options.pricing instanceof _pricing__WEBPACK_IMPORTED_MODULE_3__[\"Pricing\"]) {\n        this.pricing = options.pricing;\n        this.pricing.on('change', function () {\n          return _this2.updatePriceFromPricing();\n        });\n        if (this.pricing.hasPrice) this.updatePriceFromPricing();\n      }\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      debug(\"Method 'initialize' not implemented\");\n    }\n    /**\n     * Starts the PayPal flow\n     * > must be on the call chain with a user interaction (click, touch) on it\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      debug(\"Method 'start' not implemented\");\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.emit('cancel');\n    }\n    /**\n     * Registers or immediately invokes a failure handler\n     *\n     * @param {Function} done Failure handler\n     */\n\n  }, {\n    key: \"onFail\",\n    value: function onFail(done) {\n      if (this.failure) done();else this.once('fail', done);\n    }\n    /**\n     * Logs and announces a failure to initialize a strategy\n     *\n     * @private\n     * @param  {String} reason\n     * @param  {Object} [options]\n     */\n\n  }, {\n    key: \"fail\",\n    value: function fail(reason, options) {\n      if (this.failure) return;\n      debug('Failure scenario encountered', reason, options);\n      var failure = this.failure = this.error(reason, options);\n      this.emit('fail', failure);\n    }\n    /**\n     * Creates and emits a RecurlyError\n     *\n     * @protected\n     * @param  {...Mixed} params to be passed to the Recurlyerror factory\n     * @return {RecurlyError}\n     * @emit 'error'\n     */\n\n  }, {\n    key: \"error\",\n    value: function error() {\n      var err = (arguments.length <= 0 ? undefined : arguments[0]) instanceof Error ? arguments.length <= 0 ? undefined : arguments[0] : _errors__WEBPACK_IMPORTED_MODULE_4__[\"default\"].apply(void 0, arguments);\n      this.emit('error', err);\n      return err;\n    }\n    /**\n     * Updates price information from a Pricing instance\n     *\n     * @private\n     */\n\n  }, {\n    key: \"updatePriceFromPricing\",\n    value: function updatePriceFromPricing() {\n      this.config.display.amount = this.pricing.totalNow;\n      this.config.display.currency = this.pricing.currencyCode;\n    }\n  }]);\n\n  return PayPalStrategy;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_1___default.a);\n\n//# sourceURL=webpack://recurly/./lib/recurly/paypal/strategy/index.js?");

/***/ }),

/***/ "./lib/recurly/plan.js":
/*!*****************************!*\
  !*** ./lib/recurly/plan.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return plan; });\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:plan');\n/**\n * Plan\n *\n * Retrieves information for the `plan`. The `callback` signature\n * is `err, plan` where `err` may be a request or server error, and `plan`\n * is a representation of the requested plan.\n *\n * @param {String} code\n * @param {Function} done callback\n */\n\n\nfunction plan(code, done) {\n  debug('%s', code);\n\n  if (typeof done !== 'function') {\n    throw new Error('Missing callback');\n  }\n\n  if (typeof code === 'undefined' || code === '') {\n    return done(new Error('Missing plan code'));\n  }\n\n  var route = \"/plans/\".concat(code);\n  this.request.get({\n    route: route,\n    cached: true,\n    done: done\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/plan.js?");

/***/ }),

/***/ "./lib/recurly/pricing/checkout/attachment.js":
/*!****************************************************!*\
  !*** ./lib/recurly/pricing/checkout/attachment.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Attachment; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../subscription */ \"./lib/recurly/pricing/subscription/index.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../util/dom */ \"./lib/util/dom.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_util_dom__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _util_flatten__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../util/flatten */ \"./lib/util/flatten.js\");\n/* harmony import */ var _util_group_by__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../util/group-by */ \"./lib/util/group-by.js\");\n/* harmony import */ var _subscription_attachment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../subscription/attachment */ \"./lib/recurly/pricing/subscription/attachment.js\");\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../util/uid */ \"./lib/util/uid.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:pricing:checkout:attachment');\n\nvar INIT_RUN = 'init-all';\n/**\n * Binds a DOM tree to CheckoutPricing values\n *\n * @param {CheckoutPricing} pricing\n * @param {HTMLElement} container Element on which to attach\n */\n\nvar Attachment = /*#__PURE__*/function (_Emitter) {\n  _inherits(Attachment, _Emitter);\n\n  var _super = _createSuper(Attachment);\n\n  function Attachment(pricing, container) {\n    var _this;\n\n    _classCallCheck(this, Attachment);\n\n    _this = _super.call(this);\n    _this.pricing = pricing;\n    _this.recurly = pricing.recurly;\n    _this.container = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.element(container);\n    if (!_this.container) throw new Error('invalid dom element');\n    _this.onInputChange = _this.onInputChange.bind(_assertThisInitialized(_this));\n    _this.updateOutput = _this.updateOutput.bind(_assertThisInitialized(_this));\n\n    _this.pricing.on('change', _this.updateOutput);\n\n    _this.elements.all.forEach(function (elem) {\n      elem.addEventListener('change', _this.onInputChange);\n      elem.addEventListener('propertychange', _this.onInputChange);\n    });\n\n    _this.onInputChange(INIT_RUN);\n\n    return _this;\n  }\n\n  _createClass(Attachment, [{\n    key: \"elements\",\n    get: function get() {\n      if (this._elements) return this._elements;\n      var elements = {\n        all: [].slice.call(this.container.querySelectorAll('[data-recurly]'))\n      };\n      elements.all.forEach(function (node) {\n        var name = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(node, 'recurly');\n        if (!(name in elements)) elements[name] = [];\n        elements[name].push(node);\n      });\n      this._elements = elements;\n      return elements;\n    }\n    /**\n     * Handles input element changes\n     */\n\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(event) {\n      var _this2 = this;\n\n      debug('onInputChange');\n      var elems = this.elements; // Collect subscription properties that are not given a subscription id,\n      // and assign them one, assuming they are all meant to apply to one\n      // subscription\n\n      var orphanedSubscriptionId = Object(_util_uid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n      Object(_util_flatten__WEBPACK_IMPORTED_MODULE_4__[\"default\"])([elems.plan, elems.plan_quantity, elems.addon, elems.tax_code]).forEach(function (el) {\n        if (!el) return;\n        if (_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(el, 'recurlySubscription')) return;\n        _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(el, 'recurlySubscription', orphanedSubscriptionId);\n      }); // Collect subscription elements, grouped by their ids,\n      // then removes elements not paired to a subscription\n\n      var subscriptionGroups = Object(_util_group_by__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(elems.all, function (el) {\n        return _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(el, 'recurlySubscription');\n      });\n      delete subscriptionGroups.undefined; // Remove abandoned subscriptions\n\n      this.pricing.items.subscriptions.forEach(function (sub) {\n        if (!subscriptionGroups[sub.id]) _this2.pricing.remove({\n          subscription: sub\n        });\n      }); // Remove abandoned adjustments\n\n      var adjustmentElemIds = (elems.adjustment || []).map(function (el) {\n        return _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(el, 'recurlyAdjustment');\n      });\n      this.pricing.items.adjustments.forEach(function (adj) {\n        if (!~adjustmentElemIds.indexOf(adj.id)) _this2.pricing.remove({\n          adjustment: adj\n        });\n      }); // Builds a SubscriptionPricing instance per subscription element group\n\n      promise__WEBPACK_IMPORTED_MODULE_1___default.a.all(Object.keys(subscriptionGroups).map(function (id) {\n        var subscriptionElems = Object(_util_group_by__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(subscriptionGroups[id], function (el) {\n          return _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(el, 'recurly');\n        }); // Look for an existing subscription for this code\n\n        var subscription = _this2.pricing.findSubscriptionById(id);\n\n        if (!subscription) {\n          subscription = new _subscription__WEBPACK_IMPORTED_MODULE_2__[\"default\"](_this2.recurly, {\n            id: id\n          });\n\n          _this2.pricing.subscription(subscription);\n        }\n\n        var quantity = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(subscriptionElems.plan_quantity) || 1;\n        return subscription // Plan\n        .plan(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(subscriptionElems.plan), {\n          quantity: quantity\n        }).then(function () {\n          // Add-ons\n          if (!subscriptionElems.addon) return;\n          return promise__WEBPACK_IMPORTED_MODULE_1___default.a.all(subscriptionElems.addon.map(function (addonElem) {\n            var code = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(addonElem, 'recurlyAddon');\n            var addonQuantity = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(addonElem);\n            return subscription.addon(code, {\n              quantity: addonQuantity\n            }).catch(function (e) {\n              return _this2.pricing.error(e);\n            });\n          }));\n        }).then(function () {\n          // Tax code\n          if (!subscriptionElems.tax_code) return;\n          return subscription.tax({\n            tax_code: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(subscriptionElems.tax_code)\n          });\n        }).reprice();\n      })).then(function () {\n        // Adjustments\n        if (!elems.adjustment) return;\n        return promise__WEBPACK_IMPORTED_MODULE_1___default.a.all(elems.adjustment.map(function (adjustmentElem) {\n          var id = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(adjustmentElem, 'recurlyAdjustment');\n          var itemCode = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(adjustmentElem, 'recurlyAdjustmentItemCode');\n          var amount = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(adjustmentElem, 'recurlyAdjustmentAmount');\n          var quantity = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(adjustmentElem) || 0;\n          var currency = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(adjustmentElem, 'recurlyAdjustmentCurrency');\n          var taxCode = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(adjustmentElem, 'recurlyAdjustmentTaxCode');\n          var taxExempt = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(adjustmentElem, 'recurlyAdjustmentTaxExempt');\n          return _this2.pricing.adjustment({\n            id: id,\n            itemCode: itemCode,\n            amount: amount,\n            quantity: quantity,\n            currency: currency,\n            taxCode: taxCode,\n            taxExempt: taxExempt\n          });\n        }));\n      }).then(function () {\n        // Currency\n        if (!elems.currency) return;\n        return _this2.pricing.currency(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.currency));\n      }).then(function () {\n        // Coupon\n        if (!elems.coupon) return;\n        return _this2.pricing.coupon(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.coupon).trim()).then(null, _subscription_attachment__WEBPACK_IMPORTED_MODULE_6__[\"ignoreNotFound\"]);\n      }).then(function () {\n        // Gift card\n        if (!elems.gift_card) return;\n        return _this2.pricing.giftCard(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.gift_card).trim()).then(null, _subscription_attachment__WEBPACK_IMPORTED_MODULE_6__[\"ignoreNotFound\"]);\n      }).then(function () {\n        // Address\n        if (elems.country || elems.postal_code) {\n          return _this2.pricing.address({\n            country: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.country),\n            postal_code: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.postal_code)\n          });\n        }\n      }).then(function () {\n        // Shipping Address\n        if (elems['shipping_address.country'] || elems['shipping_address.postal_code']) {\n          return _this2.pricing.shippingAddress({\n            country: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['shipping_address.country']),\n            postal_code: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['shipping_address.postal_code'])\n          });\n        }\n      }).then(function () {\n        // Taxes\n        var taxParams = {};\n\n        if (elems['tax_amount.now'] || elems['tax_amount.next']) {\n          taxParams.amount = {\n            now: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['tax_amount.now']) || 0,\n            next: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['tax_amount.next']) || 0\n          };\n        }\n\n        if (elems.vat_number) taxParams.vat_number = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.vat_number);\n        return _this2.pricing.tax(taxParams);\n      }).then(function () {\n        return _this2.pricing.reprice();\n      }).then(function () {\n        if (event === INIT_RUN) _this2.emit('ready');\n      }).done();\n    }\n    /**\n     * Updates output elements\n     *\n     * - TODO: Should there be output elements for each item in `price[when].items`?\n     *\n     */\n\n  }, {\n    key: \"updateOutput\",\n    value: function updateOutput(price) {\n      var _this3 = this;\n\n      var elems = this.elements;\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.currency_code, price.currency.code);\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.currency_symbol, price.currency.symbol);\n      ['subscriptions', 'adjustments', 'discount', 'subtotal', 'taxes', 'total'].forEach(function (value) {\n        _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems[value + '_now'], price.now[value]);\n        _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems[value + '_next'], price.next[value]);\n      });\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['gift_card_now'], price.now.giftCard);\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['gift_card_next'], price.next.giftCard);\n\n      if (elems.addon_price) {\n        elems.addon_price.forEach(function (elem) {\n          var subscriptionId = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(elem, 'recurlySubscription');\n\n          var subscription = subscriptionId && _this3.pricing.findSubscriptionById(subscriptionId);\n\n          if (!subscription) return;\n          if (!subscription.isValid) return;\n          var addonPrice = subscription.price.base.addons[_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(elem, 'recurlyAddon')];\n          if (addonPrice) _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elem, addonPrice);\n        });\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      var _this4 = this;\n\n      this.pricing.off('change', this.updateOutput);\n      this.elements.all.forEach(function (elem) {\n        elem.removeEventListener('change', _this4.onInputChange);\n        elem.removeEventListener('propertychange', _this4.onInputChange);\n      });\n    }\n  }]);\n\n  return Attachment;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/checkout/attachment.js?");

/***/ }),

/***/ "./lib/recurly/pricing/checkout/calculations.js":
/*!******************************************************!*\
  !*** ./lib/recurly/pricing/checkout/calculations.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Calculations; });\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-each */ \"./node_modules/component-each/index.js\");\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_each__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_isempty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.isempty */ \"./node_modules/lodash.isempty/index.js\");\n/* harmony import */ var lodash_isempty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isempty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var array_unique__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! array-unique */ \"./node_modules/array-unique/index.js\");\n/* harmony import */ var array_unique__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(array_unique__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _util_decimalize_member__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../util/decimalize-member */ \"./lib/util/decimalize-member.js\");\n/* harmony import */ var _util_group_by__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../util/group-by */ \"./lib/util/group-by.js\");\n/* harmony import */ var _util_tax_round__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../util/tax-round */ \"./lib/util/tax-round.js\");\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\n\n\n/**\n * Checkout pricing calculation handler\n *\n * @param {CheckoutPricing} pricing\n * @constructor\n * @public\n */\n\nvar Calculations = /*#__PURE__*/function () {\n  function Calculations(pricing, done) {\n    var _this = this;\n\n    _classCallCheck(this, Calculations);\n\n    this.pricing = pricing;\n    this.items = pricing.items;\n    this._itemizedSets = {\n      now: {},\n      next: {}\n    };\n    this.price = {\n      now: {\n        items: []\n      },\n      next: {\n        items: []\n      },\n      currency: {\n        code: this.pricing.currencyCode,\n        symbol: this.pricing.currencySymbol\n      },\n      taxes: []\n    }; // TODO: Instead of relying on ordering assumptions, it would be ideal to define each\n    //       calculation's dependencies\n\n    this.subscriptions().then(function () {\n      return _this.adjustments();\n    }).then(function () {\n      return _this.discounts();\n    }).then(function () {\n      return _this.subtotals();\n    }).then(function () {\n      return _this.taxes();\n    }).then(function () {\n      return _this.giftCards();\n    }).then(function () {\n      return _this.totals();\n    }).then(function () {\n      return _this.itemizedSets();\n    }).catch(function (err) {\n      return _this.pricing.error(err);\n    }).done(function () {\n      component_each__WEBPACK_IMPORTED_MODULE_0___default()(_this.price.now, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_4__[\"default\"], _this.price.now);\n      component_each__WEBPACK_IMPORTED_MODULE_0___default()(_this.price.next, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_4__[\"default\"], _this.price.next);\n\n      _this.price.now.items.forEach(function (item) {\n        return component_each__WEBPACK_IMPORTED_MODULE_0___default()(item, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_4__[\"default\"], item);\n      });\n\n      _this.price.next.items.forEach(function (item) {\n        return component_each__WEBPACK_IMPORTED_MODULE_0___default()(item, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_4__[\"default\"], item);\n      });\n\n      done(_this.price);\n    });\n  }\n\n  _createClass(Calculations, [{\n    key: \"validAdjustments\",\n    get: function get() {\n      return this.pricing.validAdjustments;\n    }\n  }, {\n    key: \"validSubscriptions\",\n    get: function get() {\n      return this.pricing.validSubscriptions;\n    }\n  }, {\n    key: \"hasValidSubscriptions\",\n    get: function get() {\n      return this.validSubscriptions.length > 0;\n    }\n  }, {\n    key: \"taxableAdjustments\",\n    get: function get() {\n      return this.validAdjustments.filter(function (adj) {\n        return !adj.taxExempt && adj.amount > 0;\n      });\n    }\n  }, {\n    key: \"taxableSubscriptions\",\n    get: function get() {\n      return this.validSubscriptions.filter(function (sub) {\n        return !sub.items.plan.tax_exempt;\n      });\n    } // includes undefined entries\n\n  }, {\n    key: \"taxCodes\",\n    get: function get() {\n      var taxableItems = this.taxableAdjustments.concat(this.taxableSubscriptions);\n      return array_unique__WEBPACK_IMPORTED_MODULE_3___default()(taxableItems.map(function (item) {\n        return item.taxCode;\n      }));\n    }\n    /**\n     * Subscriptions\n     *\n     * - Subscription subtotaling, derived from valid subs only\n     * - Adds subscriptions to price item set\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"subscriptions\",\n    value: function subscriptions() {\n      var _this2 = this;\n\n      this.price.now.subscriptions = 0;\n      this.price.next.subscriptions = 0;\n      this._itemizedSets.now.subscriptions = [];\n      this._itemizedSets.next.subscriptions = [];\n      this.validSubscriptions.forEach(function (sub) {\n        _this2.price.now.subscriptions += Number(sub.price.now.total);\n        _this2.price.next.subscriptions += Number(sub.price.next.total);\n\n        _this2._itemizedSets.now.subscriptions.push(subscriptionItem('now', sub));\n\n        _this2._itemizedSets.next.subscriptions.push(subscriptionItem('next', sub));\n      });\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n    }\n    /**\n     * Adjustments\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"adjustments\",\n    value: function adjustments() {\n      var _this3 = this;\n\n      this.price.now.adjustments = 0;\n      this.price.next.adjustments = 0; // always zero\n\n      this._itemizedSets.now.adjustments = [];\n      this.validAdjustments.forEach(function (adjustment) {\n        var unitAmount = adjustment.amount,\n            quantity = adjustment.quantity,\n            id = adjustment.id;\n        var amount = unitAmount * quantity;\n        var item = {\n          type: 'adjustment',\n          id: id,\n          amount: amount,\n          quantity: quantity,\n          unitAmount: unitAmount\n        };\n        _this3.price.now.adjustments += amount;\n\n        _this3._itemizedSets.now.adjustments.push(item);\n      });\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n    }\n    /**\n     * Discounts\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"discounts\",\n    value: function discounts() {\n      var _this4 = this;\n\n      var coupon = this.items.coupon;\n      var promise = promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n      this.price.now.discount = 0;\n      this.price.next.discount = 0; // Remove all previously-applied coupons\n\n      this.validSubscriptions.forEach(function (sub) {\n        promise = promise.then(function () {\n          return sub.coupon().reprice(null, {\n            internal: true\n          });\n        });\n      });\n      if (!coupon) return promise;\n\n      if (coupon.discount.type === 'free_trial') {\n        promise = promise.then(function () {\n          return _this4.applyFreeTrialCoupon();\n        });\n      } else {\n        var _this$discountAmounts = this.discountAmounts(),\n            discountNow = _this$discountAmounts.discountNow,\n            discountNext = _this$discountAmounts.discountNext;\n\n        this.price.now.discount = discountNow;\n        this.price.next.discount = discountNext;\n      }\n\n      return promise.then(function () {\n        if (coupon.single_use) _this4.price.next.discount = 0;\n      });\n    }\n    /**\n     * Subtotals\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"subtotals\",\n    value: function subtotals() {\n      var _this$price = this.price,\n          now = _this$price.now,\n          next = _this$price.next;\n      this.price.now.subtotal = now.subscriptions + now.adjustments - now.discount;\n      this.price.next.subtotal = next.subscriptions - next.discount;\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n    }\n    /**\n     * Taxes\n     *\n     * Tax info precedence: `tax` > `shippingAddress` > `address`\n     *\n     * Workflow\n     * - collects tax rates for each tax code and the\n     *   base tax info (country, postal code, vat number)\n     * - applies taxes to each taxable item, according to its tax code\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"taxes\",\n    value: function taxes() {\n      var _this5 = this;\n\n      var taxNow = this.price.now.taxes = 0;\n      var taxNext = this.price.next.taxes = 0; // If tax amount has been specified, simply apply it\n\n      if (this.items.tax && this.items.tax.amount) {\n        this.price.now.taxes = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this.items.tax.amount.now);\n        this.price.next.taxes = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this.items.tax.amount.next);\n        return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n      }\n\n      var taxAddress = this.items.shippingAddress || this.items.address;\n\n      var baseTaxInfo = _extends({}, taxAddress, this.items.tax); // Taxation requires that we at least have base tax information\n\n\n      if (lodash_isempty__WEBPACK_IMPORTED_MODULE_1___default()(baseTaxInfo)) return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n      var getTaxes = promise__WEBPACK_IMPORTED_MODULE_2___default.a.denodeify(this.pricing.recurly.tax.bind(this.pricing.recurly));\n\n      var getTaxesFor = function getTaxesFor(item) {\n        return getTaxes(_extends({}, baseTaxInfo, {\n          taxCode: item.taxCode\n        }));\n      };\n\n      var fixedAmount = function fixedAmount(amt) {\n        return parseFloat(amt.toFixed(6));\n      };\n\n      var taxRates = [];\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.all(this.taxableAdjustments.map(function (adj) {\n        return getTaxesFor(adj).then(function (taxes) {\n          taxRates = taxRates.concat(taxes);\n          taxNow += taxes.reduce(function (sum, tax) {\n            return sum + fixedAmount(adj.amount * adj.quantity * tax.rate);\n          }, 0);\n        });\n      })).then(function () {\n        return promise__WEBPACK_IMPORTED_MODULE_2___default.a.all(_this5.taxableSubscriptions.map(function (sub) {\n          return getTaxesFor(sub).then(function (taxes) {\n            taxRates = taxRates.concat(taxes);\n            taxes.forEach(function (tax) {\n              taxNow += fixedAmount(sub.price.now.subtotal * tax.rate);\n              taxNext += fixedAmount(sub.price.next.subtotal * tax.rate);\n            });\n          });\n        }));\n      }).then(function () {\n        if (!_this5.items.coupon) return;\n\n        var _this5$discountAmount = _this5.discountAmounts({\n          taxExempt: false\n        }),\n            discountNow = _this5$discountAmount.discountNow,\n            discountNext = _this5$discountAmount.discountNext;\n\n        return getTaxes(baseTaxInfo).then(function (taxes) {\n          taxes.forEach(function (tax) {\n            taxNow -= fixedAmount(discountNow * tax.rate);\n            taxNext -= fixedAmount(discountNext * tax.rate);\n          });\n        });\n      }).catch(function (err) {\n        return _this5.pricing.emit('error', err);\n      }).then(function () {\n        // Filter tax rates for uniqueness\n        taxRates = taxRates.map(JSON.stringify).filter(function (taxRate, i, taxRates) {\n          return taxRates.indexOf(taxRate) === i;\n        }).map(JSON.parse);\n        _this5.price.taxes = taxRates;\n        _this5.price.now.taxes = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(taxNow);\n        _this5.price.next.taxes = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(taxNext);\n      });\n    }\n    /**\n     * Gift cards\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"giftCards\",\n    value: function giftCards() {\n      this.price.now.giftCard = 0;\n      this.price.next.giftCard = 0;\n      if (!this.items.giftCard) return;\n      var eligibleNow = this.price.now.subtotal + this.price.now.taxes;\n      var eligibleNext = this.price.next.subtotal + this.price.next.taxes;\n\n      var _useGiftcard = useGiftcard(eligibleNow, this.items.giftCard.unit_amount),\n          cardUsedNow = _useGiftcard.used,\n          cardRemaining = _useGiftcard.remains;\n\n      var _useGiftcard2 = useGiftcard(eligibleNext, cardRemaining),\n          cardUsedNext = _useGiftcard2.used;\n\n      this.price.now.giftCard = cardUsedNow;\n      this.price.next.giftCard = cardUsedNext;\n\n      function useGiftcard(price, giftCardValue) {\n        var used = 0;\n        var remains = 0;\n\n        if (giftCardValue > price) {\n          used = price;\n          remains = giftCardValue - price;\n        } else {\n          used = giftCardValue;\n        }\n\n        return {\n          used: used,\n          remains: remains\n        };\n      }\n\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n    }\n    /**\n     * Totals\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"totals\",\n    value: function totals() {\n      this.price.now.total = this.price.now.subtotal + this.price.now.taxes - this.price.now.giftCard;\n      this.price.next.total = this.price.next.subtotal + this.price.next.taxes - this.price.next.giftCard;\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n    }\n    /**\n     * Creates itemized entires for price.now and price.next\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"itemizedSets\",\n    value: function itemizedSets() {\n      this.price.now.items = this._itemizedSets.now.subscriptions.concat(this._itemizedSets.now.adjustments);\n      this.price.next.items = this._itemizedSets.next.subscriptions;\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n    }\n    /**\n     * Applies a free trial coupon\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"applyFreeTrialCoupon\",\n    value: function applyFreeTrialCoupon() {\n      var _this6 = this;\n\n      var coupon = this.items.coupon;\n      if (!this.hasValidSubscriptions) return promise__WEBPACK_IMPORTED_MODULE_2___default.a.resolve();\n\n      if (coupon.redemption_resource === 'subscription') {\n        return this.mostValuableSubscriptionForFreeTrial().coupon(coupon).reprice(null, {\n          internal: true\n        }).then(function () {\n          return _this6.subscriptions();\n        });\n      }\n\n      return promise__WEBPACK_IMPORTED_MODULE_2___default.a.all(this.validSubscriptions.map(function (s) {\n        return s.coupon(coupon).reprice(null, {\n          internal: true\n        });\n      })).then(function () {\n        return _this6.subscriptions();\n      });\n    }\n    /**\n     * Calculates discount amounts according to rules\n     *\n     * @return {Object} { discountNow, discountNext }\n     */\n\n  }, {\n    key: \"discountAmounts\",\n    value: function discountAmounts() {\n      var coupon = this.items.coupon;\n      var discountNow = 0;\n      var discountNext = 0;\n\n      if (coupon) {\n        if (coupon.discount.type === 'free_trial') {// Amounts are left zero\n        } else if (coupon.discount.rate) {\n          var _this$discountableSub = this.discountableSubtotals(coupon, {\n            setupFees: false\n          }),\n              discountableNow = _this$discountableSub.discountableNow,\n              discountableNext = _this$discountableSub.discountableNext;\n\n          discountNow = roundForDiscount(discountableNow * coupon.discount.rate);\n          discountNext = roundForDiscount(discountableNext * coupon.discount.rate);\n        } else if (coupon.discount.amount) {\n          var _this$discountableSub2 = this.discountableSubtotals(coupon),\n              _discountableNow = _this$discountableSub2.discountableNow,\n              _discountableNext = _this$discountableSub2.discountableNext; // Falls back to zero if the coupon does not support the checkout currency\n\n\n          var discountAmount = coupon.discount.amount[this.items.currency] || 0;\n          discountNow = Math.min(_discountableNow, discountAmount);\n          discountNext = Math.min(_discountableNext, discountAmount);\n        }\n      }\n\n      return {\n        discountNow: discountNow,\n        discountNext: discountNext\n      };\n    }\n    /**\n     * Computes the discountable subtotals for a given coupon\n     *\n     * Workflow\n     *  - Whether coupon applies to adjustments\n     *  - Whether coupon applies to subscriptions\n     *    - Whether coupon is plan-specific or plan-agnostic\n     *    - Whether coupon applies at subcription or account level\n     *    - Whether coupon applies to each subscription\n     *\n     * @param  {Object} coupon\n     * @param  {Object} [options]\n     * @param  {Boolean} [options.setupFees=true] whether to include setup fees\n     * @param  {Boolean} [options.taxExempt=true] whether to include tax exempt items\n     * @return {Object} { discountableNow, discountableNext }\n     */\n\n  }, {\n    key: \"discountableSubtotals\",\n    value: function discountableSubtotals(coupon) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$setupFees = _ref.setupFees,\n          setupFees = _ref$setupFees === void 0 ? true : _ref$setupFees,\n          _ref$taxExempt = _ref.taxExempt,\n          taxExempt = _ref$taxExempt === void 0 ? true : _ref$taxExempt;\n\n      var discountableNow = 0;\n      var discountableNext = 0; // adjustments\n\n      if (coupon.applies_to_non_plan_charges) {\n        if (taxExempt) {\n          discountableNow += this.price.now.adjustments;\n        } else {\n          // Sums of the totals of adjustments that are taxable\n          discountableNow += this.validAdjustments.reduce(function (sum, adj) {\n            return sum + (adj.taxExempt ? 0 : adj.amount * adj.quantity);\n          }, 0);\n        }\n      } // subscriptions\n\n\n      if (coupon.applies_to_plans && this.hasValidSubscriptions) {\n        var discountableSubscriptions; // subscription-level coupons may only apply to one subscription\n\n        if (coupon.redemption_resource === 'subscription') {\n          discountableSubscriptions = [this.mostValuableSubscriptionForDiscount()];\n        } else {\n          discountableSubscriptions = this.validSubscriptions;\n        }\n\n        discountableSubscriptions = filterSubscriptionsForCoupon(discountableSubscriptions, coupon); // add each subscription's discountable amount\n\n        discountableSubscriptions.forEach(function (sub) {\n          if (!taxExempt && sub.taxExempt) return;\n          discountableNow += discountableSubscriptionSubtotal('now', sub, {\n            setupFees: setupFees\n          });\n          discountableNext += discountableSubscriptionSubtotal('next', sub, {\n            setupFees: setupFees\n          });\n        });\n      }\n\n      return {\n        discountableNow: discountableNow,\n        discountableNext: discountableNext\n      };\n    }\n    /**\n     * Finds the subscription with the greatest subtotal\n     *\n     * @param  {Array[SubscriptionPricing]} [subscriptions=this.validSubscriptions]\n     * @return {SubscriptionPricing}\n     */\n\n  }, {\n    key: \"mostValuableSubscriptionForDiscount\",\n    value: function mostValuableSubscriptionForDiscount() {\n      var subscriptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.validSubscriptions;\n      subscriptions = filterSubscriptionsForCoupon(subscriptions, this.items.coupon);\n      return subscriptions.sort(function (a, b) {\n        var subtotalA = parseFloat(a.price.now.subtotal);\n        var subtotalB = parseFloat(b.price.now.subtotal);\n\n        if (subtotalA > subtotalB) {\n          return -1;\n        } else if (subtotalA < subtotalB) {\n          return 1;\n        } else {\n          return 0;\n        }\n      })[0];\n    }\n    /**\n     * Finds the subscription with the longest trial length and greatest subtotal\n     *\n     * @return {subscriptionPricing}\n     */\n\n  }, {\n    key: \"mostValuableSubscriptionForFreeTrial\",\n    value: function mostValuableSubscriptionForFreeTrial() {\n      var subscriptions = filterSubscriptionsForCoupon(this.validSubscriptions, this.items.coupon);\n      var trialSet = Object(_util_group_by__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(subscriptions, trialLength);\n      var longestTrial = Object.keys(trialSet).sort(function (a, b) {\n        return b - a;\n      })[0]; // descending sort\n\n      return this.mostValuableSubscriptionForDiscount(trialSet[longestTrial]);\n    }\n  }]);\n\n  return Calculations;\n}();\n/**\n * Utilities\n */\n\n/**\n * Builds a price.items[{type: 'subscription'}] item\n *\n * @param  {String} when 'now' or 'next'\n * @param  {SubscriptionPricing} subscription\n * @return {Object} item\n */\n\n\n\n\nfunction subscriptionItem(when, subscription) {\n  var id = subscription.id,\n      price = subscription.price;\n  return {\n    type: 'subscription',\n    id: id,\n    amount: price[when].total,\n    setupFee: price[when].setup_fee,\n    addons: price[when].addons,\n    plan: price[when].plan\n  };\n}\n/**\n * Returns a subscription's trial length in seconds\n *\n * @param  {Object} subscription\n * @return {Number} trial length in seconds\n */\n\n\nfunction trialLength(subscription) {\n  if (!subscription.items.plan.trial) return 0;\n  var seconds = {\n    days: 86400,\n    months: 2678400 // 31 days\n\n  }[subscription.items.plan.trial.interval] || 0;\n  return subscription.items.plan.trial.length * seconds;\n}\n/**\n * Returns a subscription's discountable subtotal\n *\n * - plan + addons + discount + setup_fee = subtotal\n * - discountable_subtotal = subtotal + discount - setup_fee\n *\n * @param  {String} when 'now' or 'next'\n * @param  {SubscriptionPricing} subscription\n * @param  {Object} [options]\n * @param  {Boolean} [options.setupFees=true] whether to include setup fees\n * @return {Number} discountable subtotal\n */\n\n\nfunction discountableSubscriptionSubtotal(when, subscription) {\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref2$setupFees = _ref2.setupFees,\n      setupFees = _ref2$setupFees === void 0 ? true : _ref2$setupFees;\n\n  var price = subscription.price[when];\n  var subtotal = parseFloat(price.subtotal) + parseFloat(price.discount);\n  if (!setupFees) subtotal -= parseFloat(price.setup_fee);\n  return subtotal;\n}\n/**\n * Filter subscriptions for which this coupon does not apply\n * @param  {Array[EmbeddedSubscriptionPricing]} subscriptions\n * @param  {Object} coupon\n * @return {Array[EmbeddedSubscriptionPricing]}\n */\n\n\nfunction filterSubscriptionsForCoupon(subscriptions, coupon) {\n  if (subscriptions.length === 0) return subscriptions;\n  if (coupon.applies_to_all_plans) return subscriptions;\n  return subscriptions.filter(function (sub) {\n    return sub.couponIsValidForSubscription(coupon);\n  });\n}\n/**\n * Rounds a Number and sets it to a fixed length\n * @param  {Number} amount\n * @return {Number}\n */\n\n\nfunction roundForDiscount(amount) {\n  return parseFloat((Math.round(amount * 100) / 100).toFixed(6));\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/checkout/calculations.js?");

/***/ }),

/***/ "./lib/recurly/pricing/checkout/index.js":
/*!***********************************************!*\
  !*** ./lib/recurly/pricing/checkout/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CheckoutPricing; });\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-clone */ \"./node_modules/component-clone/index.js\");\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_clone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var intersect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! intersect */ \"./node_modules/intersect/index.js\");\n/* harmony import */ var intersect__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(intersect__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_isempty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash.isempty */ \"./node_modules/lodash.isempty/index.js\");\n/* harmony import */ var lodash_isempty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isempty__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var array_unique__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! array-unique */ \"./node_modules/array-unique/index.js\");\n/* harmony import */ var array_unique__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(array_unique__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../util/uid */ \"./lib/util/uid.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../ */ \"./lib/recurly/pricing/index.js\");\n/* harmony import */ var _promise__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../promise */ \"./lib/recurly/pricing/promise.js\");\n/* harmony import */ var _subscription__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../subscription */ \"./lib/recurly/pricing/subscription/index.js\");\n/* harmony import */ var _subscription_embedded__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../subscription/embedded */ \"./lib/recurly/pricing/subscription/embedded.js\");\n/* harmony import */ var _calculations__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./calculations */ \"./lib/recurly/pricing/checkout/calculations.js\");\n/* harmony import */ var _attachment__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./attachment */ \"./lib/recurly/pricing/checkout/attachment.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:pricing:checkout-pricing');\n/**\n * CheckoutPricing\n *\n * Constructs a pricing model for a checkout purchase. Call methods\n * on an instance to add or remove items from the pricing model, and\n * listen for changes to the price.\n *\n * This class allows you to provide basic details about a checkout purchase,\n * such as plan code, item code, and address, and receive detailed pricing\n * information about the overall purchase, including item costs, tax estimates,\n * complex discounting, and currency changes.\n *\n * Example\n *\n * ```\n * const checkoutPricing = recurly.Pricing.Checkout();\n * checkoutPricing.on('change', price => console.log(price));\n * checkoutPricing\n *   .currency('USD')\n *   .subscription(recurly.Pricing.Subscription().plan('my-plan').done())\n *   .adjustment({ itemCode: 'my-item-code', quantity: 2 })\n *   .address({ country: 'US', postalCode: '94110' })\n *   .coupon('my-coupon-code')\n *   .done();\n * ```\n *\n * @class\n */\n\n\nvar CheckoutPricing = /*#__PURE__*/function (_Pricing) {\n  _inherits(CheckoutPricing, _Pricing);\n\n  var _super = _createSuper(CheckoutPricing);\n\n  function CheckoutPricing() {\n    var _this;\n\n    _classCallCheck(this, CheckoutPricing);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.debug = debug;\n\n    _this.recurly.report('pricing:checkout:create');\n\n    return _this;\n  }\n\n  _createClass(CheckoutPricing, [{\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(CheckoutPricing.prototype), \"reset\", this).call(this);\n\n      this.items.subscriptions = [];\n      this.items.adjustments = [];\n    }\n  }, {\n    key: \"Calculations\",\n    get: function get() {\n      return _calculations__WEBPACK_IMPORTED_MODULE_12__[\"default\"];\n    }\n  }, {\n    key: \"PRICING_METHODS\",\n    get: function get() {\n      return _get(_getPrototypeOf(CheckoutPricing.prototype), \"PRICING_METHODS\", this).concat(['address', 'adjustment', 'coupon', 'currency', 'giftCard', 'shippingAddress', 'subscription', 'tax']);\n    }\n  }, {\n    key: \"validAdjustments\",\n    get: function get() {\n      var _this2 = this;\n\n      return this.items.adjustments.filter(function (adj) {\n        return adj.currency === _this2.items.currency;\n      });\n    }\n  }, {\n    key: \"validSubscriptions\",\n    get: function get() {\n      return this.items.subscriptions.filter(function (sub) {\n        return sub.isValid;\n      });\n    } // Currency codes common to all subscriptions\n\n  }, {\n    key: \"subscriptionCurrencies\",\n    get: function get() {\n      return intersect__WEBPACK_IMPORTED_MODULE_2___default()(this.validSubscriptions.map(function (s) {\n        return Object.keys(s.items.plan.price);\n      }));\n    } // Plan codes of all subscriptions\n\n  }, {\n    key: \"subscriptionPlanCodes\",\n    get: function get() {\n      return array_unique__WEBPACK_IMPORTED_MODULE_5___default()(this.validSubscriptions.map(function (s) {\n        return s.items.plan.code;\n      }));\n    }\n  }, {\n    key: \"findSubscriptionById\",\n    value: function findSubscriptionById(id) {\n      var embeddedSubscription = component_find__WEBPACK_IMPORTED_MODULE_1___default()(this.items.subscriptions, function (esub) {\n        return esub.id === id;\n      });\n      if (embeddedSubscription) return embeddedSubscription.subscription;\n    }\n    /**\n     * Attachment factory\n     *\n     * @param {HTMLElement} container - element on which to attach\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(container) {\n      var _this3 = this;\n\n      if (this.attachment) this.attachment.detach();\n      this.attachment = new _attachment__WEBPACK_IMPORTED_MODULE_13__[\"default\"](this, container);\n      this.attachment.once('ready', function () {\n        return _this3.emit('attached');\n      });\n      return this.attachment;\n    }\n    /**\n     * Updates currency code. Will reject if the subscription plans do not support the given code\n     *\n     * @param {String} code Currency code\n     * @return {PricingPromise}\n     * @public\n     */\n\n  }, {\n    key: \"currency\",\n    value: function currency(code) {\n      var _this4 = this;\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve, reject) {\n        if (_this4.items.currency === code) return resolve(_this4.items.currency);\n\n        if (!_this4.subscriptionsAllowCurrency(code)) {\n          return _this4.error(Object(_errors__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('invalid-currency', {\n            currency: code,\n            allowed: _this4.subscriptionCurrencies\n          }), reject, 'currency');\n        }\n\n        _this4.items.currency = code; // Propagate currency changes to each subscription\n\n        promise__WEBPACK_IMPORTED_MODULE_4___default.a.all(_this4.validSubscriptions.map(function (sub) {\n          debug('checkout currency has changed. Updating subscription', sub);\n          return sub.currency(code).reprice();\n        })) // Eject gift cards on currency change\n        .then(function () {\n          return _this4.giftCard(null);\n        }).then(function () {\n          return _this4.resolveAndEmit('set.currency', code, resolve);\n        });\n      }, this);\n    }\n    /**\n     * Adds a subscription\n     *\n     * - Ignores address and tax info from subscriptions\n     * - Removes subscription discounts\n     *\n     * @param {SubscriptionPricing} subscription\n     * @return {PricingPromise}\n     * @public\n     */\n\n  }, {\n    key: \"subscription\",\n    value: function subscription(_subscription) {\n      var _this5 = this;\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve, reject) {\n        if (!(_subscription instanceof _subscription__WEBPACK_IMPORTED_MODULE_10__[\"default\"])) {\n          return _this5.error(Object(_errors__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('invalid-option', {\n            name: 'subscription',\n            expect: 'a {recurly.Pricing.Subscription}'\n          }), reject, 'subscription');\n        } // Do nothing if we already have this subscription\n\n\n        if (_this5.items.subscriptions.some(function (esub) {\n          return esub.subscription === _subscription;\n        })) {\n          return resolve(_subscription);\n        }\n\n        var plan = _subscription.items.plan; // If the subscription currencies do not match the checkout currency, attempt to resolve it.\n        // If it cannot be resolved, reject the subscription\n\n        if (_this5.items.currency && plan) {\n          var planCurrencies = Object.keys(plan.price);\n\n          if (!~planCurrencies.indexOf(_this5.currencyCode)) {\n            try {\n              _this5.resolveCurrency(planCurrencies);\n            } catch (e) {\n              return _this5.error(Object(_errors__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('invalid-subscription-currency', {\n                checkoutCurrency: _this5.currencyCode,\n                checkoutSupportedCurrencies: _this5.subscriptionCurrencies,\n                subscriptionPlanCurrencies: planCurrencies\n              }), reject, 'currency');\n            }\n          }\n        }\n\n        if (!_this5.items.currency) _this5.currency(_subscription.items.currency);\n\n        var emitSubscriptionSetter = function emitSubscriptionSetter(name) {\n          return function (item) {\n            return _this5.emit(\"set.\".concat(name), _defineProperty({\n              subscription: {\n                id: _subscription.id\n              }\n            }, name, item));\n          };\n        };\n\n        var addSubscription = function addSubscription() {\n          _subscription.on('change:external', function () {\n            return _this5.reprice();\n          });\n\n          _subscription.on('set.plan', emitSubscriptionSetter('plan'));\n\n          _subscription.on('set.addon', emitSubscriptionSetter('addon'));\n\n          _this5.items.subscriptions.push(new _subscription_embedded__WEBPACK_IMPORTED_MODULE_11__[\"default\"](_subscription, _this5));\n\n          _this5.resolveAndEmit('set.subscription', _subscription, resolve, {\n            copy: false\n          });\n        }; // Removes any subscription coupons and gift cards\n\n\n        if (_subscription.isValid) {\n          _subscription.coupon(null).giftcard(null).then(addSubscription);\n        } else {\n          addSubscription();\n        }\n      }, this);\n    }\n    /**\n     * @typedef {Object} CheckoutPricing~Adjustment\n     *\n     * @property {String}  [itemCode] item code reference. If provided,\n     *                                the amount and tax properties will be populated\n     *                                from the given item. an itemCode may not be used to\n     *                                modify an adjustment in-place.\n     * @property {Number}  [amount] in unit price (1.0 for USD, etc)\n     * @property {Number}  [quantity=1] number of units\n     * @property {String}  [id=uid()] unique identifier. Use this value to modify an\n     *                                adjustment in-place\n     * @property {String}  [currency=this.items.currency] currency code\n     * @property {Boolean} [taxExempt=false] whether this adjustment is tax exempt\n     * @property {String}  [taxCode] taxation code\n     */\n\n    /**\n     * Adds a one-time charge or credit a.k.a. adjustment\n     *\n     * @param {CheckoutPricing~Adjustment} adjustment\n     * @return {PricingPromise}\n     * @public\n     */\n\n  }, {\n    key: \"adjustment\",\n    value: function adjustment(_ref) {\n      var _this6 = this;\n\n      var _ref$itemCode = _ref.itemCode,\n          itemCode = _ref$itemCode === void 0 ? null : _ref$itemCode,\n          amount = _ref.amount,\n          quantity = _ref.quantity,\n          _ref$id = _ref.id,\n          id = _ref$id === void 0 ? Object(_util_uid__WEBPACK_IMPORTED_MODULE_6__[\"default\"])() : _ref$id,\n          currency = _ref.currency,\n          taxExempt = _ref.taxExempt,\n          taxCode = _ref.taxCode;\n      var recurly = this.recurly;\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve, reject) {\n        var existingAdjustment = component_find__WEBPACK_IMPORTED_MODULE_1___default()(_this6.items.adjustments, function (a) {\n          return a.id === id;\n        });\n        var validateAmount = true;\n\n        if (itemCode || existingAdjustment && typeof amount === 'undefined') {\n          validateAmount = false;\n        }\n\n        if (validateAmount) {\n          amount = Number(amount);\n\n          if (!isFinite(amount)) {\n            var err = {\n              name: 'amount',\n              expect: 'a finite Number'\n            };\n            return _this6.error(Object(_errors__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('invalid-option', err), reject, 'adjustment');\n          }\n        }\n\n        if (existingAdjustment && existingAdjustment.itemCode && !itemCode) {\n          itemCode = existingAdjustment.itemCode;\n        }\n\n        new promise__WEBPACK_IMPORTED_MODULE_4___default.a(function (resolve, reject) {\n          if (!itemCode) return resolve();\n          return recurly.item({\n            itemCode: itemCode\n          }).then(function (item) {\n            var expectedCurrency = currency || existingAdjustment && existingAdjustment.currency || _this6.items.currency;\n\n            if (typeof amount === 'undefined') {\n              var itemPrice = component_find__WEBPACK_IMPORTED_MODULE_1___default()(item.currencies, function (c) {\n                return c.currency_code === expectedCurrency;\n              });\n\n              if (itemPrice) {\n                amount = itemPrice.unit_amount;\n              } else {\n                return reject(Object(_errors__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('invalid-item-currency', {\n                  itemCode: itemCode,\n                  currency: expectedCurrency\n                }));\n              }\n            }\n\n            taxCode = item.tax_code;\n            taxExempt = item.tax_exempt;\n            resolve();\n          }, reject);\n        }).then(function () {\n          // New adjustment defaults\n          if (!existingAdjustment) {\n            currency = currency || _this6.items.currency;\n            quantity = coerceAdjustmentQuantity(quantity);\n            taxExempt = !!taxExempt;\n          }\n\n          return {\n            amount: amount,\n            quantity: quantity,\n            id: id,\n            currency: currency,\n            taxExempt: taxExempt,\n            taxCode: taxCode,\n            itemCode: itemCode\n          };\n        }).then(function (adjustment) {\n          if (existingAdjustment) {\n            if (typeof amount === 'undefined') delete adjustment.amount;\n            if (typeof currency === 'undefined') delete adjustment.currency;\n\n            if (typeof quantity === 'undefined') {\n              delete adjustment.quantity;\n            } else {\n              quantity = coerceAdjustmentQuantity(quantity);\n            }\n\n            if (existingAdjustment.itemCode || typeof taxCode === 'undefined') {\n              delete adjustment.taxCode;\n            }\n\n            if (existingAdjustment.itemCode || typeof taxExempt === 'undefined') {\n              delete adjustment.taxExempt;\n            }\n\n            adjustment = _extends(existingAdjustment, adjustment);\n          } else {\n            _this6.items.adjustments.push(adjustment);\n          }\n\n          _this6.resolveAndEmit('set.adjustment', adjustment, resolve);\n        }).catch(function (err) {\n          _this6.error(err, reject, 'adjustment');\n        });\n      }, this);\n    }\n    /**\n     * Updates coupon. Manages a single coupon on the item set, unsetting any exisitng\n     * coupon\n     *\n     * `set.coupon` is emitted when a valid coupon is set\n     * `unset.coupon` is emitted when an existing valid coupon is removed\n     * `error.coupon` is emitted when the requested coupon is invalid\n     *\n     * @param {String} couponCode\n     * @return {PricingPromise}\n     * @public\n     */\n\n  }, {\n    key: \"coupon\",\n    value: function coupon(couponCode) {\n      var _this7 = this;\n\n      if (~this.couponCodes.indexOf(couponCode)) {\n        return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve) {\n          return resolve(component_clone__WEBPACK_IMPORTED_MODULE_0___default()(_this7.items.coupon));\n        }, this);\n      }\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve) {\n        return resolve();\n      }, this).then(function () {\n        if (!_this7.items.coupon) return;\n        var priorCoupon = component_clone__WEBPACK_IMPORTED_MODULE_0___default()(_this7.items.coupon);\n        debug('unset.coupon');\n        return _this7.remove({\n          coupon: priorCoupon.code\n        }).then(function () {\n          _this7.emit('unset.coupon', priorCoupon);\n        });\n      }).then(function () {\n        return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve, reject) {\n          // A blank coupon is handled as ok\n          if (!couponCode) return resolve();\n\n          _this7.recurly.coupon({\n            plans: _this7.subscriptionPlanCodes,\n            coupon: couponCode\n          }, function (err, coupon) {\n            if (err) {\n              return _this7.error(err, reject, 'coupon');\n            } else {\n              _this7.items.coupon = coupon;\n\n              _this7.resolveAndEmit('set.coupon', coupon, resolve);\n            }\n          });\n        });\n      });\n    }\n    /**\n     * Updates address\n     *\n     * @param {Object} address\n     * @param {String} address.country\n     * @param {String} address.postalCode\n     * @param {String} address.vatNumber\n     * @return {PricingPromise}\n     * @public\n     */\n\n  }, {\n    key: \"address\",\n    value: function address(_address) {\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.itemUpdateFactory('address', _address), this);\n    }\n    /**\n     * Updates shipping address\n     *\n     * @param {Object} address\n     * @param {String} address.country\n     * @param {String} address.postalCode\n     * @param {String} address.vatNumber\n     * @return {PricingPromise}\n     * @public\n     */\n\n  }, {\n    key: \"shippingAddress\",\n    value: function shippingAddress(address) {\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.itemUpdateFactory('shippingAddress', address), this);\n    }\n    /**\n     * Updates tax info\n     *\n     * @param {Object} tax\n     * @param {String} tax.vatNumber\n     * @param {Object} [tax.amounts] specific tax amounts. Overrides automated tax rate calculations\n     * @param {Object} [tax.amounts.now] specific tax to apply on the immediate charge\n     * @param {Object} [tax.amounts.next=0] specific tax to apply on the next billing cycle\n     * @public\n     */\n\n  }, {\n    key: \"tax\",\n    value: function tax(_tax) {\n      this.guardTaxSignature(_tax);\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.itemUpdateFactory('tax', _tax), this);\n    }\n    /**\n     * Updates gift card\n     *\n     * @param {String} code Gift card code\n     * @return {PricingPromise} [description]\n     * @public\n     */\n\n  }, {\n    key: \"giftCard\",\n    value: function giftCard(code) {\n      var _this8 = this;\n\n      var unset = function unset() {\n        if (!_this8.items.giftCard) return;\n        debug('unset.giftCard');\n        delete _this8.items.giftCard;\n\n        _this8.emit('unset.giftCard');\n      };\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve, reject) {\n        if (!code) {\n          unset();\n          return resolve();\n        }\n\n        _this8.recurly.giftCard({\n          code: code\n        }, function (err, giftCard) {\n          if (err) {\n            return _this8.error(err, reject, 'giftCard');\n          } else {\n            unset();\n\n            if (_this8.items.currency !== giftCard.currency) {\n              return _this8.error(Object(_errors__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('gift-card-currency-mismatch'), reject, 'giftCard');\n            } else {\n              _this8.items.giftCard = giftCard;\n\n              _this8.resolveAndEmit('set.giftCard', giftCard, resolve);\n            }\n          }\n        });\n      }, this);\n    }\n    /**\n     * Adds handlers to remove subscriptions, adjustments, and coupons\n     *\n     * @param {Object} options\n     * @param {Object} options[item] Must contain an id property. The key name\n     *                               corresponds to the item type to be removed (ex: 'subscription')\n     * @public\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(options) {\n      var _this9 = this;\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_9__[\"default\"](function (resolve, reject) {\n        // Expects SubscriptionPricing or EmbeddedSubscriptionPricing\n        if (options.subscription) {\n          _this9.removeFromSet('subscriptions', options.subscription);\n        } else if (options.adjustment) {\n          _this9.removeFromSet('adjustments', options.adjustment);\n        } else {\n          if (options.coupon) {\n            // Remove the coupon from embedded subscriptions\n            promise__WEBPACK_IMPORTED_MODULE_4___default.a.all(_this9.validSubscriptions.map(function (sub) {\n              return sub.coupon().reprice({\n                internal: true\n              });\n            })).then(function () {\n              return _get(_getPrototypeOf(CheckoutPricing.prototype), \"remove\", _this9).call(_this9, options).then(resolve, reject);\n            });\n          } else {\n            _get(_getPrototypeOf(CheckoutPricing.prototype), \"remove\", _this9).call(_this9, options).then(resolve, reject);\n          }\n        }\n      });\n    }\n    /**\n     * Removes a set item (subscription or adjustment)\n     *\n     * @param  {String} name         item name (ex: 'subscription', 'adjustment')\n     * @param  {Object} itemToRemove item to remove. Must have an id property\n     * @private\n     */\n\n  }, {\n    key: \"removeFromSet\",\n    value: function removeFromSet(name, itemToRemove) {\n      this.items[name] = this.items[name].filter(function (item) {\n        return item.id !== itemToRemove.id;\n      });\n    }\n    /**\n     * Checks whether the current subscriptions will allow the given currency code\n     *\n     * @param  {String} code Currency code\n     * @return {Boolean}\n     * @private\n     */\n\n  }, {\n    key: \"subscriptionsAllowCurrency\",\n    value: function subscriptionsAllowCurrency(code) {\n      if (lodash_isempty__WEBPACK_IMPORTED_MODULE_3___default()(this.items.subscriptions)) return true;\n      return !!~this.subscriptionCurrencies.indexOf(code);\n    }\n    /**\n     * Attempts to set a common currency from amongst the\n     * current subscriptions and the provided codes.\n     *\n     * @param {Array} code Array of {String} currency codes\n     * @param {Object} [options]\n     * @param {Boolean} [options.commit=true] whether to commit a currency change\n     * @throws {Error} If a common currency cannot be found\n     * @private\n     */\n\n  }, {\n    key: \"resolveCurrency\",\n    value: function resolveCurrency(codes) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$commit = _ref2.commit,\n          commit = _ref2$commit === void 0 ? true : _ref2$commit;\n\n      var commonCurrencies; // If we have subscriptions already, check that we have common currencies. Otherwise, we may proceed\n\n      if (lodash_isempty__WEBPACK_IMPORTED_MODULE_3___default()(this.validSubscriptions)) {\n        commonCurrencies = codes;\n      } else {\n        commonCurrencies = intersect__WEBPACK_IMPORTED_MODULE_2___default()(this.subscriptionCurrencies, codes);\n      }\n\n      if (lodash_isempty__WEBPACK_IMPORTED_MODULE_3___default()(commonCurrencies)) throw new Error('unresolvable');\n      if (commit) return this.currency(commonCurrencies[0]);\n    }\n    /**\n     * Binds important events to the EventDispatcher\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"bindReporting\",\n    value: function bindReporting() {\n      var _this10 = this;\n\n      _get(_getPrototypeOf(CheckoutPricing.prototype), \"bindReporting\", this).call(this, 'pricing:checkout');\n\n      var report = function report() {\n        var _this10$recurly;\n\n        return (_this10$recurly = _this10.recurly).report.apply(_this10$recurly, arguments);\n      };\n\n      this.on('attached', function () {\n        return report('pricing:checkout:attached');\n      });\n      this.on('set.subscription', function () {\n        return report('pricing:checkout:set:subscription');\n      });\n      this.on('change:external', function (price) {\n        return report('pricing:checkout:change', {\n          price: {\n            couponCodes: _this10.couponCodes,\n            currency: _this10.currencyCode,\n            discount: price.now.discount,\n            giftCard: price.now.giftCard,\n            items: price.now.items.map(function (item) {\n              return {\n                type: item.type,\n                amount: item.amount,\n                quantity: item.quantity\n              };\n            }),\n            taxes: price.now.taxes,\n            total: price.now.total,\n            totalNext: price.next.total\n          }\n        });\n      });\n    }\n  }]);\n\n  return CheckoutPricing;\n}(___WEBPACK_IMPORTED_MODULE_8__[\"Pricing\"]);\n\n\n\nfunction coerceAdjustmentQuantity(quantity) {\n  quantity = parseInt(quantity, 10);\n  if (isNaN(quantity)) quantity = 1;\n  return quantity;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/checkout/index.js?");

/***/ }),

/***/ "./lib/recurly/pricing/index.js":
/*!**************************************!*\
  !*** ./lib/recurly/pricing/index.js ***!
  \**************************************/
/*! exports provided: Pricing, findByCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Pricing\", function() { return Pricing; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findByCode\", function() { return findByCode; });\n/* harmony import */ var currency_symbol_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! currency-symbol-map */ \"./node_modules/currency-symbol-map/currency-symbol-map.js\");\n/* harmony import */ var currency_symbol_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(currency_symbol_map__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component-clone */ \"./node_modules/component-clone/index.js\");\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(component_clone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash.pick */ \"./node_modules/lodash.pick/index.js\");\n/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _promise__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./promise */ \"./lib/recurly/pricing/promise.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _util_decimalize__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../util/decimalize */ \"./lib/util/decimalize.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:pricing');\n\nvar Pricing = /*#__PURE__*/function (_Emitter) {\n  _inherits(Pricing, _Emitter);\n\n  var _super = _createSuper(Pricing);\n\n  function Pricing(recurly) {\n    var _this;\n\n    _classCallCheck(this, Pricing);\n\n    _this = _super.call(this);\n    _this.recurly = recurly;\n    _this.debug = debug;\n\n    _this.reset();\n\n    _this.reprice();\n\n    _this.bindReporting();\n\n    return _this;\n  }\n\n  _createClass(Pricing, [{\n    key: \"Calculations\",\n    get: function get() {\n      throw new Error('Not implemented');\n    }\n  }, {\n    key: \"PRICING_METHODS\",\n    get: function get() {\n      return ['reset', 'remove', 'reprice'];\n    }\n  }, {\n    key: \"hasPrice\",\n    get: function get() {\n      return !!this.price;\n    }\n  }, {\n    key: \"totalNow\",\n    get: function get() {\n      return Object(_util_decimalize__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this.hasPrice ? this.price.now.total : 0);\n    }\n  }, {\n    key: \"subtotalPreDiscountNow\",\n    get: function get() {\n      var subtotalPreDiscountNow = parseFloat(this.price.now.subtotal) + parseFloat(this.price.now.discount);\n      return Object(_util_decimalize__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this.hasPrice ? subtotalPreDiscountNow : 0);\n    }\n  }, {\n    key: \"currencyCode\",\n    get: function get() {\n      return this.items.currency || '';\n    }\n  }, {\n    key: \"currencySymbol\",\n    get: function get() {\n      return currency_symbol_map__WEBPACK_IMPORTED_MODULE_0___default()(this.currencyCode);\n    }\n  }, {\n    key: \"couponCodes\",\n    get: function get() {\n      if (this.items.coupon) return [this.items.coupon.code];\n      return [];\n    }\n    /**\n     * Resets items and sets defaults\n     *\n     * @public\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.items = {};\n      this.currency(this.recurly.config.currency);\n    }\n    /**\n     * Provides a price estimate using current state\n     *\n     * @param {Function} [done] callback\n     * @param {Object} [options]\n     * @param {Boolean} [options.internal] when true, the 'change:external' event is not emitted\n     * @public\n     */\n\n  }, {\n    key: \"reprice\",\n    value: function reprice(done) {\n      var _this2 = this;\n\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$internal = _ref.internal,\n          internal = _ref$internal === void 0 ? false : _ref$internal;\n\n      this.debug('reprice');\n      return new _promise__WEBPACK_IMPORTED_MODULE_5__[\"default\"](function (resolve) {\n        new _this2.Calculations(_this2, function (price) {\n          if (JSON.stringify(price) === JSON.stringify(_this2.price)) return resolve(price);\n          _this2.price = price;\n\n          var priceCopy = _this2.resolveAndEmit('change', price, resolve);\n\n          if (!internal) _this2.emit('change:external', priceCopy);\n        });\n      }, this).nodeify(done);\n    }\n    /**\n     * Removes an object from the pricing model\n     *\n     * FIXME: This does not work well with sets i.e. subscriptions\n     *\n     * example\n     *\n     *   .remove({ plan: 'plan_code' });\n     *   .remove({ addons: 'addon_code' });\n     *   .remove({ coupon: 'coupon_code' });\n     *   .remove({ address: true }); // to remove without specifying a code\n     *\n     * @param {Object} opts\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(opts, done) {\n      var _this3 = this;\n\n      // is `item` being used for anything? It might just be having its value reassigned and then unused\n      // eslint-disable-next-line\n      var item;\n      this.debug('remove', opts);\n      return new _promise__WEBPACK_IMPORTED_MODULE_5__[\"default\"](function (resolve, reject) {\n        var prop = Object.keys(opts)[0];\n        var id = opts[prop];\n        if (!~Object.keys(_this3.items).indexOf(prop)) return _this3.error(Object(_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('invalid-item'), reject);\n\n        if (Array.isArray(_this3.items[prop])) {\n          var pos = _this3.items[prop].indexOf(findByCode(_this3.items[prop], id));\n\n          if (~pos) {\n            item = _this3.items[prop].splice(pos);\n          }\n        } else if (_this3.items[prop] && (id === _this3.items[prop].code || id === true)) {\n          item = _this3.items[prop];\n          delete _this3.items[prop];\n        } else {\n          return _this3.error(Object(_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('unremovable-item', {\n            type: prop,\n            id: id,\n            reason: 'does not exist on this pricing instance.'\n          }), reject);\n        }\n\n        resolve();\n      }, this).nodeify(done);\n    }\n    /**\n     * Checks tax params against expectations\n     *\n     * @param  {Object} tax\n     * @throws {String} error message if expectations are not met\n     */\n\n  }, {\n    key: \"guardTaxSignature\",\n    value: function guardTaxSignature() {\n      var tax = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!tax.amount) return;\n\n      if (_typeof(tax.amount) !== 'object') {\n        throw \"Invalid 'amount'. Expected 'Object', got '\".concat(_typeof(tax.amount), \"'\");\n      } else if (!isFinite(+tax.amount.now)) {\n        throw \"Invalid 'amount.now'. Expected 'Finite Numeric', got '\".concat(_typeof(tax.amount.now), \"'\");\n      } else if (!isFinite(+tax.amount.next)) {\n        throw \"Invalid 'amount.next'. Expected 'Finite Numeric', got '\".concat(_typeof(tax.amount.next), \"'\");\n      }\n    }\n    /**\n     * Utility to emit an event and call a PricingPromise resolver\n     * with a mutation-safe copy of the item object\n     *\n     * @param {string} event event name\n     * @param {Object} object pricing item\n     * @param {Function} resolve PricingPromise resolver\n     * @param {Boolean} [copy] whether to clone the pricing item\n     * @return {Object} object or object clone\n     * @private\n     */\n\n  }, {\n    key: \"resolveAndEmit\",\n    value: function resolveAndEmit(event, object, resolve) {\n      var _ref2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n          _ref2$copy = _ref2.copy,\n          copy = _ref2$copy === void 0 ? true : _ref2$copy;\n\n      this.debug(event);\n      if (_typeof(object) !== 'object') copy = false;\n      if (copy) object = component_clone__WEBPACK_IMPORTED_MODULE_2___default()(object);\n      this.emit(event, object);\n      resolve(object);\n      return object;\n    }\n    /**\n     * Binds important events to the EventDispatcher\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"bindReporting\",\n    value: function bindReporting() {\n      var _this4 = this;\n\n      var domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'pricing';\n\n      var report = function report() {\n        var _this4$recurly;\n\n        return (_this4$recurly = _this4.recurly).report.apply(_this4$recurly, arguments);\n      };\n\n      var setGiftCard = function setGiftCard(giftCard) {\n        return report(\"\".concat(domain, \":set:giftCard\"), {\n          amount: giftCard.unit_amount\n        });\n      };\n\n      var unsetGiftCard = function unsetGiftCard() {\n        return report(\"\".concat(domain, \":unset:giftCard\"));\n      };\n\n      this.on('set.addon', function (addOn) {\n        return report(\"\".concat(domain, \":set:addOn\"), lodash_pick__WEBPACK_IMPORTED_MODULE_4___default()(addOn, ['code', 'quantity']));\n      });\n      this.on('set.coupon', function (coupon) {\n        return report(\"\".concat(domain, \":set:coupon\"), {\n          code: coupon.code\n        });\n      });\n      this.on('set.currency', function (code) {\n        return report(\"\".concat(domain, \":set:currency\"), {\n          code: code\n        });\n      });\n      this.on('set.gift_card', setGiftCard);\n      this.on('set.giftCard', setGiftCard);\n      this.on('set.plan', function (plan) {\n        return report(\"\".concat(domain, \":set:plan\"), {\n          code: plan.code\n        });\n      });\n      this.on('unset.coupon', function () {\n        return report(\"\".concat(domain, \":unset:coupon\"));\n      });\n      this.on('unset.gift_card', unsetGiftCard);\n      this.on('unset.giftCard', unsetGiftCard);\n    }\n    /**\n     * Generates an standard Pricing.item updater method to be given to a PricingPromise\n     *\n     * @param {String} name item name\n     * @param {Object} object item value\n     * @return {Function} PricingPromise handler\n     * @private\n     */\n\n  }, {\n    key: \"itemUpdateFactory\",\n    value: function itemUpdateFactory(name, object) {\n      var _this5 = this;\n\n      return function (resolve) {\n        if (JSON.stringify(object) === JSON.stringify(_this5.items[name])) {\n          return resolve(_this5.items[name]);\n        }\n\n        _this5.items[name] = object;\n\n        _this5.resolveAndEmit(\"set.\".concat(name), object, resolve);\n      };\n    }\n    /**\n     * Emits a namespaced error\n     * @param {Error} error\n     * @param {Function} reject - Promise rejection function\n     * @param {[String]} namespace - dot-delimited error namespace\n     * @private\n     */\n\n  }, {\n    key: \"error\",\n    value: function error(_error) {\n      var _this6 = this;\n\n      var reject = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n      var namespace = arguments.length > 2 ? arguments[2] : undefined;\n\n      if (namespace) {\n        namespace.split('.').reduce(function (memo, name) {\n          return _this6.emit(\"\".concat(memo, \".\").concat(name), _error);\n        }, 'error');\n      }\n\n      this.emit('error', _error);\n      return reject(_error);\n    }\n  }]);\n\n  return Pricing;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_1___default.a);\n/**\n * Utility functions\n */\n\n/**\n * Finds an item within a set by its 'code' property. Used for\n * arrayed items like subscription addons\n *\n * @param {Array} set\n * @param {String} code\n * @return {Object}\n * @private\n */\n\nfunction findByCode(set, code) {\n  return set && component_find__WEBPACK_IMPORTED_MODULE_3___default()(set, {\n    code: code\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/index.js?");

/***/ }),

/***/ "./lib/recurly/pricing/promise.js":
/*!****************************************!*\
  !*** ./lib/recurly/pricing/promise.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PricingPromise; });\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:pricing:promise');\n/**\n * PricingPromise\n *\n * issues repricing when .done\n *\n * contains .then wrappers for Pricing property methods\n *\n * Usage\n *\n *   let pricing = recurly.Pricing.Subscription();\n *\n *   pricing\n *     .plan('basic')\n *     .addon('addon1')\n *     .then(process)\n *     .catch(errors)\n *     .done();\n *\n * @param {Function} resolver\n * @param {Pricing} pricing bound instance\n * @constructor\n * @public\n */\n\n\nvar PricingPromise = /*#__PURE__*/function (_Promise) {\n  _inherits(PricingPromise, _Promise);\n\n  var _super = _createSuper(PricingPromise);\n\n  function PricingPromise(resolver, pricing) {\n    var _this;\n\n    _classCallCheck(this, PricingPromise);\n\n    debug('create');\n    _this = _super.call(this, resolver);\n    _this.pricing = pricing;\n\n    _this.constructor = function (resolver) {\n      return new PricingPromise(resolver, pricing);\n    }; // for each pricing method, create a promise wrapper method\n\n\n    pricing && pricing.PRICING_METHODS.forEach(function (met) {\n      _this[met] = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _this.then(function () {\n          return pricing[met].apply(pricing, args);\n        });\n      };\n    });\n    return _this;\n  }\n  /**\n   * Adds a reprice and completes the control flow\n   *\n   * @param {Function} onFulfilled\n   * @param {Function} onRejected\n   * @return {Pricing} bound pricing instance\n   * @public\n   */\n\n\n  _createClass(PricingPromise, [{\n    key: \"done\",\n    value: function done() {\n      debug('repricing');\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      _get(_getPrototypeOf(PricingPromise.prototype), \"done\", this).apply(this.then(this.reprice), args);\n\n      return this.pricing;\n    }\n    /**\n     * Adds a reprice if a callback is passed\n     *\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"nodeify\",\n    value: function nodeify(done) {\n      var _get2;\n\n      if (typeof done === 'function') this.reprice();\n\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        args[_key3 - 1] = arguments[_key3];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(PricingPromise.prototype), \"nodeify\", this)).call.apply(_get2, [this, done].concat(args));\n    }\n  }]);\n\n  return PricingPromise;\n}(promise__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/promise.js?");

/***/ }),

/***/ "./lib/recurly/pricing/subscription/attachment.js":
/*!********************************************************!*\
  !*** ./lib/recurly/pricing/subscription/attachment.js ***!
  \********************************************************/
/*! exports provided: default, ignoreNotFound */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Attachment; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ignoreNotFound\", function() { return ignoreNotFound; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../util/dom */ \"./lib/util/dom.js\");\n/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_util_dom__WEBPACK_IMPORTED_MODULE_3__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:pricing:attachment');\n\nvar INIT_RUN = 'init-all';\n/**\n * bind a dom element to pricing values\n *\n * @param {SubscriptionPricing} pricing\n * @param {HTMLElement} container Element on which to attach\n */\n\nvar Attachment = /*#__PURE__*/function (_Emitter) {\n  _inherits(Attachment, _Emitter);\n\n  var _super = _createSuper(Attachment);\n\n  function Attachment(pricing, container) {\n    var _this;\n\n    _classCallCheck(this, Attachment);\n\n    _this = _super.call(this);\n    _this.pricing = pricing;\n    _this.container = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.element(container);\n    if (!_this.container) throw new Error('invalid dom element');\n    _this.change = _this.change.bind(_assertThisInitialized(_this));\n    _this.update = _this.update.bind(_assertThisInitialized(_this));\n\n    _this.pricing.on('change', _this.update);\n\n    _this.elements.all.forEach(function (elem) {\n      elem.addEventListener('change', _this.change);\n      elem.addEventListener('propertychange', _this.change);\n    });\n\n    _this.change(INIT_RUN);\n\n    return _this;\n  }\n\n  _createClass(Attachment, [{\n    key: \"elements\",\n    get: function get() {\n      if (this._elements) return this._elements;\n      var elements = {\n        all: [].slice.call(this.container.querySelectorAll('[data-recurly]'))\n      };\n      elements.all.forEach(function (node) {\n        var name = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(node, 'recurly');\n        if (!(name in elements)) elements[name] = [];\n        elements[name].push(node);\n      });\n      this._elements = elements;\n      return elements;\n    }\n    /**\n     * Handles input element changes\n     */\n\n  }, {\n    key: \"change\",\n    value: function change(event) {\n      var _this2 = this;\n\n      debug('change');\n      var elems = this.elements;\n      var target = event.target || event.srcElement;\n      var targetName = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(target, 'recurly');\n\n      var updating = function updating(name) {\n        return name in elems && event === INIT_RUN || targetName === name;\n      };\n\n      var updateAddon = elems.addon && updating('addon');\n      var updateAddress = updating('country') || updating('postal_code');\n      var updateCurrency = updating('currency');\n      var updateCoupon = elems.coupon && (updating('coupon') || updating('plan'));\n      var updateGiftcard = elems.gift_card && updating('gift_card');\n      var updateShippingAddress = updating('shipping_address.country') || updating('shipping_address.postal_code');\n      var updateTax = ['vat_number', 'tax_code', 'tax_amount.now', 'tax_amount.next'].some(updating);\n      var pricing = this.pricing.plan(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.plan), {\n        quantity: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.plan_quantity)\n      });\n\n      if (updateCurrency) {\n        pricing = pricing.currency(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.currency));\n      }\n\n      if (updateAddon) {\n        pricing = pricing.then(function () {\n          return promise__WEBPACK_IMPORTED_MODULE_1___default.a.all(elems.addon.map(function (elem) {\n            var plan = _this2.pricing.items.plan;\n            var code = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(elem, 'recurlyAddon');\n            var quantity = _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elem);\n\n            if (plan.addons && component_find__WEBPACK_IMPORTED_MODULE_2___default()(plan.addons, {\n              code: code\n            })) {\n              return _this2.pricing.addon(code, {\n                quantity: quantity\n              });\n            }\n          }));\n        });\n      }\n\n      if (updateCoupon) {\n        pricing = pricing.coupon(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.coupon).trim()).then(null, ignoreNotFound);\n      }\n\n      if (updateGiftcard) {\n        pricing = pricing.giftcard(_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.gift_card).trim()).then(null, ignoreNotFound);\n      }\n\n      if (updateAddress) {\n        pricing = pricing.address({\n          country: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.country),\n          postal_code: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.postal_code)\n        });\n      }\n\n      if (updateShippingAddress) {\n        pricing = pricing.shippingAddress({\n          country: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['shipping_address.country']),\n          postal_code: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['shipping_address.postal_code'])\n        });\n      }\n\n      if (updateTax) {\n        var taxParams = {\n          vatNumber: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.vat_number),\n          taxCode: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.tax_code)\n        };\n\n        if (elems['tax_amount.now'] || elems['tax_amount.next']) {\n          taxParams.amount = {\n            now: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['tax_amount.now']) || 0,\n            next: _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems['tax_amount.next']) || 0\n          };\n        }\n\n        pricing = pricing.tax(taxParams);\n      }\n\n      this.pricing = pricing.done(function () {\n        return event === INIT_RUN && _this2.emit('ready');\n      });\n    }\n    /**\n     * Updates output elements\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(price) {\n      var elems = this.elements;\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.currency_code, price.currency.code);\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.currency_symbol, price.currency.symbol);\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.plan_base, price.base.plan.unit);\n      _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems.plan_interval, price.base.plan.interval);\n      ['plan', 'addons', 'discount', 'setup_fee', 'subtotal', 'tax', 'total', 'gift_card'].forEach(function (value) {\n        _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems[value + '_now'], price.now[value]);\n        _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elems[value + '_next'], price.next[value]);\n      });\n\n      if (elems.addon_price) {\n        elems.addon_price.forEach(function (elem) {\n          var addonPrice = price.base.addons[_util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.data(elem, 'recurlyAddon')];\n          if (addonPrice) _util_dom__WEBPACK_IMPORTED_MODULE_3___default.a.value(elem, addonPrice);\n        });\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      var _this3 = this;\n\n      this.pricing.off('change', this.update);\n      this.elements.all.forEach(function (elem) {\n        elem.removeEventListener('change', _this3.change);\n        elem.removeEventListener('propertychange', _this3.change);\n      });\n    }\n  }]);\n\n  return Attachment;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n\nfunction ignoreNotFound(err) {\n  if (err.code === 'not-found') return;else throw err;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/subscription/attachment.js?");

/***/ }),

/***/ "./lib/recurly/pricing/subscription/calculations.js":
/*!**********************************************************!*\
  !*** ./lib/recurly/pricing/subscription/calculations.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Calculations; });\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-each */ \"./node_modules/component-each/index.js\");\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_each__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isempty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.isempty */ \"./node_modules/lodash.isempty/index.js\");\n/* harmony import */ var lodash_isempty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isempty__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _util_decimalize_member__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../util/decimalize-member */ \"./lib/util/decimalize-member.js\");\n/* harmony import */ var _util_tax_round__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../util/tax-round */ \"./lib/util/tax-round.js\");\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\n/**\n * Subscription pricing calculation handler\n *\n * @param {SubscriptionPricing} pricing\n * @constructor\n * @public\n */\n\nvar Calculations = /*#__PURE__*/function () {\n  function Calculations(pricing, done) {\n    _classCallCheck(this, Calculations);\n\n    this.pricing = pricing;\n    this.items = pricing.items;\n    this.price = {\n      now: {},\n      next: {},\n      base: {\n        plan: {},\n        addons: {}\n      },\n      addons: {},\n      // DEPRECATED\n      currency: {\n        code: this.pricing.currencyCode,\n        symbol: this.pricing.currencySymbol\n      },\n      taxes: []\n    };\n    this.subtotal();\n    this.tax(function () {\n      this.total();\n      this.giftCard();\n      component_each__WEBPACK_IMPORTED_MODULE_0___default()(this.price.base.plan, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_3__[\"default\"], this.price.base.plan);\n      component_each__WEBPACK_IMPORTED_MODULE_0___default()(this.price.base.addons, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_3__[\"default\"], this.price.base.addons);\n      component_each__WEBPACK_IMPORTED_MODULE_0___default()(this.price.addons, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_3__[\"default\"], this.price.addons); // DEPRECATED\n\n      component_each__WEBPACK_IMPORTED_MODULE_0___default()(this.price.now, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_3__[\"default\"], this.price.now);\n      component_each__WEBPACK_IMPORTED_MODULE_0___default()(this.price.next, _util_decimalize_member__WEBPACK_IMPORTED_MODULE_3__[\"default\"], this.price.next);\n      done(this.price);\n    });\n  }\n  /**\n   * Calculates subtotal\n   *\n   * @private\n   */\n\n\n  _createClass(Calculations, [{\n    key: \"subtotal\",\n    value: function subtotal() {\n      this.price.now.subtotal = 0;\n      this.price.next.subtotal = 0;\n      this.plan();\n      this.price.now.subtotal += this.price.now.plan;\n      this.price.next.subtotal += this.price.next.plan;\n      this.addons();\n      this.price.now.subtotal += this.price.now.addons;\n      this.price.next.subtotal += this.price.next.addons;\n      this.setupFee();\n      this.discount();\n      this.price.now.subtotal -= this.price.now.discount;\n      this.price.next.subtotal -= this.price.next.discount;\n      this.price.now.subtotal += this.price.now.setup_fee;\n    }\n    /**\n     * Calculates total\n     *\n     * @private\n     */\n\n  }, {\n    key: \"total\",\n    value: function total() {\n      this.price.now.total = this.price.now.subtotal + this.price.now.tax;\n      this.price.next.total = this.price.next.subtotal + this.price.next.tax;\n    }\n    /**\n     * Calculates tax\n     *\n     * tax info precedence: `tax` > `shipping_address` > `address`\n     *\n     * @param {Function} done\n     * @private\n     */\n\n  }, {\n    key: \"tax\",\n    value: function tax(done) {\n      var _this = this;\n\n      this.price.now.tax = 0;\n      this.price.next.tax = 0; // If tax amount has been specified, simply apply it\n\n      if (this.items.tax && this.items.tax.amount) {\n        this.price.now.tax = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this.items.tax.amount.now);\n        this.price.next.tax = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this.items.tax.amount.next);\n        return done.call(this);\n      } // Tax the shipping address if present, or\n\n\n      var taxAddress = this.items.shipping_address || this.items.address;\n\n      var taxInfo = _extends({}, taxAddress, this.items.tax);\n\n      if (!lodash_isempty__WEBPACK_IMPORTED_MODULE_2___default()(taxInfo)) {\n        this.pricing.recurly.tax(taxInfo, function (err, taxes) {\n          if (err) {\n            _this.pricing.emit('error', err);\n          } else {\n            _this.price.taxes = [];\n            component_each__WEBPACK_IMPORTED_MODULE_0___default()(taxes, function (tax) {\n              if (_this.pricing.taxExempt) return;\n              _this.price.now.tax += parseFloat((_this.price.now.subtotal * tax.rate).toFixed(6));\n              _this.price.next.tax += parseFloat((_this.price.next.subtotal * tax.rate).toFixed(6)); // If we have taxes, we may want to display the rate...\n              // push the taxes so we know what they are...\n\n              _this.price.taxes.push(tax);\n            }); // tax estimation prefers partial cents to round to the nearest cent\n\n            _this.price.now.tax = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this.price.now.tax);\n            _this.price.next.tax = Object(_util_tax_round__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this.price.next.tax);\n          }\n\n          done.call(_this);\n        });\n      } else {\n        done.call(this);\n      }\n    }\n    /**\n     * Computes plan prices\n     *\n     * @private\n     */\n\n  }, {\n    key: \"plan\",\n    value: function plan() {\n      this.price.now.plan = 0;\n      this.price.next.plan = 0;\n      if (!this.items.plan) return;\n      var base = this.items.plan.price[this.items.currency];\n      this.price.base.plan.unit = base.unit_amount;\n      this.price.base.plan.setup_fee = base.setup_fee;\n      var amount = this.planPrice().amount;\n      this.price.now.plan = amount;\n      this.price.next.plan = amount;\n      if (this.isTrial()) this.price.now.plan = 0;\n    }\n    /**\n     * Computes addon prices and applies addons to the subtotal\n     *\n     * @private\n     */\n\n  }, {\n    key: \"addons\",\n    value: function addons() {\n      var _this2 = this;\n\n      this.price.now.addons = 0;\n      this.price.next.addons = 0;\n      if (!this.items.plan) return;\n      if (!Array.isArray(this.items.plan.addons)) return;\n      this.items.plan.addons.forEach(function (addon) {\n        // exclude usage addons\n        if (addon.add_on_type !== 'fixed') return;\n        var price = addon.price[_this2.items.currency].unit_amount;\n        _this2.price.base.addons[addon.code] = price;\n        _this2.price.addons[addon.code] = price; // DEPRECATED\n\n        var selected = component_find__WEBPACK_IMPORTED_MODULE_1___default()(_this2.items.addons, {\n          code: addon.code\n        });\n\n        if (selected) {\n          price = price * selected.quantity;\n          if (!_this2.isTrial()) _this2.price.now.addons += price;\n          _this2.price.next.addons += price;\n        }\n      });\n    }\n    /**\n     * Applies coupon discount to the subtotal\n     *\n     * @private\n     */\n\n  }, {\n    key: \"discount\",\n    value: function discount() {\n      var coupon = this.items.coupon;\n      this.price.now.discount = 0;\n      this.price.next.discount = 0;\n      if (!coupon) return;\n\n      if (coupon.discount.rate) {\n        var discountNow = parseFloat((this.price.now.subtotal * coupon.discount.rate).toFixed(6));\n        var discountNext = parseFloat((this.price.next.subtotal * coupon.discount.rate).toFixed(6));\n        this.price.now.discount = Math.round(discountNow * 100) / 100;\n        this.price.next.discount = Math.round(discountNext * 100) / 100;\n      } else if (coupon.discount.type === 'free_trial') {// Handled in separate trial logic\n      } else {\n        var discountableNow = this.price.now.subtotal + this.price.now.setup_fee;\n        var discountableNext = this.price.next.subtotal;\n        this.price.now.discount = Math.min(discountableNow, coupon.discount.amount[this.items.currency]);\n        this.price.next.discount = Math.min(discountableNext, coupon.discount.amount[this.items.currency]);\n      }\n\n      if (coupon.single_use && this.price.now.discount > 0) this.price.next.discount = 0;\n    }\n    /**\n     * Applies plan setup fee to the subtotal\n     *\n     * @private\n     */\n\n  }, {\n    key: \"setupFee\",\n    value: function setupFee() {\n      this.price.now.setup_fee = this.planPrice().setup_fee;\n      this.price.next.setup_fee = 0;\n    }\n    /**\n     * Subtracts any giftcard value from the total\n     *\n     * @private\n     */\n\n  }, {\n    key: \"giftCard\",\n    value: function giftCard() {\n      if (this.pricing.items.gift_card) {\n        var nowTotal = this.price.now.total;\n        var nextTotal = this.price.next.total;\n        var giftcardNow = useGiftcard(nowTotal, this.pricing.items.gift_card.unit_amount);\n        var giftcardNext = useGiftcard(nextTotal, giftcardNow.remains);\n        this.price.now.gift_card = giftcardNow.used;\n        this.price.next.gift_card = giftcardNext.used;\n        this.price.now.total = nowTotal - giftcardNow.used;\n        this.price.next.total = nextTotal - giftcardNext.used;\n      }\n\n      function useGiftcard(price, giftcardValue) {\n        var used = 0;\n        var remains = 0;\n\n        if (giftcardValue > price) {\n          used = price;\n          remains = giftcardValue - price;\n        } else {\n          used = giftcardValue;\n        }\n\n        return {\n          used: used,\n          remains: remains\n        };\n      }\n    }\n    /**\n     * Get the price structure of the current plan on the current currency\n     *\n     * @return {Object} { amount, setup_fee }\n     * @private\n     */\n\n  }, {\n    key: \"planPrice\",\n    value: function planPrice() {\n      var plan = this.items.plan;\n      if (!plan) return {\n        amount: 0,\n        setup_fee: 0\n      };\n      var price = plan.price[this.items.currency];\n      price.amount = price.unit_amount * (plan.quantity || 1);\n      return price;\n    }\n  }, {\n    key: \"isTrial\",\n    value: function isTrial() {\n      var coupon = this.items.coupon;\n      if (coupon && coupon.discount.type === 'free_trial') return true;\n      return this.items.plan.trial;\n    }\n  }]);\n\n  return Calculations;\n}();\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/subscription/calculations.js?");

/***/ }),

/***/ "./lib/recurly/pricing/subscription/embedded.js":
/*!******************************************************!*\
  !*** ./lib/recurly/pricing/subscription/embedded.js ***!
  \******************************************************/
/*! exports provided: DISABLED_METHODS, DEFERRED_METHODS, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DISABLED_METHODS\", function() { return DISABLED_METHODS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DEFERRED_METHODS\", function() { return DEFERRED_METHODS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EmbeddedSubscriptionPricing; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../promise */ \"./lib/recurly/pricing/promise.js\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ */ \"./lib/recurly/pricing/subscription/index.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n // this isn't being used but maybe needs to be in scope?\n// eslint-disable-next-line\n\n\nvar DISABLED_METHODS = ['address', 'coupon', 'currency', 'giftcard', 'shippingAddress', 'bindReporting'];\nvar DEFERRED_METHODS = ['couponIsValidForSubscription'];\n/**\n * Wraps a SubscriptionPricing to be embedded in CheckoutPricing\n *\n * - disables impertinent methods on the original subscriptionPricing\n *   in place\n * - proxies the orignal methods on the new\n *   EmbeddedSubscriptionPricing instance\n *\n * @param {SubscriptionPricing} subscriptionPricing\n * @constructor\n */\n\nvar EmbeddedSubscriptionPricing = /*#__PURE__*/function () {\n  function EmbeddedSubscriptionPricing(subscriptionPricing, checkoutPricing) {\n    var _this = this;\n\n    _classCallCheck(this, EmbeddedSubscriptionPricing);\n\n    this.subscription = subscriptionPricing;\n    this.checkout = checkoutPricing;\n    DISABLED_METHODS.forEach(function (method) {\n      var original = subscriptionPricing[method];\n      subscriptionPricing[method] = disabledResolverFactory(method, subscriptionPricing);\n      _this[method] = original.bind(subscriptionPricing);\n    });\n    DEFERRED_METHODS.forEach(function (method) {\n      _this[method] = function () {\n        return subscriptionPricing[method].apply(subscriptionPricing, arguments);\n      };\n    });\n    subscriptionPricing.plan = this.plan.bind(this);\n  }\n\n  _createClass(EmbeddedSubscriptionPricing, [{\n    key: \"id\",\n    get: function get() {\n      return this.subscription.id;\n    }\n  }, {\n    key: \"isValid\",\n    get: function get() {\n      return this.subscription.isValid;\n    }\n  }, {\n    key: \"items\",\n    get: function get() {\n      return this.subscription.items;\n    }\n  }, {\n    key: \"price\",\n    get: function get() {\n      return this.subscription.price;\n    }\n  }, {\n    key: \"taxCode\",\n    get: function get() {\n      return this.subscription.taxCode;\n    }\n  }, {\n    key: \"taxExempt\",\n    get: function get() {\n      return this.subscription.taxExempt;\n    }\n    /**\n     * Plan setter\n     *\n     * - Overrides SubscriptionPricing.plan\n     * - Adds additional currency check before setting plan\n     * - Adds checkout currency resolution after the plan is set\n     *\n     * @param {String} planCode\n     * @param {Object} [meta]\n     * @param {Number} [meta.quantity]\n     * @param {Function} [done] callback\n     * @return {PricingPromise}\n     */\n\n  }, {\n    key: \"plan\",\n    value: function plan() {\n      var _this$subscription,\n          _this2 = this;\n\n      var _this$subscription$re = (_this$subscription = this.subscription).resolvePlanOptions.apply(_this$subscription, arguments),\n          currentPlan = _this$subscription$re.currentPlan,\n          quantity = _this$subscription$re.quantity,\n          planCode = _this$subscription$re.planCode,\n          done = _this$subscription$re.done;\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_1__[\"default\"](function (resolve, reject) {\n        if (currentPlan && currentPlan.code === planCode) {\n          currentPlan.quantity = quantity;\n          return resolve(currentPlan);\n        }\n\n        _this2.checkout.recurly.plan(planCode, function (err, plan) {\n          if (err) return _this2.subscription.error(err, reject, 'plan'); // Check if the new plan will resolve with the checkout currencies\n\n          if (_this2.checkout.items.subscriptions.length > 1) {\n            try {\n              _this2.checkout.resolveCurrency(Object.keys(plan.price), {\n                commit: false\n              });\n            } catch (err) {\n              return reject(Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('invalid-plan-currency', {\n                planCode: plan.code,\n                currencies: _this2.checkout.subscriptionCurrencies\n              }));\n            }\n          }\n\n          plan.quantity = quantity;\n          _this2.subscription.items.plan = plan;\n\n          var finish = function finish() {\n            _this2.subscription.emit('set.plan', plan);\n\n            resolve(plan);\n          };\n\n          if (_this2.checkout.currencyCode in plan.price) {\n            finish();\n          } else {\n            // update currencies on checkout, which will propagate the\n            // change to the subscriptions\n            try {\n              _this2.checkout.resolveCurrency(Object.keys(plan.price)).then(finish);\n            } catch (e) {\n              reject(err);\n            }\n          }\n        });\n      }, this.subscription).nodeify(done);\n    }\n  }]);\n\n  return EmbeddedSubscriptionPricing;\n}();\n\n\n\nfunction disabledResolverFactory(method, subscriptionPricing) {\n  return function () {\n    return new _promise__WEBPACK_IMPORTED_MODULE_1__[\"default\"](function (res) {\n      return res();\n    }, subscriptionPricing);\n  };\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/subscription/embedded.js?");

/***/ }),

/***/ "./lib/recurly/pricing/subscription/index.js":
/*!***************************************************!*\
  !*** ./lib/recurly/pricing/subscription/index.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SubscriptionPricing; });\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-clone */ \"./node_modules/component-clone/index.js\");\n/* harmony import */ var component_clone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_clone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../util/uid */ \"./lib/util/uid.js\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ */ \"./lib/recurly/pricing/index.js\");\n/* harmony import */ var _promise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../promise */ \"./lib/recurly/pricing/promise.js\");\n/* harmony import */ var _calculations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./calculations */ \"./lib/recurly/pricing/subscription/calculations.js\");\n/* harmony import */ var _attachment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./attachment */ \"./lib/recurly/pricing/subscription/attachment.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:pricing:subscription-pricing');\n/**\n * SubscriptionPricing\n *\n * @constructor\n * @param {Recurly} recurly\n * @public\n */\n\n\nvar SubscriptionPricing = /*#__PURE__*/function (_Pricing) {\n  _inherits(SubscriptionPricing, _Pricing);\n\n  var _super = _createSuper(SubscriptionPricing);\n\n  function SubscriptionPricing(recurly) {\n    var _this;\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$id = _ref.id,\n        id = _ref$id === void 0 ? Object(_util_uid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() : _ref$id;\n\n    _classCallCheck(this, SubscriptionPricing);\n\n    _this = _super.call(this, recurly);\n    _this.id = id;\n    _this.debug = debug;\n\n    _this.recurly.report('pricing:subscription:create');\n\n    return _this;\n  }\n\n  _createClass(SubscriptionPricing, [{\n    key: \"Calculations\",\n    get: function get() {\n      return _calculations__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n    }\n  }, {\n    key: \"PRICING_METHODS\",\n    get: function get() {\n      return _get(_getPrototypeOf(SubscriptionPricing.prototype), \"PRICING_METHODS\", this).concat(['addon', 'address', 'coupon', 'currency', 'giftcard', 'plan', 'shippingAddress', 'tax']);\n    }\n  }, {\n    key: \"isValid\",\n    get: function get() {\n      return !!(this.items.plan && this.price);\n    }\n  }, {\n    key: \"taxCode\",\n    get: function get() {\n      // eslint-disable-next-line\n      if (!this.items.tax) return;\n      return this.items.tax.taxCode || this.items.tax.tax_code;\n    }\n  }, {\n    key: \"taxExempt\",\n    get: function get() {\n      return this.items.plan && this.items.plan.tax_exempt;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(SubscriptionPricing.prototype), \"reset\", this).call(this);\n\n      this.items.addons = [];\n    }\n    /**\n     * Attachment factory\n     *\n     * @param {HTMLElement} container - element on which to attach\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(container) {\n      var _this2 = this;\n\n      if (this.attachment) this.attachment.detach();\n      this.attachment = new _attachment__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this, container);\n      this.attachment.once('ready', function () {\n        return _this2.emit('attached');\n      });\n      return this.attachment;\n    }\n    /**\n     * Updates plan\n     *\n     * @param {String} planCode\n     * @param {Object} [meta]\n     * @param {Number} [meta.quantity]\n     * @param {Function} [done] callback\n     * @return {PricingPromise}\n     * @public\n     */\n\n  }, {\n    key: \"plan\",\n    value: function plan() {\n      var _this3 = this;\n\n      var _this$resolvePlanOpti = this.resolvePlanOptions.apply(this, arguments),\n          currentPlan = _this$resolvePlanOpti.currentPlan,\n          quantity = _this$resolvePlanOpti.quantity,\n          planCode = _this$resolvePlanOpti.planCode,\n          done = _this$resolvePlanOpti.done;\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](function (resolve, reject) {\n        if (currentPlan && currentPlan.code === planCode) {\n          currentPlan.quantity = quantity;\n          return resolve(component_clone__WEBPACK_IMPORTED_MODULE_0___default()(currentPlan));\n        }\n\n        _this3.recurly.plan(planCode, function (err, plan) {\n          if (err) return _this3.error(err, reject, 'plan');\n          plan.quantity = quantity;\n          _this3.items.plan = plan;\n\n          if (!(_this3.items.currency in plan.price)) {\n            _this3.currency(Object.keys(plan.price)[0]);\n          }\n\n          var finish = function finish() {\n            return _this3.resolveAndEmit('set.plan', plan, resolve);\n          }; // If we have a coupon, it must be reapplied\n\n\n          if (_this3.items.coupon) {\n            _this3.coupon(_this3.items.coupon.code).then(finish, finish);\n          } else {\n            finish();\n          }\n        });\n      }, this).nodeify(done);\n    }\n    /**\n     * Updates addon\n     *\n     * @param {String} addonCode\n     * @param {Object} [meta]\n     * @param {Number} [meta.quantity]\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"addon\",\n    value: function addon(addonCode, meta, done) {\n      var _this4 = this;\n\n      if (typeof meta === 'function') {\n        done = meta;\n        meta = undefined;\n      }\n\n      meta = meta || {};\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](function (resolve, reject) {\n        if (!_this4.items.plan) return _this4.error(Object(_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('missing-plan'), reject, 'addon');\n        var planAddon = Object(___WEBPACK_IMPORTED_MODULE_2__[\"findByCode\"])(_this4.items.plan.addons, addonCode);\n\n        if (!planAddon) {\n          return _this4.error(Object(_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('invalid-addon', {\n            planCode: _this4.items.plan.code,\n            addonCode: addonCode\n          }), reject, 'addon');\n        }\n\n        var quantity = addonQuantity(meta, planAddon);\n        var addon = Object(___WEBPACK_IMPORTED_MODULE_2__[\"findByCode\"])(_this4.items.addons, addonCode);\n\n        if (quantity === 0) {\n          _this4.remove({\n            addons: addonCode\n          });\n        }\n\n        if (addon) {\n          addon.quantity = quantity;\n        } else {\n          addon = JSON.parse(JSON.stringify(planAddon));\n          addon.quantity = quantity;\n\n          _this4.items.addons.push(addon);\n        }\n\n        _this4.resolveAndEmit('set.addon', addon, resolve);\n      }, this).nodeify(done);\n    }\n    /**\n    * Updates Gift card\n    *\n    * @param {String} code\n    * @param {Function} [done] callback\n    * @public\n    */\n\n  }, {\n    key: \"giftcard\",\n    value: function giftcard(code, done) {\n      var self = this;\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](function (resolve, reject) {\n        unsetGiftcard();\n        if (!code) return resolve();\n        self.recurly.giftCard({\n          code: code\n        }, function (err, gift_card) {\n          if (err && err.code === 'not-found') unsetGiftcard();\n\n          if (err) {\n            return self.error(err, reject, 'gift_card');\n          } else {\n            if (self.items.currency !== gift_card.currency) {\n              unsetGiftcard();\n              return self.error(Object(_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('gift-card-currency-mismatch'), reject, 'gift_card');\n            } else {\n              self.items.gift_card = gift_card;\n              self.resolveAndEmit('set.gift_card', gift_card, resolve);\n            }\n          }\n        });\n      }, this).nodeify(done);\n\n      function unsetGiftcard() {\n        debug('unset.gift_card');\n        delete self.items.gift_card;\n        self.emit('unset.gift_card');\n      }\n    }\n    /**\n     * Updates coupon\n     *\n     * `set.coupon` is emitted when a valid coupon is set\n     * `unset.coupon` is emitted when an existing valid coupon is removed\n     * `error.coupon` is emitted when the requested coupon is invalid\n     *\n     * @param {String} newCoupon coupon code\n     * @param {Object} newCoupon coupon object\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"coupon\",\n    value: function coupon(newCoupon, done) {\n      var _this5 = this;\n\n      // If the new coupon matches the current one, we just need to ensure it\n      // still applies to the current plan\n      if (~this.couponCodes.indexOf(newCoupon)) {\n        return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](function (resolve, reject) {\n          if (!_this5.couponIsValidForSubscription(_this5.items.coupon)) {\n            _this5.removeCurrentCoupon();\n\n            return _this5.error('invalid-coupon-for-subscription', reject, 'coupon');\n          }\n\n          resolve(component_clone__WEBPACK_IMPORTED_MODULE_0___default()(_this5.items.coupon));\n        }, this);\n      }\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](function (resolve, reject) {\n        if (!_this5.items.plan) return _this5.error(Object(_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('missing-plan'), reject, 'coupon');\n        if (_this5.items.coupon) _this5.removeCurrentCoupon(); // A blank coupon is handled as ok\n\n        if (!newCoupon) return resolve();\n\n        var receiveCoupon = function receiveCoupon(err, coupon) {\n          if (err) {\n            return _this5.error(err, reject, 'coupon');\n          }\n\n          if (!_this5.couponIsValidForSubscription(coupon)) {\n            return _this5.error('invalid-coupon-for-subscription', reject, 'coupon');\n          } else {\n            _this5.items.coupon = coupon;\n\n            _this5.resolveAndEmit('set.coupon', coupon, resolve);\n          }\n        };\n\n        if (typeof newCoupon === 'string') {\n          _this5.recurly.coupon({\n            plan: _this5.items.plan.code,\n            coupon: newCoupon\n          }, receiveCoupon);\n        } else {\n          receiveCoupon(null, newCoupon);\n        }\n      }, this).nodeify(done);\n    }\n    /**\n     * Updates address\n     *\n     * @param {Object} address\n     * @param {String} address.country\n     * @param {String|Number} address.postal_code\n     * @param {String} address.vat_number\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"address\",\n    value: function address(_address, done) {\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.itemUpdateFactory('address', _address), this).nodeify(done);\n    }\n    /**\n     * Updates shipping address\n     *\n     * @param {Object} address\n     * @param {String} address.country\n     * @param {String|Number} address.postal_code\n     * @param {String} address.vat_number\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"shippingAddress\",\n    value: function shippingAddress(address, done) {\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.itemUpdateFactory('shipping_address', address), this).nodeify(done);\n    }\n    /**\n     * Updates tax info\n     *\n     * @param {Object} tax\n     * @param {String} tax.taxCode\n     * @param {String} tax.vatNmber\n     * @param {Object} [tax.amounts] specific tax amounts. Overrides automated tax rate calculations\n     * @param {Object} [tax.amounts.now] specific tax to apply on the immediate charge\n     * @param {Object} [tax.amounts.next] specific tax to apply on the next billing cycle\n     * @param {String} tax.tax_code // deprecated\n     * @param {String} tax.vat_number // deprecated\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"tax\",\n    value: function tax(_tax, done) {\n      this.guardTaxSignature(_tax);\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.itemUpdateFactory('tax', _tax), this).nodeify(done);\n    }\n    /**\n     * Updates or retrieves currency code\n     *\n     * @param {String} code\n     * @param {Function} [done] callback\n     * @public\n     */\n\n  }, {\n    key: \"currency\",\n    value: function currency(code, done) {\n      var _this6 = this;\n\n      return new _promise__WEBPACK_IMPORTED_MODULE_3__[\"default\"](function (resolve, reject) {\n        var plan = _this6.items.plan;\n        if (_this6.items.currency === code) return resolve(_this6.items.currency);\n\n        if (plan && !(code in plan.price)) {\n          return _this6.error(Object(_errors__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('invalid-currency', {\n            currency: code,\n            allowed: Object.keys(plan.price)\n          }), reject, 'currency');\n        }\n\n        _this6.items.currency = code;\n\n        _this6.resolveAndEmit('set.currency', code, resolve);\n      }, this).nodeify(done);\n    }\n    /**\n     * Checks whether a given coupon may apply to this subscription\n     * @param  {Object} coupon\n     * @return {Boolean}\n     * @private\n     */\n\n  }, {\n    key: \"couponIsValidForSubscription\",\n    value: function couponIsValidForSubscription(coupon) {\n      if (!coupon) return false;\n      if (!coupon.applies_to_plans) return false;\n      if (coupon.applies_to_all_plans) return true;\n      if (~coupon.plans.indexOf(this.items.plan.code)) return true;\n      return false;\n    }\n    /**\n     * Removes the current coupon\n     *\n     * emits `unset.coupon`\n     *\n     * @private\n     */\n\n  }, {\n    key: \"removeCurrentCoupon\",\n    value: function removeCurrentCoupon() {\n      var _this7 = this;\n\n      if (!this.items.coupon) return;\n      var currentCoupon = component_clone__WEBPACK_IMPORTED_MODULE_0___default()(this.items.coupon);\n      debug('unset.coupon');\n      this.remove({\n        coupon: currentCoupon.code\n      }).then(function () {\n        return _this7.emit('unset.coupon', currentCoupon);\n      });\n    }\n    /**\n     * Parses plan method options\n     *\n     * @param  {String}   planCode\n     * @param  {Object}   [options]\n     * @param  {Function} done\n     * @return {object}\n     * @private\n     */\n\n  }, {\n    key: \"resolvePlanOptions\",\n    value: function resolvePlanOptions(planCode) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var done = arguments.length > 2 ? arguments[2] : undefined;\n      var plan = this.items.plan;\n      var quantity;\n\n      if (typeof options === 'function') {\n        done = options;\n        options = {};\n      } // options.quantity, plan.quantity, 1\n\n\n      if (plan && plan.quantity) quantity = plan.quantity;\n      if (options.quantity) quantity = parseInt(options.quantity, 10);\n      if (!quantity || quantity < 1) quantity = 1;\n      return {\n        currentPlan: plan,\n        quantity: quantity,\n        planCode: planCode,\n        options: options,\n        done: done\n      };\n    }\n    /**\n     * Binds important events to the EventDispatcher\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"bindReporting\",\n    value: function bindReporting() {\n      var _this8 = this;\n\n      _get(_getPrototypeOf(SubscriptionPricing.prototype), \"bindReporting\", this).call(this, 'pricing:subscription');\n\n      var report = function report() {\n        var _this8$recurly;\n\n        return (_this8$recurly = _this8.recurly).report.apply(_this8$recurly, arguments);\n      };\n\n      this.on('attached', function () {\n        return report('pricing:subscription:attached');\n      });\n      this.on('change:external', function (price) {\n        return report('pricing:subscription:change', {\n          price: {\n            addons: price.now.addons,\n            couponCodes: _this8.couponCodes,\n            currency: _this8.currencyCode,\n            discount: price.now.discount,\n            giftCard: price.now.gift_card,\n            taxes: price.now.taxes,\n            total: price.now.total,\n            totalNext: price.next.total\n          }\n        });\n      });\n    }\n  }]);\n\n  return SubscriptionPricing;\n}(___WEBPACK_IMPORTED_MODULE_2__[\"Pricing\"]);\n\n\n\nfunction addonQuantity(meta, planAddon) {\n  var qty = 1;\n  if ('quantity' in planAddon) qty = planAddon.quantity;\n  if ('quantity' in meta) qty = meta.quantity;\n  return parseInt(qty, 10) || 0;\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/pricing/subscription/index.js?");

/***/ }),

/***/ "./lib/recurly/reporter.js":
/*!*********************************!*\
  !*** ./lib/recurly/reporter.js ***!
  \*********************************/
/*! exports provided: Reporter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Reporter\", function() { return Reporter; });\n/* harmony import */ var _worker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./worker */ \"./lib/recurly/worker.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:reporter');\n/**\n * Reports events to the API\n *\n * @param {Object} options\n * @param {Recurly} options.recurly\n */\n\n\nvar Reporter = /*#__PURE__*/function () {\n  function Reporter(_ref) {\n    var recurly = _ref.recurly;\n\n    _classCallCheck(this, Reporter);\n\n    this.pool = [];\n    this.recurly = recurly;\n    if (!this.shouldDispatch) return;\n    this.worker = new _worker__WEBPACK_IMPORTED_MODULE_0__[\"IntervalWorker\"]({\n      perform: this.deliver.bind(this)\n    });\n\n    try {\n      this.worker.start();\n    } catch (err) {\n      debug('Error starting worker', err);\n    }\n  }\n  /**\n   * Sends a reporting event to be dispatched\n   *\n   * Warning: any errors that occur in this code path risk a\n   * stack overflow\n   *\n   * @param  {String} name event name\n   * @param  {Object} meta event metadata\n   */\n\n\n  _createClass(Reporter, [{\n    key: \"send\",\n    value: function send(name, meta) {\n      if (!this.shouldDispatch) return;\n      this.pool.push(this.payload(name, meta));\n    }\n    /**\n     * Stops the worker and removes external references\n     *\n     * @return {[type]} [description]\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      debug('destroying reporter');\n\n      if (this.worker) {\n        this.worker.destroy();\n        delete this.worker;\n      }\n    }\n    /**\n     * Whether events should be dispatched\n     *\n     * @return {Boolean}\n     * @private\n     */\n\n  }, {\n    key: \"shouldDispatch\",\n    get: function get() {\n      return this.recurly.isParent;\n    }\n    /**\n     * Delivery job. Sends events in a queued request to the events endpoint\n     *\n     * @private\n     */\n\n  }, {\n    key: \"deliver\",\n    value: function deliver() {\n      if (this.pool.length === 0) return;\n      var data = {\n        events: this.pool.splice(0, this.pool.length)\n      };\n      this.recurly.request.queued({\n        method: 'post',\n        route: '/events',\n        data: data\n      });\n    }\n    /**\n     * Formats an event payload\n     *\n     * @param {String} name event name\n     * @param {Object} [meta] event metadata\n     * @private\n     */\n\n  }, {\n    key: \"payload\",\n    value: function payload(name, meta) {\n      return {\n        name: name,\n        meta: meta,\n        occurredAt: new Date().toISOString()\n      };\n    }\n  }]);\n\n  return Reporter;\n}();\n\n//# sourceURL=webpack://recurly/./lib/recurly/reporter.js?");

/***/ }),

/***/ "./lib/recurly/request.js":
/*!********************************!*\
  !*** ./lib/recurly/request.js ***!
  \********************************/
/*! exports provided: Request */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Request\", function() { return Request; });\n/* harmony import */ var lodash_chunk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.chunk */ \"./node_modules/lodash.chunk/index.js\");\n/* harmony import */ var lodash_chunk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_chunk__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_deep_assign__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/deep-assign */ \"./lib/util/deep-assign.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var jsonp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jsonp */ \"./node_modules/jsonp/index.js\");\n/* harmony import */ var jsonp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jsonp__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! qs */ \"./node_modules/qs/lib/index.js\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_5__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:Request');\n/**\n * XHR/XDM Reference, according to browser environment\n */\n\n\nvar XHR = function () {\n  var XHR = window.XMLHttpRequest;\n  var XDM = window.XDomainRequest;\n  if (XHR && 'withCredentials' in new XHR()) return XHR;\n  if (XDM) return XDM;\n}();\n\nvar NOOP = function NOOP() {};\n/**\n * @typedef {RequestOptions}\n *\n * @property {String}   route          API route (e.g.: '/plans/my-plan')\n * @property {Object}   data           Request payload\n * @property {Function} [done]         Response callback. Signature: done(err, res)\n * @property {Boolean}  [cached=false] Whether to cache the request\n */\n\n/**\n * Constructs and issues API requests according to\n * the Recurly /js/v1 API contract\n *\n * @param {Object} options\n * @param {Recurly} options.recurly Recurly instance\n */\n\n\nvar Request = /*#__PURE__*/function () {\n  function Request(options) {\n    _classCallCheck(this, Request);\n\n    this.recurly = options.recurly;\n    this.cache = {};\n  }\n  /**\n   * @type {Number} default is 60 seconds\n   */\n\n\n  _createClass(Request, [{\n    key: \"timeout\",\n    get: function get() {\n      return this.recurly.config.timeout || 60000;\n    }\n    /**\n     * @type {String}\n     */\n\n  }, {\n    key: \"key\",\n    get: function get() {\n      return this.recurly.config.publicKey;\n    }\n    /**\n     * @type {String}\n     */\n\n  }, {\n    key: \"version\",\n    get: function get() {\n      return this.recurly.isParent ? this.recurly.version : this.recurly.config.parentVersion;\n    }\n    /**\n     * @type {String}\n     */\n\n  }, {\n    key: \"deviceId\",\n    get: function get() {\n      return this.recurly.deviceId;\n    }\n    /**\n     * @type {String}\n     */\n\n  }, {\n    key: \"instanceId\",\n    get: function get() {\n      return this.recurly.id;\n    }\n    /**\n     * @type {String}\n     */\n\n  }, {\n    key: \"sessionId\",\n    get: function get() {\n      return this.recurly.sessionId;\n    }\n    /**\n     * @type {Boolean}\n     */\n\n  }, {\n    key: \"shouldUseXHR\",\n    get: function get() {\n      return !!this.recurly.config.cors;\n    }\n    /**\n     * @type {Boolean}\n     */\n\n  }, {\n    key: \"isConfigured\",\n    get: function get() {\n      return !!this.recurly.configured;\n    }\n    /**\n     * Performs a GET request\n     *\n     * @public\n     * @param {RequestOptions} options\n     *\n     * @return {Promise} if `done` is not passed in options\n     * @return {undefined} if `done` is passed in options -- the callback will be used instead\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(_ref) {\n      var route = _ref.route,\n          data = _ref.data,\n          done = _ref.done,\n          cached = _ref.cached;\n      return this.requestWithCallback({\n        method: 'get',\n        route: route,\n        data: data,\n        done: done,\n        cached: cached\n      });\n    }\n    /**\n     * Performs a POST request\n     *\n     * @public\n     * @param {RequestOptions} options\n     *\n     * @return {Promise} if `done` is not passed in options\n     * @return {undefined} if `done` is passed in options -- the callback will be used instead\n     */\n\n  }, {\n    key: \"post\",\n    value: function post(_ref2) {\n      var route = _ref2.route,\n          data = _ref2.data,\n          done = _ref2.done,\n          cached = _ref2.cached;\n      return this.requestWithCallback({\n        method: 'post',\n        route: route,\n        data: data,\n        done: done,\n        cached: cached\n      });\n    }\n    /**\n     * Constructs a request with an optional callback resolve handler\n     *\n     * @private\n     * @param {RequestOptions} options\n     * @param {String}         options.method 'get' or 'post'\n     *\n     * @return {Promise} if `done` is not passed in options\n     * @return {undefined} if `done` is passed in options -- the callback will be used instead\n     */\n\n  }, {\n    key: \"requestWithCallback\",\n    value: function requestWithCallback(_ref3) {\n      var method = _ref3.method,\n          route = _ref3.route,\n          data = _ref3.data,\n          done = _ref3.done,\n          _ref3$cached = _ref3.cached,\n          cached = _ref3$cached === void 0 ? false : _ref3$cached;\n      var request = this[cached ? 'cached' : 'request']({\n        method: method,\n        route: route,\n        data: data\n      });\n\n      if (done) {\n        return request.done(function (res) {\n          return done(null, res);\n        }, function (err) {\n          return done(err, null);\n        });\n      }\n\n      return request;\n    }\n    /**\n     * Issues an API request\n     *\n     * @public\n     * @param {String} method\n     * @param {String} route\n     * @param {Object} [data]\n     * @throws {Error} If `configure` has not been called.\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"request\",\n    value: function request(_ref4) {\n      var method = _ref4.method,\n          route = _ref4.route,\n          _ref4$data = _ref4.data,\n          data = _ref4$data === void 0 ? {} : _ref4$data;\n      debug('request', method, route, data);\n\n      if (!this.isConfigured) {\n        return promise__WEBPACK_IMPORTED_MODULE_4___default.a.reject(Object(_errors__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('not-configured'));\n      }\n\n      var version = this.version,\n          key = this.key,\n          deviceId = this.deviceId,\n          sessionId = this.sessionId,\n          instanceId = this.instanceId;\n      var url = this.recurly.url(route);\n      data = Object(_util_deep_assign__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, data, {\n        version: version,\n        key: key,\n        deviceId: deviceId,\n        sessionId: sessionId,\n        instanceId: instanceId\n      });\n\n      if (this.shouldUseXHR) {\n        return this.xhr({\n          method: method,\n          url: url,\n          data: data\n        });\n      } else {\n        return this.jsonp({\n          method: method,\n          url: url,\n          data: data\n        });\n      }\n    }\n    /**\n     * Performs an API request with caching\n     */\n\n  }, {\n    key: \"cached\",\n    value: function cached(_ref5) {\n      var method = _ref5.method,\n          route = _ref5.route,\n          data = _ref5.data;\n      var cache = this.cache;\n      var slug = \"\".concat(method, \"-\").concat(route, \"-\").concat(JSON.stringify(data));\n      if (cache[slug]) return promise__WEBPACK_IMPORTED_MODULE_4___default.a.resolve(cache[slug]);\n      return this.request({\n        method: method,\n        route: route,\n        data: data\n      }).then(function (res) {\n        return cache[slug] = res;\n      });\n    }\n    /**\n     * Performs an API request that queues until it is able to be sent\n     */\n\n  }, {\n    key: \"queued\",\n    value: function queued() {\n      var _this = this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      if (this.isConfigured) return this.request.apply(this, args);\n      return new promise__WEBPACK_IMPORTED_MODULE_4___default.a(function (resolve, reject) {\n        _this.recurly.once('configured', function () {\n          return _this.request.apply(_this, args).then(resolve, reject);\n        });\n      });\n    }\n    /**\n     * Pipelines a request across several requests\n     *\n     * Chunks are made of `data[by]` in `size`. If any request errors,\n     * the entire pipeline errors\n     *\n     * - Ignores individual 404s\n     * - Rejects if all responses are 404s\n     * - Immediately rejects other errors\n     * - Collects and concats array responses\n     * - Resolves non-array responses with the first response\n     *\n     * @param {String} method\n     * @param {String} route\n     * @param {Object} data\n     * @param {Array} data.by must be an Array\n     * @param {String} by\n     * @param {Number} size=100\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"piped\",\n    value: function piped(_ref6) {\n      var _this2 = this;\n\n      var _ref6$method = _ref6.method,\n          method = _ref6$method === void 0 ? 'get' : _ref6$method,\n          route = _ref6.route,\n          _ref6$data = _ref6.data,\n          data = _ref6$data === void 0 ? {} : _ref6$data,\n          by = _ref6.by,\n          _ref6$size = _ref6.size,\n          size = _ref6$size === void 0 ? 100 : _ref6$size;\n      var chunks = lodash_chunk__WEBPACK_IMPORTED_MODULE_0___default()(data[by], size).map(function (piece) {\n        return _extends({}, data, _defineProperty({}, by, piece));\n      });\n\n      if (chunks.length === 0) {\n        return this.request({\n          method: method,\n          route: route,\n          data: data\n        });\n      }\n\n      var ignoreNotfound = function ignoreNotfound(error) {\n        return error.code === 'not-found' ? {\n          error: error\n        } : promise__WEBPACK_IMPORTED_MODULE_4___default.a.reject(error);\n      };\n\n      var pipeline = chunks.map(function (data) {\n        return _this2.request({\n          method: method,\n          route: route,\n          data: data\n        }).catch(ignoreNotfound);\n      });\n      return promise__WEBPACK_IMPORTED_MODULE_4___default.a.all(pipeline).then(function (results) {\n        var successes = results.filter(function (res) {\n          return !res.error;\n        });\n\n        if (successes.length === 0) {\n          return promise__WEBPACK_IMPORTED_MODULE_4___default.a.reject(results[0].error);\n        } // Determines if any single success response is not an Array.\n        // If so, we resolve with that single response\n\n\n        var nonArraySuccess = successes.filter(function (res) {\n          return !Array.isArray(res);\n        })[0];\n        if (nonArraySuccess) return promise__WEBPACK_IMPORTED_MODULE_4___default.a.resolve(nonArraySuccess); // If we are left entirely with successful Array responses, resolve\n        // with a concatenated Array of them all\n\n        return promise__WEBPACK_IMPORTED_MODULE_4___default.a.resolve(successes.reduce(function (acc, cur) {\n          return acc.concat(cur);\n        }));\n      });\n    }\n    /**\n     * Issues an API request over xhr.\n     *\n     * @private\n     * @param {String} method\n     * @param {String} url\n     * @param {Object} [data]\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"xhr\",\n    value: function xhr(_ref7) {\n      var _this3 = this;\n\n      var method = _ref7.method,\n          url = _ref7.url,\n          data = _ref7.data;\n\n      var error = function error() {\n        var _this3$recurly;\n\n        return (_this3$recurly = _this3.recurly).error.apply(_this3$recurly, arguments);\n      };\n\n      return new promise__WEBPACK_IMPORTED_MODULE_4___default.a(function (resolve, reject) {\n        var req = new XHR();\n        var payload = qs__WEBPACK_IMPORTED_MODULE_5___default.a.stringify(data, {\n          encodeValuesOnly: true\n        });\n        var timeout = _this3.timeout;\n\n        if (method === 'get') {\n          url += \"?\".concat(payload);\n        }\n\n        req.open(method, url);\n        req.timeout = timeout;\n\n        req.ontimeout = function () {\n          return reject(error('api-timeout'));\n        };\n\n        req.onerror = function () {\n          return reject(error('api-error'));\n        };\n\n        req.onprogress = NOOP;\n\n        req.onload = function () {\n          var res;\n\n          try {\n            if (this.responseText) res = JSON.parse(this.responseText);\n          } catch (e) {\n            debug(e, this.responseText);\n            return reject(error('api-error', {\n              message: \"There was a problem parsing the API response.\\n              request:\\n                url: \".concat(method, \" \").concat(url, \"\\n                body: \").concat(data, \"\\n              response:\\n                body: \").concat(this.responseText)\n            }));\n          }\n\n          if (res && res.error) {\n            reject(error('api-error', res.error));\n          } else {\n            resolve(res);\n          }\n        }; // XDR requests will abort if too many are sent simultaneously\n\n\n        setTimeout(function () {\n          if (method === 'post') {\n            // XDR cannot set Content-type\n            if (req.setRequestHeader) {\n              req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n            }\n\n            req.send(payload);\n          } else {\n            req.send();\n          }\n        }, 0);\n      });\n    }\n    /**\n     * Issues an API request over jsonp.\n     *\n     * @private\n     * @param {String} method\n     * @param {String} url\n     * @param {Object} [data]\n     */\n\n  }, {\n    key: \"jsonp\",\n    value: function jsonp(_ref8) {\n      var method = _ref8.method,\n          url = _ref8.url,\n          data = _ref8.data;\n      var timeout = this.timeout,\n          recurly = this.recurly;\n      if (method === 'post') data._method = method;\n      url += \"?\".concat(qs__WEBPACK_IMPORTED_MODULE_5___default.a.stringify(data, {\n        encodeValuesOnly: true\n      }));\n      return new promise__WEBPACK_IMPORTED_MODULE_4___default.a(function (resolve, reject) {\n        jsonp__WEBPACK_IMPORTED_MODULE_3___default()(url, {\n          prefix: '__rjs',\n          timeout: timeout\n        }, function (err, res) {\n          if (err) return reject(err);\n\n          if (res.error) {\n            reject(recurly.error('api-error', res.error));\n          } else {\n            resolve(res);\n          }\n        });\n      });\n    }\n  }]);\n\n  return Request;\n}();\n\n//# sourceURL=webpack://recurly/./lib/recurly/request.js?");

/***/ }),

/***/ "./lib/recurly/risk/index.js":
/*!***********************************!*\
  !*** ./lib/recurly/risk/index.js ***!
  \***********************************/
/*! exports provided: factory, Risk */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _risk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./risk */ \"./lib/recurly/risk/risk.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return _risk__WEBPACK_IMPORTED_MODULE_0__[\"factory\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Risk\", function() { return _risk__WEBPACK_IMPORTED_MODULE_0__[\"Risk\"]; });\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/index.js?");

/***/ }),

/***/ "./lib/recurly/risk/risk-concern.js":
/*!******************************************!*\
  !*** ./lib/recurly/risk/risk-concern.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return RiskConcern; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _util_readiness_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/readiness-emitter */ \"./lib/util/readiness-emitter.js\");\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/uid */ \"./lib/util/uid.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n/**\n * Risk concern management class\n *\n * @abstract\n */\n\nvar RiskConcern = /*#__PURE__*/function (_ReadinessEmitter) {\n  _inherits(RiskConcern, _ReadinessEmitter);\n\n  var _super = _createSuper(RiskConcern);\n\n  function RiskConcern(_ref) {\n    var _this;\n\n    var risk = _ref.risk;\n\n    _classCallCheck(this, RiskConcern);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"concernName\", 'base');\n\n    _this.id = Object(_util_uid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    _this.risk = risk;\n\n    _this.risk.add(_assertThisInitialized(_this));\n\n    return _this;\n  }\n\n  _createClass(RiskConcern, [{\n    key: \"recurly\",\n    get: function get() {\n      return this.risk.recurly;\n    } // To be implemented by individual concerns\n\n  }, {\n    key: \"attach\",\n    value: function attach() {}\n  }, {\n    key: \"remove\",\n    value: function remove() {}\n  }, {\n    key: \"error\",\n    value: function error() {\n      var err = _errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"].apply(void 0, arguments);\n      this.emit('error', err);\n    }\n  }, {\n    key: \"report\",\n    value: function report(name, meta) {\n      var risk = this.risk,\n          concernId = this.id,\n          concernName = this.concernName;\n      risk.recurly.report(\"\".concat(concernName, \":\").concat(name), _objectSpread({\n        concernId: concernId\n      }, meta));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.remove();\n      this.risk.remove(this);\n      this.off();\n    }\n  }]);\n\n  return RiskConcern;\n}(_util_readiness_emitter__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/risk-concern.js?");

/***/ }),

/***/ "./lib/recurly/risk/risk.js":
/*!**********************************!*\
  !*** ./lib/recurly/risk/risk.js ***!
  \**********************************/
/*! exports provided: factory, Risk */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Risk\", function() { return Risk; });\n/* harmony import */ var _risk_concern__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./risk-concern */ \"./lib/recurly/risk/risk-concern.js\");\n/* harmony import */ var _three_d_secure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./three-d-secure */ \"./lib/recurly/risk/three-d-secure/index.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk');\n\nfunction factory(options) {\n  return new Risk(_objectSpread({\n    recurly: this\n  }, options));\n}\n/**\n * Risk concerns controller\n */\n\nvar Risk = /*#__PURE__*/function () {\n  function Risk(_ref) {\n    var recurly = _ref.recurly;\n\n    _classCallCheck(this, Risk);\n\n    _defineProperty(this, \"ThreeDSecure\", _three_d_secure__WEBPACK_IMPORTED_MODULE_1__[\"factory\"]);\n\n    this.recurly = recurly;\n    this.concerns = [];\n  }\n  /**\n   * Adds a risk concern to the controller\n   *\n   * @private\n   * @param {RiskConcern} concern\n   */\n\n\n  _createClass(Risk, [{\n    key: \"add\",\n    value: function add(concern) {\n      if (!(concern instanceof _risk_concern__WEBPACK_IMPORTED_MODULE_0__[\"default\"])) {\n        throw \"Invalid concern. Expected 'RiskConcern', got '\".concat(_typeof(concern), \"'\");\n      }\n\n      this.concerns.push(concern);\n    }\n    /**\n     * Removes a risk concern from the controller\n     *\n     * @private\n     * @param {RiskConcern} concern\n     * @return {Boolean} whether the removal was successful\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(concern) {\n      var concerns = this.concerns;\n      var pos = concerns.indexOf(concern);\n      var removed = ~pos && concerns.splice(pos, 1);\n      return !!removed;\n    }\n  }], [{\n    key: \"browserInfo\",\n    get:\n    /**\n     * Returns a set of values helpful for building a risk profile,\n     * formatted for the API\n     *\n     * @typedef {Object} BrowserInfo\n     * @property {Number} color_depth\n     * @property {Boolean} java_enabled\n     * @property {String} language\n     * @property {Number} screen_height\n     * @property {Number} screen_width\n     * @property {Number} time_zone_offset\n     * @property {String} user_agent\n     *\n     * @private\n     * @return {BrowserInfo}\n     */\n    function get() {\n      var _window = window,\n          navigator = _window.navigator,\n          screen = _window.screen;\n      var language = navigator.language,\n          user_agent = navigator.userAgent;\n      var color_depth = screen.colorDepth;\n      return {\n        color_depth: color_depth,\n        java_enabled: navigator.javaEnabled(),\n        language: language,\n        referrer_url: window.location.href,\n        screen_height: screen.height,\n        screen_width: screen.width,\n        time_zone_offset: new Date().getTimezoneOffset(),\n        user_agent: user_agent\n      };\n    }\n    /**\n     * Retrieves preflight data and performs preflight procedures per concern\n     *\n     * Filters out any timeout results\n     *\n     * @param {Recurly} options.recurly\n     * @param {String}  options.bin     credit card BIN\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"preflight\",\n    value: function preflight(_ref2) {\n      var recurly = _ref2.recurly,\n          number = _ref2.number,\n          month = _ref2.month,\n          year = _ref2.year;\n      return recurly.request.get({\n        route: '/risk/preflights'\n      }).then(function (_ref3) {\n        var preflights = _ref3.preflights;\n        debug('received preflight instructions', preflights);\n        return _three_d_secure__WEBPACK_IMPORTED_MODULE_1__[\"ThreeDSecure\"].preflight({\n          recurly: recurly,\n          number: number,\n          month: month,\n          year: year,\n          preflights: preflights\n        });\n      }).then(function (results) {\n        return results.filter(function (maybeErr) {\n          if (maybeErr.code === 'risk-preflight-timeout') {\n            debug('timeout encountered', maybeErr);\n            return false;\n          }\n\n          return true;\n        });\n      });\n    }\n  }]);\n\n  return Risk;\n}();\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/risk.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/index.js":
/*!**************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/index.js ***!
  \**************************************************/
/*! exports provided: factory, ThreeDSecure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _three_d_secure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./three-d-secure */ \"./lib/recurly/risk/three-d-secure/three-d-secure.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return _three_d_secure__WEBPACK_IMPORTED_MODULE_0__[\"factory\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ThreeDSecure\", function() { return _three_d_secure__WEBPACK_IMPORTED_MODULE_0__[\"ThreeDSecure\"]; });\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/index.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/adyen.js":
/*!***********************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/adyen.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AdyenStrategy; });\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! load-script */ \"./node_modules/load-script/index.js\");\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(load_script__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../frame */ \"./lib/recurly/frame.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:adyen');\n\nvar AdyenStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(AdyenStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(AdyenStrategy);\n\n  function AdyenStrategy() {\n    var _this;\n\n    _classCallCheck(this, AdyenStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    if (!_this.shouldLoadAdyenLibrary) return _possibleConstructorReturn(_this);\n    debug('loading Adyen library');\n\n    _this.loadAdyenLibrary().catch(function (cause) {\n      return _this.threeDSecure.error('3ds-vendor-load-error', {\n        vendor: 'Adyen',\n        cause: cause\n      });\n    }).then(function () {\n      _this.adyenCheckout = new window.AdyenCheckout();\n      debug('Adyen checkout instance created', _this.adyenCheckout);\n\n      _this.markReady();\n    });\n\n    return _this;\n  }\n\n  _createClass(AdyenStrategy, [{\n    key: \"shouldLoadAdyenLibrary\",\n    get: function get() {\n      return !this.shouldFallback;\n    }\n  }, {\n    key: \"shouldFingerprint\",\n    get: function get() {\n      return !!this.adyenFingerprintToken;\n    }\n  }, {\n    key: \"shouldChallenge\",\n    get: function get() {\n      return !!this.adyenChallengeToken;\n    }\n  }, {\n    key: \"shouldFallback\",\n    get: function get() {\n      return !!this.adyenRedirectParams;\n    }\n  }, {\n    key: \"adyenFingerprintToken\",\n    get: function get() {\n      var authentication = this.actionToken.three_d_secure.params.authentication;\n      return authentication && authentication['threeds2.fingerprintToken'];\n    }\n  }, {\n    key: \"adyenChallengeToken\",\n    get: function get() {\n      var authentication = this.actionToken.three_d_secure.params.authentication;\n      return authentication && authentication['threeds2.challengeToken'];\n    }\n  }, {\n    key: \"adyenRedirectParams\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.redirect;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(AdyenStrategy.prototype), \"attach\", this).call(this, element);\n\n      var shouldFallback = this.shouldFallback,\n          shouldFingerprint = this.shouldFingerprint,\n          shouldChallenge = this.shouldChallenge;\n\n      if (shouldFingerprint) {\n        this.whenReady(function () {\n          return _this2.fingerprint();\n        });\n      } else if (shouldChallenge) {\n        this.whenReady(function () {\n          return _this2.challenge();\n        });\n      } else if (shouldFallback) {\n        this.fallback();\n      } else {\n        var cause = 'We could not determine an authentication method';\n        this.threeDSecure.error('3ds-auth-determination-error', {\n          cause: cause\n        });\n      }\n    }\n    /**\n     * Removes DOM elements\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var frame = this.frame;\n      if (frame) frame.destroy();\n\n      _get(_getPrototypeOf(AdyenStrategy.prototype), \"remove\", this).call(this);\n    }\n    /**\n     * Initiates device fingerprinting through AdyenCheckout\n     */\n\n  }, {\n    key: \"fingerprint\",\n    value: function fingerprint() {\n      var _this3 = this;\n\n      var adyenCheckout = this.adyenCheckout,\n          adyenFingerprintToken = this.adyenFingerprintToken,\n          container = this.container;\n      debug('Initializing fingerprinting with Adyen token', adyenFingerprintToken);\n      var fingerprintService = adyenCheckout.create('threeDS2DeviceFingerprint', {\n        fingerprintToken: adyenFingerprintToken,\n        onComplete: function onComplete(results) {\n          return _this3.emit('done', results);\n        },\n        onError: function onError(cause) {\n          return _this3.threeDSecure.error('3ds-auth-error', {\n            cause: cause\n          });\n        }\n      });\n      fingerprintService.mount(container);\n    }\n    /**\n     * Initiates a challenge through AdyenCheckout\n     */\n\n  }, {\n    key: \"challenge\",\n    value: function challenge() {\n      var _this4 = this;\n\n      var adyenCheckout = this.adyenCheckout,\n          adyenChallengeToken = this.adyenChallengeToken,\n          container = this.container;\n      debug('Initializing challenge with Adyen token', adyenChallengeToken);\n      var challengeService = adyenCheckout.create('threeDS2Challenge', {\n        challengeToken: adyenChallengeToken,\n        onComplete: function onComplete(results) {\n          return _this4.emit('done', results);\n        },\n        onError: function onError(cause) {\n          return _this4.threeDSecure.error('3ds-auth-error', {\n            cause: cause\n          });\n        },\n        size: '05'\n      });\n      challengeService.mount(container);\n    }\n    /**\n     * Constructs a 3D Secure 1.0 iframe\n     *\n     * TODO: Move this into a separate strategy, and have this strategy\n     *       instruct ThreeDSecureConcern to employ it instead\n     */\n\n  }, {\n    key: \"fallback\",\n    value: function fallback() {\n      var _this5 = this;\n\n      debug('Initiating 3D Secure 1.0 frame');\n      var adyenRedirectParams = this.adyenRedirectParams,\n          container = this.container,\n          threeDSecure = this.threeDSecure;\n      var recurly = threeDSecure.risk.recurly;\n\n      var payload = _objectSpread({\n        redirect_url: adyenRedirectParams.url\n      }, adyenRedirectParams.data);\n\n      this.frame = recurly.Frame({\n        type: _frame__WEBPACK_IMPORTED_MODULE_3__[\"Frame\"].TYPES.IFRAME,\n        path: '/three_d_secure/start',\n        payload: payload,\n        container: container\n      }).on('error', function (cause) {\n        return threeDSecure.error('3ds-auth-error', {\n          cause: cause\n        });\n      }).on('done', function (results) {\n        return _this5.emit('done', results);\n      });\n    }\n    /**\n     * Loads Adyen library dependency\n     */\n\n  }, {\n    key: \"loadAdyenLibrary\",\n    value: function loadAdyenLibrary() {\n      return new promise__WEBPACK_IMPORTED_MODULE_1___default.a(function (resolve, reject) {\n        if (window.AdyenCheckout) return resolve();\n        load_script__WEBPACK_IMPORTED_MODULE_0___default()(AdyenStrategy.libUrl, function (error) {\n          if (error) reject(error);else resolve();\n        });\n      });\n    }\n  }]);\n\n  return AdyenStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n_defineProperty(AdyenStrategy, \"libUrl\", 'https://checkoutshopper-test.adyen.com/checkoutshopper/sdk/2.2.0/adyen.js');\n\n_defineProperty(AdyenStrategy, \"strategyName\", 'adyen');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/adyen.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/braintree.js":
/*!***************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/braintree.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BraintreeStrategy; });\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! load-script */ \"./node_modules/load-script/index.js\");\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(load_script__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:braintree');\n\nvar BRAINTREE_CLIENT_VERSION = '3.76.0';\n\nvar BraintreeStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(BraintreeStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(BraintreeStrategy);\n\n  function BraintreeStrategy() {\n    var _this;\n\n    _classCallCheck(this, BraintreeStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    debug('loading braintree libraries');\n\n    _this.loadBraintreeLibraries().catch(function (cause) {\n      return _this.threeDSecure.error('3ds-vendor-load-error', {\n        vendor: 'Braintree',\n        cause: cause\n      });\n    }).then(function () {\n      _this.braintree = window.braintree;\n      debug('Braintree checkout instance created', _this.braintree);\n\n      _this.markReady();\n    });\n\n    return _this;\n  }\n\n  _createClass(BraintreeStrategy, [{\n    key: \"braintreeClientToken\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.client_token;\n    }\n  }, {\n    key: \"nonce\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.payment_method_nonce;\n    }\n  }, {\n    key: \"amount\",\n    get: function get() {\n      return this.actionToken.transaction.amount;\n    }\n  }, {\n    key: \"bin\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.bin;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(BraintreeStrategy.prototype), \"attach\", this).call(this, element);\n\n      this.whenReady(function () {\n        debug('Attempting to load braintree');\n        var braintree = _this2.braintree,\n            braintreeClientToken = _this2.braintreeClientToken,\n            amount = _this2.amount,\n            nonce = _this2.nonce,\n            bin = _this2.bin;\n        braintree.client.create({\n          authorization: braintreeClientToken\n        }).then(function (clientInstance) {\n          return braintree.threeDSecure.create({\n            client: clientInstance,\n            version: 2\n          });\n        }).then(function (threeDSecureInstance) {\n          return threeDSecureInstance.verifyCard({\n            amount: amount,\n            nonce: nonce,\n            bin: bin,\n            onLookupComplete: function onLookupComplete(data, next) {\n              next();\n            }\n          });\n        }).then(function (_ref) {\n          var paymentMethodNonce = _ref.nonce;\n          return _this2.emit('done', {\n            paymentMethodNonce: paymentMethodNonce\n          });\n        }).catch(function (cause) {\n          return _this2.threeDSecure.error('3ds-auth-error', {\n            cause: cause\n          });\n        });\n      });\n    }\n  }, {\n    key: \"urlForResource\",\n    value: function urlForResource(type) {\n      return \"https://js.braintreegateway.com/web/\".concat(BRAINTREE_CLIENT_VERSION, \"/js/\").concat(type, \".min.js\");\n    }\n    /**\n     * Loads Braintree library dependency\n     */\n\n  }, {\n    key: \"loadBraintreeLibraries\",\n    value: function loadBraintreeLibraries() {\n      var _this3 = this;\n\n      return new promise__WEBPACK_IMPORTED_MODULE_1___default.a(function (resolve, reject) {\n        if (window.braintree && window.braintree.client && window.braintree.threeDSecure) return resolve();\n        load_script__WEBPACK_IMPORTED_MODULE_0___default()(_this3.urlForResource('client'), function (error) {\n          if (error) reject(error);else load_script__WEBPACK_IMPORTED_MODULE_0___default()(_this3.urlForResource('three-d-secure'), function (error) {\n            if (error) reject(error);else resolve();\n          });\n        });\n      });\n    }\n  }]);\n\n  return BraintreeStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n_defineProperty(BraintreeStrategy, \"strategyName\", 'braintree_blue');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/braintree.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/cybersource.js":
/*!*****************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/cybersource.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CybersourceStrategy; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../frame */ \"./lib/recurly/frame.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:cybersource');\n\nvar CybersourceStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(CybersourceStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(CybersourceStrategy);\n\n  function CybersourceStrategy() {\n    var _this;\n\n    _classCallCheck(this, CybersourceStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.markReady();\n\n    return _this;\n  }\n\n  _createClass(CybersourceStrategy, [{\n    key: \"redirectUrl\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.redirect_url;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(CybersourceStrategy.prototype), \"attach\", this).call(this, element);\n\n      debug('Initiating 3D Secure frame');\n      var actionToken = this.actionToken,\n          container = this.container,\n          threeDSecure = this.threeDSecure,\n          redirectUrl = this.redirectUrl;\n      var recurly = threeDSecure.risk.recurly;\n\n      var payload = _objectSpread({\n        redirect_url: redirectUrl,\n        three_d_secure_action_token_id: actionToken.id\n      }, actionToken.three_d_secure.params);\n\n      this.frame = recurly.Frame({\n        path: '/three_d_secure/start',\n        type: _frame__WEBPACK_IMPORTED_MODULE_3__[\"Frame\"].TYPES.IFRAME,\n        payload: payload,\n        container: container\n      }).on('error', function (cause) {\n        return threeDSecure.error('3ds-auth-error', {\n          cause: cause\n        });\n      }).on('done', function (results) {\n        return _this2.emit('done', results);\n      });\n    }\n    /**\n     * Removes DOM elements\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var frame = this.frame;\n      if (frame) frame.destroy();\n\n      _get(_getPrototypeOf(CybersourceStrategy.prototype), \"remove\", this).call(this);\n    }\n  }], [{\n    key: \"preflight\",\n    value: function preflight(_ref) {\n      var recurly = _ref.recurly,\n          number = _ref.number,\n          month = _ref.month,\n          year = _ref.year,\n          gateway_code = _ref.gateway_code;\n      var preflightDeviceDataCollector = recurly.config.risk.threeDSecure.preflightDeviceDataCollector;\n\n      if (!preflightDeviceDataCollector) {\n        return promise__WEBPACK_IMPORTED_MODULE_1___default.a.resolve();\n      }\n\n      var PREFLIGHT_TIMEOUT = CybersourceStrategy.PREFLIGHT_TIMEOUT;\n      var data = {\n        gatewayType: CybersourceStrategy.strategyName,\n        gatewayCode: gateway_code,\n        number: number,\n        month: month,\n        year: year\n      };\n      return recurly.request.post({\n        route: '/risk/authentications',\n        data: data\n      }).then(function (_ref2) {\n        var jwt = _ref2.jwt,\n            deviceDataCollectionUrl = _ref2.deviceDataCollectionUrl;\n        var frame = recurly.Frame({\n          path: '/risk/data_collector',\n          payload: {\n            jwt: jwt,\n            redirect_url: deviceDataCollectionUrl\n          },\n          container: window.document.body,\n          type: _frame__WEBPACK_IMPORTED_MODULE_3__[\"Frame\"].TYPES.IFRAME,\n          height: 0,\n          width: 0\n        });\n        return promise__WEBPACK_IMPORTED_MODULE_1___default.a.race([new promise__WEBPACK_IMPORTED_MODULE_1___default.a(function (resolve) {\n          var listener = function listener(_ref3) {\n            var data = _ref3.data;\n\n            try {\n              var body = JSON.parse(data);\n\n              if (body.MessageType === 'profile.completed') {\n                debug('received device data session id', body);\n                resolve({\n                  session_id: body.SessionId\n                });\n                frame.destroy();\n                recurly.bus.off('raw-message', listener);\n              }\n            } catch (e) {\n              debug('Error parsing message. May be foreign message, skipping', e);\n            }\n          };\n\n          recurly.bus.on('raw-message', listener);\n        }), new promise__WEBPACK_IMPORTED_MODULE_1___default.a(function (resolve) {\n          setTimeout(function () {\n            resolve(Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('risk-preflight-timeout', {\n              processor: 'cybersource'\n            }));\n          }, PREFLIGHT_TIMEOUT);\n        })]);\n      });\n    }\n  }]);\n\n  return CybersourceStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n_defineProperty(CybersourceStrategy, \"strategyName\", 'cybersource');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/cybersource.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/orbital.js":
/*!*************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/orbital.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return OrbitalStrategy; });\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../frame */ \"./lib/recurly/frame.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:orbital');\n\nvar OrbitalStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(OrbitalStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(OrbitalStrategy);\n\n  function OrbitalStrategy() {\n    var _this;\n\n    _classCallCheck(this, OrbitalStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.markReady();\n\n    return _this;\n  }\n\n  _createClass(OrbitalStrategy, [{\n    key: \"redirectParams\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results.\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(OrbitalStrategy.prototype), \"attach\", this).call(this, element);\n\n      debug('Initiating 3D Secure frame');\n      var redirectParams = this.redirectParams,\n          container = this.container,\n          threeDSecure = this.threeDSecure;\n      var recurly = threeDSecure.risk.recurly;\n      var payload = {\n        redirect_url: redirectParams.acsUrl,\n        pa_req: redirectParams.pareq,\n        creq: redirectParams.creq,\n        md: redirectParams.md,\n        term_url: redirectParams.termUrl,\n        three_d_secure_action_token_id: this.actionToken.id\n      };\n      this.frame = recurly.Frame({\n        path: '/three_d_secure/start',\n        payload: payload,\n        container: container,\n        type: _frame__WEBPACK_IMPORTED_MODULE_1__[\"Frame\"].TYPES.IFRAME,\n        defaultEventName: 'orbital-3ds-challenge'\n      }).on('error', function (cause) {\n        return threeDSecure.error('3ds-auth-error', {\n          cause: cause\n        });\n      }).on('done', function (results) {\n        return _this2.emit('done', results);\n      });\n    }\n    /**\n     * Removes DOM elements\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var frame = this.frame;\n      if (frame) frame.destroy();\n\n      _get(_getPrototypeOf(OrbitalStrategy.prototype), \"remove\", this).call(this);\n    }\n  }]);\n\n  return OrbitalStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(OrbitalStrategy, \"strategyName\", 'orbital');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/orbital.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/sage-pay.js":
/*!**************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/sage-pay.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SagePayStrategy; });\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../frame */ \"./lib/recurly/frame.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:sage-pay');\n\nvar SagePayStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(SagePayStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(SagePayStrategy);\n\n  function SagePayStrategy() {\n    var _this;\n\n    _classCallCheck(this, SagePayStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.markReady();\n\n    return _this;\n  }\n\n  _createClass(SagePayStrategy, [{\n    key: \"redirectParams\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(SagePayStrategy.prototype), \"attach\", this).call(this, element);\n\n      debug('Initiating 3D Secure frame');\n      var redirectParams = this.redirectParams,\n          container = this.container,\n          threeDSecure = this.threeDSecure;\n      var recurly = threeDSecure.risk.recurly;\n      var payload = {\n        redirect_url: redirectParams.acsUrl,\n        pa_req: redirectParams.pareq,\n        creq: redirectParams.creq,\n        md: redirectParams.md,\n        three_d_secure_action_token_id: this.actionToken.id\n      };\n      this.frame = recurly.Frame({\n        path: '/three_d_secure/start',\n        payload: payload,\n        container: container,\n        type: _frame__WEBPACK_IMPORTED_MODULE_1__[\"Frame\"].TYPES.IFRAME,\n        defaultEventName: 'sagepay-3ds-challenge'\n      }).on('error', function (cause) {\n        return threeDSecure.error('3ds-auth-error', {\n          cause: cause\n        });\n      }).on('done', function (results) {\n        return _this2.emit('done', results);\n      });\n    }\n    /**\n     * Removes DOM elements\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var frame = this.frame;\n      if (frame) frame.destroy();\n\n      _get(_getPrototypeOf(SagePayStrategy.prototype), \"remove\", this).call(this);\n    }\n  }]);\n\n  return SagePayStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(SagePayStrategy, \"strategyName\", 'sagepay');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/sage-pay.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/strategy.js":
/*!**************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/strategy.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ThreeDSecureStrategy; });\n/* harmony import */ var _util_readiness_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../util/readiness-emitter */ \"./lib/util/readiness-emitter.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nvar ThreeDSecureStrategy = /*#__PURE__*/function (_ReadinessEmitter) {\n  _inherits(ThreeDSecureStrategy, _ReadinessEmitter);\n\n  var _super = _createSuper(ThreeDSecureStrategy);\n\n  function ThreeDSecureStrategy(_ref) {\n    var _this;\n\n    var threeDSecure = _ref.threeDSecure,\n        actionToken = _ref.actionToken;\n\n    _classCallCheck(this, ThreeDSecureStrategy);\n\n    _this = _super.call(this);\n    _this.threeDSecure = threeDSecure;\n    _this.actionToken = actionToken;\n    return _this;\n  }\n\n  _createClass(ThreeDSecureStrategy, [{\n    key: \"strategyName\",\n    get: function get() {\n      return this.constructor.strategyName;\n    }\n  }, {\n    key: \"container\",\n    get: function get() {\n      if (this._container) return this._container;\n      var parent = this.parent; // eslint-disable-next-line\n\n      if (!parent) return;\n      var container = this._container = document.createElement('div');\n      container.setAttribute('data-recurly', 'three-d-secure-container');\n      container.style.height = '100%';\n      container.style.width = '100%';\n      parent.appendChild(container);\n      return container;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(el) {\n      this.parent = el;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (!this._container) return;\n      if (!this._container.parentElement) return;\n      this.parent.removeChild(this._container);\n    }\n  }, {\n    key: \"fingerprint\",\n    value: function fingerprint() {}\n  }, {\n    key: \"challenge\",\n    value: function challenge() {}\n  }], [{\n    key: \"preflight\",\n    value: function preflight() {}\n  }]);\n\n  return ThreeDSecureStrategy;\n}(_util_readiness_emitter__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(ThreeDSecureStrategy, \"strategyName\", 'base');\n\n_defineProperty(ThreeDSecureStrategy, \"PREFLIGHT_TIMEOUT\", 30000);\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/strategy.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/stripe.js":
/*!************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/stripe.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return StripeStrategy; });\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! load-script */ \"./node_modules/load-script/index.js\");\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(load_script__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:stripe');\n\nvar StripeStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(StripeStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(StripeStrategy);\n\n  function StripeStrategy() {\n    var _this;\n\n    _classCallCheck(this, StripeStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    debug('loading Stripe library');\n\n    _this.loadStripeLibrary().catch(function (cause) {\n      return _this.threeDSecure.error('3ds-vendor-load-error', {\n        vendor: 'Stripe',\n        cause: cause\n      });\n    }).then(function () {\n      _this.stripe = window.Stripe(_this.stripePublishableKey);\n      debug('Stripe checkout instance created', _this.stripe);\n\n      _this.markReady();\n    });\n\n    return _this;\n  }\n\n  _createClass(StripeStrategy, [{\n    key: \"stripePublishableKey\",\n    get: function get() {\n      return this.actionToken.gateway.credentials.publishable_key;\n    }\n  }, {\n    key: \"stripeClientSecret\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.client_secret;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(StripeStrategy.prototype), \"attach\", this).call(this, element);\n\n      this.whenReady(function () {\n        var isPaymentIntent = _this2.stripeClientSecret.indexOf('pi') === 0;\n        var handleAction = isPaymentIntent ? _this2.stripe.handleCardAction : _this2.stripe.confirmCardSetup;\n        handleAction(_this2.stripeClientSecret).then(function (result) {\n          if (result.error) {\n            return _this2.threeDSecure.error('3ds-auth-error', {\n              cause: result.error\n            });\n          }\n\n          var _ref = result.paymentIntent || result.setupIntent,\n              id = _ref.id;\n\n          _this2.emit('done', {\n            id: id\n          });\n        });\n      });\n    }\n    /**\n     * Loads Stripe library dependency\n     */\n\n  }, {\n    key: \"loadStripeLibrary\",\n    value: function loadStripeLibrary() {\n      return new promise__WEBPACK_IMPORTED_MODULE_1___default.a(function (resolve, reject) {\n        if (window.Stripe) return resolve();\n        load_script__WEBPACK_IMPORTED_MODULE_0___default()(StripeStrategy.libUrl, function (error) {\n          if (error) reject(error);else resolve();\n        });\n      });\n    }\n  }]);\n\n  return StripeStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n_defineProperty(StripeStrategy, \"libUrl\", 'https://js.stripe.com/v3/');\n\n_defineProperty(StripeStrategy, \"strategyName\", 'stripe');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/stripe.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/test.js":
/*!**********************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/test.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TestStrategy; });\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../frame */ \"./lib/recurly/frame.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:test');\n\nvar TestStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(TestStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(TestStrategy);\n\n  function TestStrategy() {\n    var _this;\n\n    _classCallCheck(this, TestStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    debug('Using test strategy');\n    return _this;\n  }\n\n  _createClass(TestStrategy, [{\n    key: \"shouldFingerprint\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.challengeType === 'fingerprint';\n    }\n  }, {\n    key: \"shouldChallenge\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.challengeType === 'challenge';\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(TestStrategy.prototype), \"attach\", this).call(this, element);\n\n      var shouldFingerprint = this.shouldFingerprint,\n          shouldChallenge = this.shouldChallenge;\n\n      if (shouldFingerprint) {\n        this.emit('done', {\n          type: 'fingerprint',\n          success: true\n        });\n      } else if (shouldChallenge) {\n        this.challenge().done(function (success) {\n          return _this2.emit('done', {\n            type: 'challenge',\n            success: success\n          });\n        });\n      }\n    }\n  }, {\n    key: \"challenge\",\n    value: function challenge() {\n      var _this3 = this;\n\n      return new promise__WEBPACK_IMPORTED_MODULE_0___default.a(function () {\n        var container = _this3.container,\n            actionToken = _this3.actionToken,\n            threeDSecure = _this3.threeDSecure;\n        var recurly = threeDSecure.risk.recurly;\n        recurly.Frame({\n          type: _frame__WEBPACK_IMPORTED_MODULE_2__[\"Frame\"].TYPES.IFRAME,\n          path: '/three_d_secure/mock',\n          payload: {\n            three_d_secure_action_token_id: actionToken.id\n          },\n          container: container\n        }).on('error', function (err) {\n          return _this3.error(err);\n        }).on('done', function (results) {\n          if (results.success) _this3.emit('done', results);else _this3.error(results);\n        });\n      });\n    }\n  }, {\n    key: \"error\",\n    value: function error(cause) {\n      this.emit('error', {\n        cause: cause\n      });\n      this.threeDSecure.error('3ds-auth-error', {\n        cause: cause\n      });\n    }\n  }]);\n\n  return TestStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n_defineProperty(TestStrategy, \"strategyName\", 'test');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/test.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/wirecard.js":
/*!**************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/wirecard.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WirecardStrategy; });\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../frame */ \"./lib/recurly/frame.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:wirecard');\n\nvar WirecardStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(WirecardStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(WirecardStrategy);\n\n  function WirecardStrategy() {\n    var _this;\n\n    _classCallCheck(this, WirecardStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.markReady();\n\n    return _this;\n  }\n\n  _createClass(WirecardStrategy, [{\n    key: \"redirectParams\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(WirecardStrategy.prototype), \"attach\", this).call(this, element);\n\n      debug('Initiating 3D Secure frame');\n      var redirectParams = this.redirectParams,\n          container = this.container,\n          threeDSecure = this.threeDSecure;\n      var recurly = threeDSecure.risk.recurly;\n      var payload = {\n        redirect_url: redirectParams.acsUrl,\n        pa_req: redirectParams.pareq\n      };\n      this.frame = recurly.Frame({\n        path: '/three_d_secure/start',\n        payload: payload,\n        container: container,\n        type: _frame__WEBPACK_IMPORTED_MODULE_1__[\"Frame\"].TYPES.IFRAME\n      }).on('error', function (cause) {\n        return threeDSecure.error('3ds-auth-error', {\n          cause: cause\n        });\n      }).on('done', function (results) {\n        return _this2.emit('done', results);\n      });\n    }\n    /**\n     * Removes DOM elements\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var frame = this.frame;\n      if (frame) frame.destroy();\n\n      _get(_getPrototypeOf(WirecardStrategy.prototype), \"remove\", this).call(this);\n    }\n  }]);\n\n  return WirecardStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(WirecardStrategy, \"strategyName\", 'wirecard');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/wirecard.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/strategy/worldpay.js":
/*!**************************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/strategy/worldpay.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WorldpayStrategy; });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strategy */ \"./lib/recurly/risk/three-d-secure/strategy/strategy.js\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../frame */ \"./lib/recurly/frame.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure:worldpay');\n\nvar WorldpayStrategy = /*#__PURE__*/function (_ThreeDSecureStrategy) {\n  _inherits(WorldpayStrategy, _ThreeDSecureStrategy);\n\n  var _super = _createSuper(WorldpayStrategy);\n\n  function WorldpayStrategy() {\n    var _this;\n\n    _classCallCheck(this, WorldpayStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.markReady();\n\n    return _this;\n  }\n\n  _createClass(WorldpayStrategy, [{\n    key: \"redirectUrl\",\n    get: function get() {\n      return this.actionToken.three_d_secure.params.redirect_url;\n    }\n    /**\n     * Provides the target DOM element for which we will apply\n     * fingerprint detection, challenge flows, and results\n     *\n     * @param {HTMLElement} element\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(WorldpayStrategy.prototype), \"attach\", this).call(this, element);\n\n      debug('Initiating 3D Secure frame');\n      var actionToken = this.actionToken,\n          container = this.container,\n          threeDSecure = this.threeDSecure,\n          redirectUrl = this.redirectUrl;\n      var recurly = threeDSecure.risk.recurly;\n      var payload = {\n        redirect_url: redirectUrl,\n        three_d_secure_action_token_id: actionToken.id\n      };\n      this.frame = recurly.Frame({\n        path: '/three_d_secure/start',\n        type: _frame__WEBPACK_IMPORTED_MODULE_3__[\"Frame\"].TYPES.IFRAME,\n        payload: payload,\n        container: container\n      }).on('error', function (cause) {\n        return threeDSecure.error('3ds-auth-error', {\n          cause: cause\n        });\n      }).on('done', function (results) {\n        return _this2.emit('done', results);\n      });\n    }\n    /**\n     * Removes DOM elements\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var frame = this.frame;\n      if (frame) frame.destroy();\n\n      _get(_getPrototypeOf(WorldpayStrategy.prototype), \"remove\", this).call(this);\n    }\n  }], [{\n    key: \"preflight\",\n    value:\n    /**\n     * Performs Worldpay data collector preflight\n     *\n     * @param {recurly} options.recurly\n     * @param {String} options.bin CC BIN\n     * @param {String} options.jwt JWT\n     * @return {Promise}\n     */\n    function preflight(_ref) {\n      var recurly = _ref.recurly,\n          number = _ref.number,\n          jwt = _ref.jwt,\n          deviceDataCollectionUrl = _ref.deviceDataCollectionUrl;\n      var preflightDeviceDataCollector = recurly.config.risk.threeDSecure.preflightDeviceDataCollector;\n\n      if (!preflightDeviceDataCollector) {\n        return promise__WEBPACK_IMPORTED_MODULE_1___default.a.resolve();\n      }\n\n      var PREFLIGHT_TIMEOUT = WorldpayStrategy.PREFLIGHT_TIMEOUT;\n      var bin = number.substr(0, 6);\n      var frame = recurly.Frame({\n        path: '/risk/data_collector',\n        payload: {\n          bin: bin,\n          jwt: jwt,\n          redirect_url: deviceDataCollectionUrl\n        },\n        container: window.document.body,\n        type: _frame__WEBPACK_IMPORTED_MODULE_3__[\"Frame\"].TYPES.IFRAME,\n        height: 0,\n        width: 0\n      });\n      return promise__WEBPACK_IMPORTED_MODULE_1___default.a.race([new promise__WEBPACK_IMPORTED_MODULE_1___default.a(function (resolve) {\n        var listener = function listener(_ref2) {\n          var data = _ref2.data;\n\n          try {\n            var body = JSON.parse(data);\n\n            if (body.MessageType === 'profile.completed') {\n              debug('received device data session id', body);\n              resolve({\n                session_id: body.SessionId\n              });\n              recurly.bus.off('raw-message', listener);\n              frame.destroy();\n            }\n          } catch (e) {\n            debug('Error parsing message. May be foreign message, skipping', e);\n          }\n        };\n\n        recurly.bus.on('raw-message', listener);\n      }), new promise__WEBPACK_IMPORTED_MODULE_1___default.a(function (resolve) {\n        setTimeout(function () {\n          resolve(Object(_errors__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('risk-preflight-timeout', {\n            processor: 'worldpay'\n          }));\n        }, PREFLIGHT_TIMEOUT);\n      })]);\n    }\n  }]);\n\n  return WorldpayStrategy;\n}(_strategy__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n_defineProperty(WorldpayStrategy, \"strategyName\", 'worldpay');\n\n\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/strategy/worldpay.js?");

/***/ }),

/***/ "./lib/recurly/risk/three-d-secure/three-d-secure.js":
/*!***********************************************************!*\
  !*** ./lib/recurly/risk/three-d-secure/three-d-secure.js ***!
  \***********************************************************/
/*! exports provided: factory, ThreeDSecure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ThreeDSecure\", function() { return ThreeDSecure; });\n/* harmony import */ var _strategy_adyen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./strategy/adyen */ \"./lib/recurly/risk/three-d-secure/strategy/adyen.js\");\n/* harmony import */ var _strategy_braintree__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strategy/braintree */ \"./lib/recurly/risk/three-d-secure/strategy/braintree.js\");\n/* harmony import */ var _strategy_cybersource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strategy/cybersource */ \"./lib/recurly/risk/three-d-secure/strategy/cybersource.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! promise */ \"./node_modules/promise/index.js\");\n/* harmony import */ var promise__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(promise__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _risk_concern__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../risk-concern */ \"./lib/recurly/risk/risk-concern.js\");\n/* harmony import */ var _strategy_sage_pay__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./strategy/sage-pay */ \"./lib/recurly/risk/three-d-secure/strategy/sage-pay.js\");\n/* harmony import */ var _strategy_stripe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./strategy/stripe */ \"./lib/recurly/risk/three-d-secure/strategy/stripe.js\");\n/* harmony import */ var _strategy_test__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./strategy/test */ \"./lib/recurly/risk/three-d-secure/strategy/test.js\");\n/* harmony import */ var _strategy_wirecard__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./strategy/wirecard */ \"./lib/recurly/risk/three-d-secure/strategy/wirecard.js\");\n/* harmony import */ var _strategy_worldpay__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./strategy/worldpay */ \"./lib/recurly/risk/three-d-secure/strategy/worldpay.js\");\n/* harmony import */ var _strategy_orbital__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./strategy/orbital */ \"./lib/recurly/risk/three-d-secure/strategy/orbital.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:risk:three-d-secure');\n\nfunction factory(options) {\n  return new ThreeDSecure(_objectSpread({\n    risk: this\n  }, options));\n}\n/**\n * 3D Secure 2.0\n *\n * Usage\n *\n * ```\n * const risk = recurly.Risk();\n * const threeDSecure = risk.ThreeDSecure({ actionTokenId: 'my-action-token-id' });\n *\n * threeDSecure.on('token', token => token);\n * threeDSecure.on('error', err => err);\n *\n * threeDSecure.attach(document.querySelector('#my-checkout-3ds-container'));\n * ```\n *\n * @param {Risk} risk\n * @param {String} [actionTokenId] when given, the concern will parse any auth actions\n *                                 necessary to fulfull the action\n */\n\nvar ThreeDSecure = /*#__PURE__*/function (_RiskConcern) {\n  _inherits(ThreeDSecure, _RiskConcern);\n\n  var _super = _createSuper(ThreeDSecure);\n\n  function ThreeDSecure(_ref) {\n    var _this;\n\n    var risk = _ref.risk,\n        actionTokenId = _ref.actionTokenId;\n\n    _classCallCheck(this, ThreeDSecure);\n\n    _this = _super.call(this, {\n      risk: risk\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"concernName\", 'three-d-secure');\n\n    _this.actionTokenId = actionTokenId;\n\n    if (!actionTokenId) {\n      throw Object(_errors__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('invalid-option', {\n        name: 'actionTokenId',\n        expect: 'a three_d_secure_action_token_id'\n      });\n    }\n\n    _this.recurly.request.get({\n      route: \"/tokens/\".concat(actionTokenId)\n    }).catch(function (err) {\n      return _this.error(err);\n    }).then(function (token) {\n      assertIsActionToken(token);\n      _this.strategy = _this.getStrategyForActionToken(token);\n\n      _this.strategy.on('done', function () {\n        var _this2;\n\n        return (_this2 = _this).onStrategyDone.apply(_this2, arguments);\n      });\n\n      _this.markReady();\n    }).catch(function (err) {\n      return _this.error(err);\n    });\n\n    _this.report('create', {\n      actionTokenId: actionTokenId\n    });\n\n    _this.whenReady(function () {\n      return _this.report('ready', {\n        strategy: _this.strategy.strategyName\n      });\n    });\n\n    return _this;\n  }\n  /**\n   * Instructs the strategy to attach, awaiting readiness of the strategy\n   *\n   * @param {HTMLElement} container\n   */\n\n\n  _createClass(ThreeDSecure, [{\n    key: \"attach\",\n    value: function attach(container) {\n      var _this3 = this;\n\n      this.whenReady(function () {\n        _this3.strategy.attach(container);\n\n        _this3.report('attach');\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var _this4 = this;\n\n      this.whenReady(function () {\n        _this4.strategy.remove();\n\n        _this4.report('remove');\n      });\n    }\n    /**\n     * Determines which strategy to employ based on an ThreeDSecureActionToken\n     *\n     * @private\n     * @param {Object} actionToken\n     */\n\n  }, {\n    key: \"getStrategyForActionToken\",\n    value: function getStrategyForActionToken(actionToken) {\n      var strategy = ThreeDSecure.getStrategyForGatewayType(actionToken.gateway.type);\n      return new strategy({\n        threeDSecure: this,\n        actionToken: actionToken\n      });\n    }\n    /**\n     * Creates a ThreeDSecureActionResultToken from action results\n     *\n     * @private\n     * @param {Object} results\n     * @param {Function} done callback\n     * @return {Promise} to create the token\n     */\n\n  }, {\n    key: \"createResultToken\",\n    value: function createResultToken(results) {\n      var data = {\n        type: 'three_d_secure_action_result',\n        three_d_secure_action_token_id: this.actionTokenId,\n        results: results\n      };\n      debug('submitting results for tokenization', data);\n      return this.recurly.request.post({\n        route: '/tokens',\n        data: data\n      });\n    } // Listeners\n\n    /**\n     * Called when a strategy has produced results\n     *\n     * @param {Object} results\n     */\n\n  }, {\n    key: \"onStrategyDone\",\n    value: function onStrategyDone(results) {\n      var _this5 = this;\n\n      this.createResultToken(results).catch(function (cause) {\n        return _this5.error('3ds-result-tokenization-error', {\n          cause: cause\n        });\n      }).then(function (token) {\n        debug('Result token', token);\n\n        _this5.emit('token', token);\n\n        _this5.report('done', {\n          actionResultTokenId: token.id\n        });\n      }).done();\n    }\n  }], [{\n    key: \"getStrategyForGatewayType\",\n    value:\n    /**\n     * Returns a strateggy for a given gateway type\n     *\n     * @param  {String} type\n     * @return {ThreeDSecureStrategy}\n     */\n    function getStrategyForGatewayType(type) {\n      return component_find__WEBPACK_IMPORTED_MODULE_4___default()(ThreeDSecure.STRATEGIES, function (s) {\n        return s.strategyName === type;\n      });\n    }\n    /**\n     * Performs preflight procedures per strategy\n     *\n     * @typedef  {Object} Preflights\n     * @property {Object} gateway\n     * @property {String} gateway.type  e.g. 'worldpay'\n     * @property {Object} params        params required by the strategy\n     *\n     * @param {Recurly}    options.recurly\n     * @param {String}     options.bin         credit card BIN\n     * @param {Preflights} options.preflights\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"preflight\",\n    value: function preflight(_ref2) {\n      var recurly = _ref2.recurly,\n          number = _ref2.number,\n          month = _ref2.month,\n          year = _ref2.year,\n          preflights = _ref2.preflights;\n      return promise__WEBPACK_IMPORTED_MODULE_5___default.a.all(preflights.map(function (preflight) {\n        var type = preflight.gateway.type;\n        var strategy = ThreeDSecure.getStrategyForGatewayType(type);\n        return strategy.preflight(_objectSpread({\n          recurly: recurly,\n          number: number,\n          month: month,\n          year: year\n        }, preflight.params)).then(function (results) {\n          return {\n            processor: type,\n            results: results\n          };\n        });\n      }));\n    }\n  }]);\n\n  return ThreeDSecure;\n}(_risk_concern__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n\n_defineProperty(ThreeDSecure, \"STRATEGIES\", [_strategy_adyen__WEBPACK_IMPORTED_MODULE_0__[\"default\"], _strategy_braintree__WEBPACK_IMPORTED_MODULE_1__[\"default\"], _strategy_cybersource__WEBPACK_IMPORTED_MODULE_2__[\"default\"], _strategy_sage_pay__WEBPACK_IMPORTED_MODULE_7__[\"default\"], _strategy_stripe__WEBPACK_IMPORTED_MODULE_8__[\"default\"], _strategy_test__WEBPACK_IMPORTED_MODULE_9__[\"default\"], _strategy_wirecard__WEBPACK_IMPORTED_MODULE_10__[\"default\"], _strategy_worldpay__WEBPACK_IMPORTED_MODULE_11__[\"default\"], _strategy_orbital__WEBPACK_IMPORTED_MODULE_12__[\"default\"]]);\n\nfunction assertIsActionToken(token) {\n  if (token && token.type === 'three_d_secure_action') return;\n  throw Object(_errors__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('invalid-option', {\n    name: 'actionTokenId',\n    expect: 'a three_d_secure_action_token_id'\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/risk/three-d-secure/three-d-secure.js?");

/***/ }),

/***/ "./lib/recurly/tax.js":
/*!****************************!*\
  !*** ./lib/recurly/tax.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return tax; });\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/**\n * Tax getter\n *\n * Provides a tax estimate for the given tax info.\n *\n * @param {Object} options\n * @param {Object} options.postal_code\n * @param {Object} options.country\n * @param {Object} [options.tax_code]\n * @param {Object} [options.vat_number] Used for VAT exemptions\n * @param {Function} callback\n */\nfunction tax(options, done) {\n  options = _extends({}, options);\n\n  if (typeof done !== 'function') {\n    throw new Error('Missing callback');\n  }\n\n  this.request.get({\n    cached: true,\n    route: '/tax',\n    data: {\n      country: options.country,\n      postal_code: options.postalCode || options.postal_code,\n      tax_code: options.taxCode || options.tax_code,\n      vat_number: options.vatNumber || options.vat_number\n    },\n    done: done\n  });\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/tax.js?");

/***/ }),

/***/ "./lib/recurly/token.js":
/*!******************************!*\
  !*** ./lib/recurly/token.js ***!
  \******************************/
/*! exports provided: FIELDS, tokenDispatcher */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FIELDS\", function() { return FIELDS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tokenDispatcher\", function() { return tokenDispatcher; });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element */ \"./lib/recurly/element/index.js\");\n/* harmony import */ var _elements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./elements */ \"./lib/recurly/elements.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors */ \"./lib/recurly/errors.js\");\n/* harmony import */ var _util_normalize__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/normalize */ \"./lib/util/normalize.js\");\n/* harmony import */ var _risk__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./risk */ \"./lib/recurly/risk/index.js\");\n/* harmony import */ var _util_uid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/uid */ \"./lib/util/uid.js\");\n/* harmony import */ var _validate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./validate */ \"./lib/recurly/validate.js\");\n\n\n\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:token');\n/**\n * Fields that are sent to API.\n *\n * @type {Array}\n * @private\n */\n\n\nvar FIELDS = ['first_name', 'last_name', 'address1', 'address2', 'company', 'country', 'city', 'state', 'postal_code', 'phone', 'vat_number', 'tax_identifier', 'tax_identifier_type', 'fraud_session_id', 'token'];\n/**\n * Parses the token call signature to determine the form of tokenization to perform,\n * then passes the customer data on for tokenization\n *\n * == When tokenizing Elements ==\n *\n * @param {[Elements]} elements An Elements instance containing one tokenizable Element\n * @param {HTMLFormElement|Object} customerData An HTMLFormElement whose children correspond to\n *                                              billing properties via their 'data-recurly'\n *                                              attributes, or an Object containing customer data\n *                                              (see customerData object).\n * @param {Function} done callback\n *\n *\n * == When tokenizing Hosted Fields ==\n *\n * @param {HTMLFormElement} customerData An HTMLFormElement whose children correspond to billing\n *                                       properties via their 'data-recurly' attributes, or an Object\n *                                       containing customer data (see customerData object).\n * @param {Function} done callback\n *\n *\n * == customerData {Object} ==\n *\n * @param {String} [first_name] customer first name\n * @param {String} [last_name] customer last name\n * @param {String} [address1]\n * @param {String} [address2]\n * @param {String} [country]\n * @param {String} [city]\n * @param {String} [state]\n * @param {String|Number} [postal_code]\n * @param {String} [phone]\n * @param {String} [vat_number]\n * @param {String} [tax_identifier]\n * @param {String} [tax_identifier_type]\n */\n\nfunction tokenDispatcher() {\n  var bus, elements, customerData, done; // signature variance\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (args[0] instanceof _elements__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n    elements = args[0];\n    customerData = args[1];\n    done = args[2];\n  } else {\n    customerData = args[0];\n    done = args[1];\n  } // Try to find the implied Elements if given an HTMLFormElement\n\n\n  if (!elements && customerData instanceof HTMLFormElement) {\n    var impliedElement = _element__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findElementInDOMTree(customerData);\n\n    if (impliedElement) {\n      elements = impliedElement.elements;\n    }\n  }\n\n  bus = elements ? elements.bus : this.bus; // Basic validations\n\n  if (!this.configured) {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('not-configured');\n  }\n\n  if (typeof done !== 'function') {\n    throw Object(_errors__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('missing-callback');\n  } // TODO: unified error message for lack of elements and hosted fields within\n  // tokenizing form\n  // We perform this hosted field health check here in order to retain\n  // the generic nature of the token method\n\n\n  if (this.config.parent && !elements && this.hostedFields.errors.length > 0) {\n    throw this.hostedFields.errors[0];\n  }\n\n  customerData = Object(_util_normalize__WEBPACK_IMPORTED_MODULE_3__[\"normalize\"])(customerData, FIELDS, {\n    parseCard: true\n  });\n  return token.call(this, customerData, bus, done);\n}\n/**\n * Generates a token from customer data.\n *\n * The callback signature is `err, response` where `err` is a\n * connection, request, or server error, and `response` is the\n * recurly service response. The generated token is accessed\n * at `response.token`.\n *\n * When using Elements\n *\n * @param {Object} customerData Billing properties\n * @param {Elements} options.elements an Elements instance containing one tokenizable Element\n * @param {HTMLFormElement} [options.form] whose children correspond to billing properties via their\n *                                       'data-recurly' attributes\n *\n * @param {Function} done callback\n *\n *\n * When using Hosted Fields\n *\n * @param {HTMLFormElement} options An HTMLFormElement whose children correspond to billing\n *                                  properties via their 'data-recurly' attributes\n * @param {Function} done callback\n */\n\nfunction token(customerData, bus, done) {\n  var _this = this;\n\n  debug('token');\n  var inputs = customerData.values;\n\n  if (this.config.parent) {\n    inputs.fraud = this.fraud.params(inputs);\n    inputs.browser = _risk__WEBPACK_IMPORTED_MODULE_4__[\"Risk\"].browserInfo;\n    var id = Object(_util_uid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n    this.once(\"token:done:\".concat(id), function (msg) {\n      return complete(msg.err, msg.token);\n    });\n    bus.send('token:init', {\n      id: id,\n      inputs: inputs\n    });\n  } else {\n    var userErrors = Object(_validate__WEBPACK_IMPORTED_MODULE_6__[\"validateCardInputs\"])(this, inputs);\n\n    if (userErrors.length) {\n      return done(Object(_errors__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('validation', {\n        fields: userErrors.map(function (e) {\n          return e.field;\n        }),\n        details: userErrors\n      }));\n    }\n\n    var number = inputs.number,\n        month = inputs.month,\n        year = inputs.year;\n    _risk__WEBPACK_IMPORTED_MODULE_4__[\"Risk\"].preflight({\n      recurly: this,\n      number: number,\n      month: month,\n      year: year\n    }).then(function (results) {\n      return inputs.risk = results;\n    }).then(function () {\n      return _this.request.post({\n        route: '/token',\n        data: inputs,\n        done: complete\n      });\n    }).done();\n  }\n\n  function complete(err, res) {\n    if (err) return done(err);\n\n    if (customerData.fields.token && res.id) {\n      customerData.fields.token.value = res.id;\n    }\n\n    done(null, res);\n  }\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/token.js?");

/***/ }),

/***/ "./lib/recurly/validate.js":
/*!*********************************!*\
  !*** ./lib/recurly/validate.js ***!
  \*********************************/
/*! exports provided: publicMethods, cardNumber, cardType, expiry, cvv, validateCardInputs, validateBankAccountInputs, validateBankRoutingNumber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"publicMethods\", function() { return publicMethods; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cardNumber\", function() { return cardNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cardType\", function() { return cardType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"expiry\", function() { return expiry; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cvv\", function() { return cvv; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateCardInputs\", function() { return validateCardInputs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateBankAccountInputs\", function() { return validateBankAccountInputs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateBankRoutingNumber\", function() { return validateBankRoutingNumber; });\n/* harmony import */ var _token__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./token */ \"./lib/recurly/token.js\");\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-each */ \"./node_modules/component-each/index.js\");\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_each__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component-find */ \"./node_modules/component-find/index.js\");\n/* harmony import */ var component_find__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(component_find__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _util_parse_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/parse-card */ \"./lib/util/parse-card.js\");\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/*jshint -W058 */\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:validate');\n/**\n * Card patterns.\n *\n * @private\n */\n\n\nvar TYPES = [{\n  type: 'discover',\n  pattern: {\n    test: function test(n) {\n      var firstEight = parseInt(n.substr(0, 8), 10);\n      var acceptedRanges = [[60110000, 60110399], [60110500, 60110999], [60112000, 60114999], [60117400, 60117499], [60117700, 60117999], [60118600, 60119999], [64400000, 65059999], [65060100, 65060999], [65061100, 65999999]];\n      if (!/^6[045]/.test(firstEight)) return false;\n      return validBinRange(acceptedRanges, firstEight);\n    }\n  },\n  lengths: [16, 17, 18, 19]\n}, {\n  type: 'union_pay',\n  pattern: {\n    test: function test(n) {\n      var firstEight = parseInt(n.substr(0, 8), 10);\n      var acceptedRanges = [[62109400, 62109499], [62212600, 62292599], [62400000, 62699999], [62820000, 62889999], [81000000, 81099999], [81100000, 81319999], [81320000, 81519999], [81520000, 81639999], [81640000, 81719999]];\n      if (!/^6[2]/.test(firstEight) && !/^8[1]/.test(firstEight)) return false;\n      return validBinRange(acceptedRanges, firstEight);\n    }\n  },\n  lengths: [16, 17, 18, 19]\n}, {\n  type: 'master',\n  pattern: {\n    test: function test(n) {\n      var firstSix = parseInt(n.substr(0, 6), 10);\n      if (/^5[1-5]/.test(n)) return true;\n      if (firstSix >= 222100 && firstSix <= 272099) return true;\n      return false;\n    }\n  },\n  lengths: [16]\n}, {\n  type: 'american_express',\n  pattern: /^3[47]/,\n  lengths: [15]\n}, {\n  type: 'elo',\n  pattern: /^(636368|504175|636297|506[67]\\d\\d)\\d{0,10}$/,\n  lengths: [13, 16]\n}, {\n  type: 'visa',\n  pattern: /^4/,\n  lengths: [13, 16]\n}, {\n  type: 'jcb',\n  pattern: /^35[2-8]\\d/,\n  lengths: [16]\n}, {\n  type: 'diners_club',\n  pattern: /^(30[0-5]|309|36|3[89]|54|55|2014|2149)/,\n  lengths: [14]\n}, {\n  type: 'hipercard',\n  pattern: /^(606282\\d{10}(\\d{3})?)|(3841\\d{15})$/,\n  lengths: [16]\n}, {\n  type: 'tarjeta_naranja',\n  pattern: {\n    test: function test(n) {\n      var firstEight = parseInt(n.substr(0, 8), 10);\n      var acceptedRanges = [[58956200, 58956299]];\n      return validBinRange(acceptedRanges, firstEight);\n    }\n  },\n  lengths: [16, 17, 18, 19]\n}];\n/**\n * Validates bin ranges for supported card types\n *\n * @private\n */\n\nfunction validBinRange(acceptedRanges, firstEight) {\n  for (var index = 0; index < acceptedRanges.length; index++) {\n    var _acceptedRanges$index = _slicedToArray(acceptedRanges[index], 2),\n        min = _acceptedRanges$index[0],\n        max = _acceptedRanges$index[1];\n\n    if (firstEight <= max && firstEight >= min) return true;\n  }\n\n  return false;\n}\n/**\n * Validation error messages\n * @type {String}\n * @private\n */\n\n\nvar INVALID = 'is invalid';\nvar BLANK = \"can't be blank\";\nvar DOES_NOT_MATCH = 'does not match';\n/**\n * Fields required by bank account tokenization\n * @type {Array}\n */\n\nvar BANK_ACCOUNT_REQUIRED_FIELDS = ['account_number', 'account_number_confirmation', 'routing_number', 'account_type', 'name_on_account', 'country'];\n/**\n * Fields required by IBAN bank account tokenization\n * @type {Array}\n */\n\nvar IBAN_BANK_ACCOUNT_REQUIRED_FIELDS = ['iban', 'name_on_account'];\n/**\n * Fields required by Bacs bank account tokenization\n * @type {Array}\n */\n\nvar BACS_BANK_ACCOUNT_REQUIRED_FIELDS = ['name_on_account', 'sort_code', 'account_number', 'account_number_confirmation'];\n/**\n * Fields required by BECS bank account tokenization\n * @type {Array}\n */\n\nvar BECS_BANK_ACCOUNT_REQUIRED_FIELDS = ['account_number', 'account_number_confirmation', 'name_on_account', 'bsb_code'];\nvar publicMethods = {\n  cardNumber: cardNumber,\n  cardType: cardType,\n  expiry: expiry,\n  cvv: cvv\n};\n/**\n * Validates a credit card number via length check and luhn algorithm.\n *\n * @param {Number|String} number The card number.\n * @return {Boolean}\n * @see https://sites.google.com/site/abapexamples/javascript/luhn-validation\n */\n\nfunction cardNumber(number) {\n  var str = Object(_util_parse_card__WEBPACK_IMPORTED_MODULE_3__[\"parseCard\"])(number);\n  var ca,\n      sum = 0,\n      mul = 1;\n  var i = str.length;\n  if (i < 12 || i > 19) return false;\n\n  while (i--) {\n    ca = parseInt(str.charAt(i), 10) * mul;\n    sum += ca - (ca > 9) * 9;\n    mul ^= 3;\n  }\n\n  return sum % 10 === 0 && sum > 0;\n}\n/**\n * Returns the type of the card number as a string.\n *\n * @param {Number|String} number The card number\n * @param {Boolean} partial detect card type on a partial (incomplete) number\n * @return {String} card type\n */\n\nfunction cardType(number) {\n  var partial = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var str = Object(_util_parse_card__WEBPACK_IMPORTED_MODULE_3__[\"parseCard\"])(number);\n  var len = str.length;\n  var card = component_find__WEBPACK_IMPORTED_MODULE_2___default()(TYPES, function (card) {\n    return card.pattern.test(str) && (partial || ~card.lengths.indexOf(len));\n  });\n  return card && card.type || 'unknown';\n}\n/**\n * Validates whether an expiry month is present or future.\n *\n * @param {Number|String} month The 2 digit month\n * @param {Number|String} year The 2 or 4 digit year\n * @return {Boolean}\n */\n\nfunction expiry(month, year) {\n  month = Number(month) - 1;\n  if (month < 0 || month > 11) return false;\n  year = Number(year);\n  year += year < 100 ? 2000 : 0;\n  var expiry = new Date();\n  expiry.setYear(year);\n  expiry.setDate(1);\n  expiry.setHours(0);\n  expiry.setMinutes(0);\n  expiry.setSeconds(0);\n  expiry.setMonth(month + 1);\n  return new Date() < expiry;\n}\n/**\n * Validates whether a number looks like a cvv.\n *\n * e.g.: '123', '0321'\n *\n * @param {Number|String} number The card verification value\n * @return {Boolean}\n */\n\nfunction cvv(number) {\n  number = String(number).trim();\n  if (!~[3, 4].indexOf(number.length)) return false;\n  return /^\\d+$/.test(number);\n}\n/**\n * Checks user input on a card token call\n *\n * @param {Recurly} recurly\n * @param {Object} inputs\n * @return {Array} formatted array of invalid fields with descriptive messages\n */\n\nfunction validateCardInputs(recurly, inputs) {\n  var format = formatFieldValidationError;\n  var errors = [];\n\n  if (!cardNumber(inputs.number)) {\n    errors.push(format('number', INVALID));\n  }\n\n  if (!expiry(inputs.month, inputs.year)) {\n    errors.push(format('month', INVALID), format('year', INVALID));\n  }\n\n  if (!inputs.first_name) {\n    errors.push(format('first_name', BLANK));\n  }\n\n  if (!inputs.last_name) {\n    errors.push(format('last_name', BLANK));\n  }\n\n  if (~recurly.config.required.indexOf('cvv') && !inputs.cvv) {\n    errors.push(format('cvv', BLANK));\n  } else if ((~recurly.config.required.indexOf('cvv') || inputs.cvv) && !cvv(inputs.cvv)) {\n    errors.push(format('cvv', INVALID));\n  }\n\n  component_each__WEBPACK_IMPORTED_MODULE_1___default()(recurly.config.required, function (field) {\n    if (!inputs[field] && ~_token__WEBPACK_IMPORTED_MODULE_0__[\"FIELDS\"].indexOf(field)) {\n      errors.push(format(field, BLANK));\n    }\n  });\n  debug('validate errors', errors);\n  return errors;\n}\n/**\n * Checks user input on a bank account token call\n *\n * @param {Object} inputs\n * @return {Array} formatted array of invalid fields with descriptive messages\n */\n\nfunction validateBankAccountInputs(inputs) {\n  var format = formatFieldValidationError;\n  var required = [];\n  var errors = [];\n\n  if ('iban' in inputs) {\n    required = IBAN_BANK_ACCOUNT_REQUIRED_FIELDS;\n  } else if (inputs.type === 'bacs') {\n    required = BACS_BANK_ACCOUNT_REQUIRED_FIELDS;\n    accountNumberMatches(inputs, errors);\n  } else if (inputs.type === 'becs') {\n    required = BECS_BANK_ACCOUNT_REQUIRED_FIELDS;\n    accountNumberMatches(inputs, errors);\n  } else {\n    required = BANK_ACCOUNT_REQUIRED_FIELDS;\n    accountNumberMatches(inputs, errors);\n  }\n\n  required.forEach(function (name) {\n    if (!inputs[name]) {\n      errors.push(format(name, BLANK));\n    } else if (typeof inputs[name] !== 'string') {\n      errors.push(format(name, INVALID));\n    }\n  });\n  debug('bank account validate errors', errors);\n  return errors;\n}\n/**\n * Validates a bank account routing number\n * @param  {[type]} routingNumber\n * @return {Array} formatted array of invalid fields with descriptive messages\n */\n\nfunction validateBankRoutingNumber(routingNumber) {\n  var errors = [];\n\n  if (!routingNumber) {\n    errors.push(formatFieldValidationError('routing_number', BLANK));\n  } else if (typeof routingNumber !== 'string') {\n    errors.push(formatFieldValidationError('routing_number', INVALID));\n  }\n\n  debug('validate errors', errors);\n  return errors;\n}\n/**\n * Formats a field validation error\n *\n * @param {string} field\n * @param {String} message\n * @return {Object}\n */\n\nfunction formatFieldValidationError(field, message) {\n  return {\n    field: field,\n    messages: [message]\n  };\n}\n\nfunction accountNumberMatches(inputs, errors) {\n  var format = formatFieldValidationError;\n\n  if (inputs.account_number !== inputs.account_number_confirmation) {\n    errors.push(format('account_number_confirmation', DOES_NOT_MATCH));\n  }\n}\n\n//# sourceURL=webpack://recurly/./lib/recurly/validate.js?");

/***/ }),

/***/ "./lib/recurly/venmo/index.js":
/*!************************************!*\
  !*** ./lib/recurly/venmo/index.js ***!
  \************************************/
/*! exports provided: factory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _strategy_braintree__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strategy/braintree */ \"./lib/recurly/venmo/strategy/braintree.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n/**\n * Venmo instantiation factory\n *\n * @param {Object} options\n * @return {Venmo}\n */\n\nfunction factory(options) {\n  options = _extends({}, options, {\n    recurly: this\n  });\n  return new Venmo(options);\n}\nvar DEFERRED_EVENTS = ['ready', 'token', 'error', 'cancel'];\n/**\n * Venmo strategy interface\n */\n\nvar Venmo = /*#__PURE__*/function (_Emitter) {\n  _inherits(Venmo, _Emitter);\n\n  var _super = _createSuper(Venmo);\n\n  function Venmo(options) {\n    var _this;\n\n    _classCallCheck(this, Venmo);\n\n    _this = _super.call(this);\n    _this.isReady = false;\n    _this.options = options;\n\n    _this.once('ready', function () {\n      return _this.isReady = true;\n    });\n\n    _this.strategy = new _strategy_braintree__WEBPACK_IMPORTED_MODULE_1__[\"BraintreeStrategy\"](options);\n\n    _this.bindStrategy();\n\n    return _this;\n  }\n\n  _createClass(Venmo, [{\n    key: \"ready\",\n    value: function ready(done) {\n      if (this.isReady) done();else this.once('ready', done);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this$strategy;\n\n      return (_this$strategy = this.strategy).start.apply(_this$strategy, arguments);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var strategy = this.strategy;\n\n      if (strategy) {\n        strategy.destroy();\n        delete this.strategy;\n      }\n\n      this.off();\n    }\n    /**\n     * Binds external interface events to those on the strategy\n     *\n     * @private\n     */\n\n  }, {\n    key: \"bindStrategy\",\n    value: function bindStrategy() {\n      var _this2 = this;\n\n      DEFERRED_EVENTS.forEach(function (ev) {\n        return _this2.strategy.on(ev, _this2.emit.bind(_this2, ev));\n      });\n    }\n  }]);\n\n  return Venmo;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n//# sourceURL=webpack://recurly/./lib/recurly/venmo/index.js?");

/***/ }),

/***/ "./lib/recurly/venmo/strategy/braintree.js":
/*!*************************************************!*\
  !*** ./lib/recurly/venmo/strategy/braintree.js ***!
  \*************************************************/
/*! exports provided: BRAINTREE_CLIENT_VERSION, BraintreeStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BRAINTREE_CLIENT_VERSION\", function() { return BRAINTREE_CLIENT_VERSION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BraintreeStrategy\", function() { return BraintreeStrategy; });\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! load-script */ \"./node_modules/load-script/index.js\");\n/* harmony import */ var load_script__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(load_script__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_after__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../util/after */ \"./lib/util/after.js\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./lib/recurly/venmo/strategy/index.js\");\n/* harmony import */ var _util_normalize__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../util/normalize */ \"./lib/util/normalize.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\nvar BRAINTREE_CLIENT_VERSION = '3.76.0';\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:paypal:strategy:braintree');\n/**\n * Braintree-specific Venmo handler\n */\n\n\nvar BraintreeStrategy = /*#__PURE__*/function (_VenmoStrategy) {\n  _inherits(BraintreeStrategy, _VenmoStrategy);\n\n  var _super = _createSuper(BraintreeStrategy);\n\n  function BraintreeStrategy() {\n    var _this;\n\n    _classCallCheck(this, BraintreeStrategy);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call(this, args);\n\n    _this.load(args[0]);\n\n    return _this;\n  }\n\n  _createClass(BraintreeStrategy, [{\n    key: \"configure\",\n    value: function configure(options) {\n      _get(_getPrototypeOf(BraintreeStrategy.prototype), \"configure\", this).call(this, options);\n\n      if (!options.braintree || !options.braintree.clientAuthorization) {\n        throw this.error('venmo-config-missing', {\n          opt: 'braintree.clientAuthorization'\n        });\n      }\n\n      this.config.clientAuthorization = options.braintree.clientAuthorization;\n    }\n    /**\n     * Loads Braintree client and modules\n     *\n     * @todo semver client detection\n     */\n\n  }, {\n    key: \"load\",\n    value: function load(_ref) {\n      var _this2 = this;\n\n      var form = _ref.form;\n      debug('loading Braintree libraries');\n      this.form = form;\n      var part = Object(_util_after__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(2, function () {\n        return _this2.initialize();\n      });\n\n      var get = function get(lib) {\n        var done = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n        var uri = \"https://js.braintreegateway.com/web/\".concat(BRAINTREE_CLIENT_VERSION, \"/js/\").concat(lib, \".min.js\");\n        load_script__WEBPACK_IMPORTED_MODULE_0___default()(uri, function (error) {\n          if (error) _this2.error('venmo-load-error', {\n            cause: error\n          });else done();\n        });\n      };\n\n      var modules = function modules() {\n        if (_this2.braintreeClientAvailable('venmo')) part();else get('venmo', part);\n        if (_this2.braintreeClientAvailable('dataCollector')) part();else get('data-collector', part);\n      };\n\n      if (this.braintreeClientAvailable()) modules();else get('client', modules);\n    }\n    /**\n     * Initializes a Braintree client, device data collection module, and venmo client\n     */\n\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this3 = this;\n\n      debug('Initializing Braintree client');\n      var authorization = this.config.clientAuthorization;\n      var braintree = window.braintree;\n      braintree.client.create({\n        authorization: authorization\n      }, function (error, client) {\n        if (error) return _this3.fail('venmo-braintree-api-error', {\n          cause: error\n        });\n        debug('Braintree client created');\n        braintree.venmo.create({\n          client: client,\n          allowDesktop: true\n        }, function (error, venmo) {\n          if (error) return _this3.fail('venmo-braintree-api-error', {\n            cause: error\n          });\n          debug('Venmo client created');\n          _this3.venmo = venmo;\n\n          _this3.emit('ready');\n        });\n      });\n    }\n  }, {\n    key: \"handleVenmoError\",\n    value: function handleVenmoError(err) {\n      if (err.code === 'VENMO_CANCELED') {\n        console.log('App is not available or user aborted payment flow');\n      } else if (err.code === 'VENMO_APP_CANCELED') {\n        if (err.code === 'VENMO_POPUP_CLOSED') console.log('User canceled payment flow');\n      } else {\n        console.error('An error occurred:', err.message);\n      }\n\n      this.emit('cancel');\n      return this.error('venmo-braintree-tokenize-braintree-error', {\n        cause: err\n      });\n    }\n  }, {\n    key: \"handleVenmoSuccess\",\n    value: function handleVenmoSuccess(payload) {\n      var _this4 = this;\n\n      var nameData = Object(_util_normalize__WEBPACK_IMPORTED_MODULE_3__[\"normalize\"])(this.form, ['first_name', 'last_name']);\n      this.recurly.request.post({\n        route: '/venmo/token',\n        data: {\n          type: 'braintree',\n          payload: _objectSpread(_objectSpread({}, payload), nameData)\n        },\n        done: function done(error, token) {\n          if (error) return _this4.error('venmo-braintree-tokenize-recurly-error', {\n            cause: error\n          });\n\n          _this4.emit('token', token);\n        }\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      // Tokenize with Braintree\n      this.venmo.tokenize().then(this.handleVenmoSuccess.bind(this)).catch(this.handleVenmoError.bind(this));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.close) {\n        this.close();\n      }\n\n      this.off();\n    }\n  }, {\n    key: \"braintreeClientAvailable\",\n    value: function braintreeClientAvailable(module) {\n      var bt = window.braintree;\n      return bt && bt.client && bt.client.VERSION === BRAINTREE_CLIENT_VERSION && (module ? module in bt : true);\n    }\n  }]);\n\n  return BraintreeStrategy;\n}(_index__WEBPACK_IMPORTED_MODULE_2__[\"VenmoStrategy\"]);\n\n//# sourceURL=webpack://recurly/./lib/recurly/venmo/strategy/braintree.js?");

/***/ }),

/***/ "./lib/recurly/venmo/strategy/index.js":
/*!*********************************************!*\
  !*** ./lib/recurly/venmo/strategy/index.js ***!
  \*********************************************/
/*! exports provided: VenmoStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VenmoStrategy\", function() { return VenmoStrategy; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _recurly__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../recurly */ \"./lib/recurly.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../errors */ \"./lib/recurly/errors.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:paypal:strategy');\n/**\n * Venmo base interface strategy\n *\n * @abstract\n */\n\n\nvar VenmoStrategy = /*#__PURE__*/function (_Emitter) {\n  _inherits(VenmoStrategy, _Emitter);\n\n  var _super = _createSuper(VenmoStrategy);\n\n  function VenmoStrategy(options) {\n    var _this;\n\n    _classCallCheck(this, VenmoStrategy);\n\n    _this = _super.call(this);\n    _this.isReady = false;\n    _this.config = {};\n\n    _this.once('ready', function () {\n      return _this.isReady = true;\n    });\n\n    _this.configure(options[0]);\n\n    return _this;\n  }\n\n  _createClass(VenmoStrategy, [{\n    key: \"ready\",\n    value: function ready(done) {\n      if (this.isReady) done();else this.once('ready', done);\n    }\n  }, {\n    key: \"configure\",\n    value: function configure(options) {\n      if (!(options.recurly instanceof _recurly__WEBPACK_IMPORTED_MODULE_1__[\"Recurly\"])) throw this.error('venmo-factory-only');\n      this.recurly = options.recurly;\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      debug(\"Method 'initialize' not implemented\");\n    }\n    /**\n     * Starts the PayPal flow\n     * > must be on the call chain with a user interaction (click, touch) on it\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      debug(\"Method 'start' not implemented\");\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.emit('cancel');\n    }\n    /**\n     * Registers or immediately invokes a failure handler\n     *\n     * @param {Function} done Failure handler\n     */\n\n  }, {\n    key: \"onFail\",\n    value: function onFail(done) {\n      if (this.failure) done();else this.once('fail', done);\n    }\n    /**\n     * Logs and announces a failure to initialize a strategy\n     *\n     * @private\n     * @param  {String} reason\n     * @param  {Object} [options]\n     */\n\n  }, {\n    key: \"fail\",\n    value: function fail(reason, options) {\n      if (this.failure) return;\n      debug('Failure scenario encountered', reason, options);\n      var failure = this.failure = this.error(reason, options);\n      this.emit('fail', failure);\n    }\n    /**\n     * Creates and emits a RecurlyError\n     *\n     * @protected\n     * @param  {...Mixed} params to be passed to the Recurlyerror factory\n     * @return {RecurlyError}\n     * @emit 'error'\n     */\n\n  }, {\n    key: \"error\",\n    value: function error() {\n      var err = (arguments.length <= 0 ? undefined : arguments[0]) instanceof Error ? arguments.length <= 0 ? undefined : arguments[0] : _errors__WEBPACK_IMPORTED_MODULE_2__[\"default\"].apply(void 0, arguments);\n      this.emit('error', err);\n      return err;\n    }\n    /**\n     * Updates price information from a Pricing instance\n     *\n     * @private\n     */\n\n  }, {\n    key: \"updatePriceFromPricing\",\n    value: function updatePriceFromPricing() {\n      this.config.display.amount = this.pricing.totalNow;\n      this.config.display.currency = this.pricing.currencyCode;\n    }\n  }]);\n\n  return VenmoStrategy;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n//# sourceURL=webpack://recurly/./lib/recurly/venmo/strategy/index.js?");

/***/ }),

/***/ "./lib/recurly/version.js":
/*!********************************!*\
  !*** ./lib/recurly/version.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * Current package/component version.\n */\nmodule.exports = '4.19.1';\n\n//# sourceURL=webpack://recurly/./lib/recurly/version.js?");

/***/ }),

/***/ "./lib/recurly/worker.js":
/*!*******************************!*\
  !*** ./lib/recurly/worker.js ***!
  \*******************************/
/*! exports provided: IntervalWorker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IntervalWorker\", function() { return IntervalWorker; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar DEFAULT_PERIOD = 30000; // 30 seconds\n\nvar IntervalWorker = /*#__PURE__*/function () {\n  function IntervalWorker() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$period = _ref.period,\n        period = _ref$period === void 0 ? DEFAULT_PERIOD : _ref$period,\n        perform = _ref.perform;\n\n    _classCallCheck(this, IntervalWorker);\n\n    if (typeof perform !== 'function') throw new Error('Invalid perform function');\n    this.active = false;\n    this.jobId = 0;\n    this.tick = this.tick.bind(this);\n    this.period = period;\n    this.perform = perform;\n    this._intervalId = setInterval(this.tick, this.period);\n    window.addEventListener('beforeunload', this.tick);\n  }\n\n  _createClass(IntervalWorker, [{\n    key: \"start\",\n    value: function start() {\n      this.guard();\n      this.active = true;\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.guard();\n      this.active = false;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.pause();\n      clearInterval(this._intervalId);\n      delete this._intervalId;\n      window.removeEventListener('beforeunload', this.tick);\n    } // Private\n\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      if (!this.active) return;\n\n      try {\n        this.perform({\n          jobId: this.jobId\n        });\n      } finally {\n        this.jobId++;\n      }\n    }\n  }, {\n    key: \"guard\",\n    value: function guard() {\n      if (typeof this._intervalId === 'number') return;\n      throw new Error('This Worker has been destroyed and can no longer be used');\n    }\n  }]);\n\n  return IntervalWorker;\n}();\n\n//# sourceURL=webpack://recurly/./lib/recurly/worker.js?");

/***/ }),

/***/ "./lib/util/after.js":
/*!***************************!*\
  !*** ./lib/util/after.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return after; });\n/**\n * Returns a function which calls the callback after x calls\n *\n * @param  {Number} count\n * @param  {Function} done\n * @return {Function}\n */\nfunction after() {\n  var count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var done = arguments.length > 1 ? arguments[1] : undefined;\n  var i = 0;\n  return function () {\n    return i++ && i === count && done();\n  };\n}\n\n//# sourceURL=webpack://recurly/./lib/util/after.js?");

/***/ }),

/***/ "./lib/util/decimalize-member.js":
/*!***************************************!*\
  !*** ./lib/util/decimalize-member.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return decimalizeMember; });\n/* harmony import */ var _decimalize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./decimalize */ \"./lib/util/decimalize.js\");\n\n/**\n * Applies a decimal transform on an object's member\n *\n * @param {String} prop Property on {this} to transform\n * @this {Object} on which to apply decimal transformation\n */\n\nfunction decimalizeMember(prop) {\n  if (typeof this[prop] !== 'number') return;\n  this[prop] = Object(_decimalize__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this[prop]);\n}\n\n//# sourceURL=webpack://recurly/./lib/util/decimalize-member.js?");

/***/ }),

/***/ "./lib/util/decimalize.js":
/*!********************************!*\
  !*** ./lib/util/decimalize.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return decimalize; });\n/**\n * Applies a decimal transform\n *\n * @param {Number} number to transform\n */\nfunction decimalize(number) {\n  return (Math.round(number * 100) / 100).toFixed(2);\n}\n\n//# sourceURL=webpack://recurly/./lib/util/decimalize.js?");

/***/ }),

/***/ "./lib/util/deep-assign.js":
/*!*********************************!*\
  !*** ./lib/util/deep-assign.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return deepAssign; });\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/**\n * Deep Object.assign\n *\n * @param target\n * @param ...sources\n */\nfunction deepAssign(target) {\n  for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    sources[_key - 1] = arguments[_key];\n  }\n\n  if (!sources.length) return target;\n  var source = sources.shift();\n\n  if (isAssignableObject(target) && isAssignableObject(source)) {\n    for (var key in source) {\n      if (isAssignableObject(source[key])) {\n        if (!target[key]) _extends(target, _defineProperty({}, key, {}));\n        deepAssign(target[key], source[key]);\n      } else {\n        _extends(target, _defineProperty({}, key, source[key]));\n      }\n    }\n  }\n\n  return deepAssign.apply(void 0, [target].concat(sources));\n}\n\nfunction isAssignableObject(item) {\n  return item && _typeof(item) === 'object' && !Array.isArray(item) && !(item instanceof Node);\n}\n\n//# sourceURL=webpack://recurly/./lib/util/deep-assign.js?");

/***/ }),

/***/ "./lib/util/dom.js":
/*!*************************!*\
  !*** ./lib/util/dom.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * dependencies\n */\nvar slug = __webpack_require__(/*! to-slug-case */ \"./node_modules/to-slug-case/index.js\");\n\nvar each = __webpack_require__(/*! component-each */ \"./node_modules/component-each/index.js\");\n/**\n * expose\n */\n\n\nmodule.exports = {\n  createHiddenInput: createHiddenInput,\n  data: data,\n  element: element,\n  findNodeInParents: findNodeInParents,\n  value: value\n};\n/**\n * Detects whether an object is an html element.\n *\n * @param {HTMLElement|jQuery|String} node\n * @return {HTMLElement|Boolean} node\n */\n\nfunction element(node) {\n  var jQuery = window.jQuery;\n  var isJQuery = jQuery && node instanceof jQuery;\n  var isElem;\n  if (isJQuery || Array.isArray(node)) node = node[0];\n  if (typeof node === 'string') node = window.document.querySelector(node);\n\n  if (!node) {\n    return false;\n  }\n\n  if (typeof HTMLElement !== 'undefined') {\n    isElem = node instanceof HTMLElement;\n  } else {\n    isElem = node.nodeType === 1;\n  }\n\n  return isElem && node;\n}\n/**\n * Gets or sets the value of a given HTML form element\n *\n * supports text inputs, radio inputs, and selects\n *\n * @param {HTMLElement} node\n * @return {String} val value of the element\n */\n\n\nfunction value(node, val) {\n  if (!element(node)) return null;\n\n  if (typeof val !== 'undefined') {\n    return valueSet(node, val);\n  } else {\n    return valueGet(node);\n  }\n}\n/**\n * Gets an HTMLElement's value property in the context of a form\n *\n * @private\n * @param {HTMLElement} node\n * @return {String} node's value\n */\n\n\nfunction valueGet(node) {\n  node = element(node);\n  var nodeType = node && node.type && node.type.toLowerCase();\n  var value;\n\n  if (!nodeType) {\n    value = '';\n  } else if ('options' in node) {\n    var option = node.options[node.selectedIndex] || node.options[0] || {\n      value: ''\n    };\n    value = option.value;\n  } else if (nodeType === 'checkbox') {\n    if (node.checked) value = node.value;\n  } else if (nodeType === 'radio') {\n    var radios = document.querySelectorAll('input[data-recurly=\"' + data(node, 'recurly') + '\"]');\n    each(radios, function (radio) {\n      if (radio.checked) value = radio.value;\n    });\n  } else if ('value' in node) {\n    value = node.value;\n  }\n\n  return value;\n}\n/**\n * Updates an element's value property if\n * one exists; else innerText if it exists\n *\n * @private\n * @param {Array[HTMLElement]} nodes\n * @param {Mixed} value\n */\n\n\nfunction valueSet(nodes, value) {\n  if (!Array.isArray(nodes)) nodes = [nodes];\n  each(nodes, function (node) {\n    if (!node) return;else if ('value' in node) node.value = value;else if ('textContent' in node) node.textContent = value;else if ('innerText' in node) node.innerText = value;\n  });\n}\n/**\n * Gets or sets a node's data attribute\n *\n * @param {HTMLElement} node\n * @param {String} key\n * @param {Mixed} [value]\n * @return {String} value\n */\n\n\nfunction data(node, key, value) {\n  node = element(node);\n  if (!node) return;\n\n  if (typeof value !== 'undefined') {\n    return dataSet(node, key, value);\n  } else {\n    return dataGet(node, key);\n  }\n}\n/**\n * Gets a node's data attribute\n *\n * @private\n * @param {HTMLElement} node\n * @param {String} key\n * @return {String} attribute value\n */\n\n\nfunction dataGet(node, key) {\n  if (node.dataset) {\n    return node.dataset[key];\n  } else {\n    return node.getAttribute('data-' + slug(key));\n  }\n}\n/**\n * sets a node's data attribute\n *\n * @private\n * @param {HTMLElement} node\n * @param {String} key\n * @param {Mixed} value\n * @return {String} value\n */\n\n\nfunction dataSet(node, key, value) {\n  if (node.dataset) {\n    node.dataset[key] = value;\n  } else {\n    node.setAttribute('data-' + slug(key), value);\n  }\n\n  return '' + value;\n}\n/**\n * take an html node and find a parent node with a target tag name\n * example tag names: 'div', 'form'\n *\n * @param  {HTMLElement} node\n * @param  {String} targetTagName the name of the target element type\n * @return {HTMLElement} the found node if available\n */\n\n\nfunction findNodeInParents(node, targetTagName) {\n  node = element(node);\n  if (!node) return null;\n  if (node.tagName.match(RegExp(targetTagName, 'i'))) return node;\n  return findNodeInParents(node.parentNode, targetTagName);\n}\n/**\n * Create a hidden input element\n *\n * @return {InputElement}\n */\n\n\nfunction createHiddenInput() {\n  var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var inputType = 'input';\n\n  if (~['button', 'select'].indexOf(attributes.type)) {\n    inputType = attributes.type;\n    delete attributes.type;\n  }\n\n  var hidden = window.document.createElement(inputType);\n  if (!('type' in attributes)) attributes.type = 'text';\n  if (!('style' in attributes)) attributes.style = 'position: absolute; top: 0px; left: -1000px; opacity: 0;';\n  attributes['aria-hidden'] = true;\n  Object.keys(attributes).forEach(function (attr) {\n    return hidden.setAttribute(attr, attributes[attr]);\n  });\n  return hidden;\n}\n\n//# sourceURL=webpack://recurly/./lib/util/dom.js?");

/***/ }),

/***/ "./lib/util/flatten.js":
/*!*****************************!*\
  !*** ./lib/util/flatten.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return flatten; });\n/**\n * Flattens an array from any dimension to 1D\n *\n * @param  {Array} arr\n * @return {Array} flattened array\n */\nfunction flatten(arr) {\n  return arr.reduce(function (flat, toFlatten) {\n    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n  }, []);\n}\n\n//# sourceURL=webpack://recurly/./lib/util/flatten.js?");

/***/ }),

/***/ "./lib/util/group-by.js":
/*!******************************!*\
  !*** ./lib/util/group-by.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return groupBy; });\n/**\n * Reduces an array into a object whose keys\n * correspond to the value returned by the iteratee function\n *\n * @param  {array}    set      array to group\n * @param  {Function} iteratee returns the value upon which to group\n * @return {Object}            { [iteratee[item]]: [items...], ... }\n */\nfunction groupBy(set) {\n  var iteratee = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (v) {\n    return v;\n  };\n  return set.reduce(function (acc, item) {\n    var reductionKey = iteratee(item);\n    (acc[reductionKey] = acc[reductionKey] || []).push(item);\n    return acc;\n  }, {});\n}\n\n//# sourceURL=webpack://recurly/./lib/util/group-by.js?");

/***/ }),

/***/ "./lib/util/normalize.js":
/*!*******************************!*\
  !*** ./lib/util/normalize.js ***!
  \*******************************/
/*! exports provided: normalize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"normalize\", function() { return normalize; });\n/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom */ \"./lib/util/dom.js\");\n/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_dom__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component-each */ \"./node_modules/component-each/index.js\");\n/* harmony import */ var component_each__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(component_each__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _util_parse_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/parse-card */ \"./lib/util/parse-card.js\");\n\n\n\n/**\n * Parses options out of a form element and normalizes according to an allowlist.\n *\n * @param {Object|HTMLFormElement} input\n * @param {Array} allowlist of field names\n * @param {Object} [options]\n * @param {Boolean} [options.parseCard] whether to parse the card number value\n * @return {Object}\n */\n\nfunction normalize(input, allowlist) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var data = {\n    fields: {},\n    values: {}\n  };\n  var el = _dom__WEBPACK_IMPORTED_MODULE_0___default.a.element(input);\n\n  if (el && 'form' === el.nodeName.toLowerCase()) {\n    component_each__WEBPACK_IMPORTED_MODULE_1___default()(el.querySelectorAll('[data-recurly]'), function (field) {\n      var name = _dom__WEBPACK_IMPORTED_MODULE_0___default.a.data(field, 'recurly');\n\n      if (~allowlist.indexOf(name)) {\n        data.fields[name] = field;\n        data.values[name] = _dom__WEBPACK_IMPORTED_MODULE_0___default.a.value(field);\n      }\n    });\n  } else {\n    data.values = input;\n  }\n\n  if (options.parseCard) {\n    data.values.number = Object(_util_parse_card__WEBPACK_IMPORTED_MODULE_2__[\"parseCard\"])(data.values.number);\n  }\n\n  return data;\n}\n\n//# sourceURL=webpack://recurly/./lib/util/normalize.js?");

/***/ }),

/***/ "./lib/util/parse-card.js":
/*!********************************!*\
  !*** ./lib/util/parse-card.js ***!
  \********************************/
/*! exports provided: parseCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseCard\", function() { return parseCard; });\n/**\n * Removes dashes and spaces from a card number.\n *\n * @param {Number|String} number\n * @return {String} parsed card number\n */\nfunction parseCard(number) {\n  return (number || '').toString().replace(/[-\\s]/g, '');\n}\n\n//# sourceURL=webpack://recurly/./lib/util/parse-card.js?");

/***/ }),

/***/ "./lib/util/readiness-emitter.js":
/*!***************************************!*\
  !*** ./lib/util/readiness-emitter.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ReadinessEmitter; });\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! component-emitter */ \"./node_modules/component-emitter/index.js\");\n/* harmony import */ var component_emitter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(component_emitter__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nvar ReadinessEmitter = /*#__PURE__*/function (_Emitter) {\n  _inherits(ReadinessEmitter, _Emitter);\n\n  var _super = _createSuper(ReadinessEmitter);\n\n  function ReadinessEmitter() {\n    var _this;\n\n    _classCallCheck(this, ReadinessEmitter);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"_ready\", false);\n\n    return _this;\n  }\n\n  _createClass(ReadinessEmitter, [{\n    key: \"whenReady\",\n    value:\n    /**\n     * Calls the callback when the instance is marked as ready\n     *\n     * @param  {Function} callback\n     */\n    function whenReady(callback) {\n      var _ready = this._ready;\n      if (_ready) callback();else this.once('ready', callback);\n    }\n    /**\n     * Marks the instance as ready\n     * @return {[type]} [description]\n     */\n\n  }, {\n    key: \"markReady\",\n    value: function markReady() {\n      this._ready = true;\n      this.emit('ready');\n    }\n  }]);\n\n  return ReadinessEmitter;\n}(component_emitter__WEBPACK_IMPORTED_MODULE_0___default.a);\n\n\n\n//# sourceURL=webpack://recurly/./lib/util/readiness-emitter.js?");

/***/ }),

/***/ "./lib/util/tax-round.js":
/*!*******************************!*\
  !*** ./lib/util/tax-round.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return taxRound; });\n/**\n * Round the second decimal of a number without risk of\n * floating point math errors\n *\n * - returns zero if the result is negative\n *\n * @param {Number} number\n * @return {Number}\n */\nfunction taxRound(number) {\n  number = Math.max(number, 0);\n  return +((number < 0 ? -1 : 1) * Math.round(Math.abs(number) + 'e+2') + 'e-2');\n}\n\n//# sourceURL=webpack://recurly/./lib/util/tax-round.js?");

/***/ }),

/***/ "./lib/util/uid.js":
/*!*************************!*\
  !*** ./lib/util/uid.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return uid; });\n/* harmony import */ var nanoid_generate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid/generate */ \"./node_modules/nanoid/generate.js\");\n/* harmony import */ var nanoid_generate__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nanoid_generate__WEBPACK_IMPORTED_MODULE_0__);\n\nvar CHARSET = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n/**\n * returns a new nanoid according to our charset\n *\n * @return {String}\n */\n\nfunction uid() {\n  return nanoid_generate__WEBPACK_IMPORTED_MODULE_0___default()(CHARSET, 16);\n}\n\n//# sourceURL=webpack://recurly/./lib/util/uid.js?");

/***/ }),

/***/ "./lib/util/web-storage.js":
/*!*********************************!*\
  !*** ./lib/util/web-storage.js ***!
  \*********************************/
/*! exports provided: NAMESPACE, STORES, objectStore, fetch, set */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NAMESPACE\", function() { return NAMESPACE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"STORES\", function() { return STORES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"objectStore\", function() { return objectStore; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetch\", function() { return fetch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"set\", function() { return set; });\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/debug/src/browser.js\")('recurly:web-storage');\n\nvar NAMESPACE = '__recurly__';\nvar STORES = {\n  local: function local() {\n    return window.localStorage;\n  },\n  session: function session() {\n    return window.sessionStorage;\n  }\n};\nvar objectStore = {\n  setItem: function setItem(name, value) {\n    return this[name] = value;\n  },\n  getItem: function getItem(name) {\n    if (name in this) return this[name];else return null;\n  }\n};\n\nvar namespaced = function namespaced(key) {\n  return \"\".concat(NAMESPACE, \".\").concat(key);\n};\n/**\n * Fetches a value from web storage, optionally setting its value\n * if it is not already set\n *\n * @param  {String}    options.scope       'session' or 'local'\n * @param  {String}    options.key         item key\n * @param  {DOMString} [options.otherwise] value to set if this key is new\n * @param  {DOMString} [options.set]       force a value to be set\n * @return {Mixed}     item value\n */\n\n\nfunction fetch(_ref) {\n  var _ref$scope = _ref.scope,\n      scope = _ref$scope === void 0 ? 'local' : _ref$scope,\n      key = _ref.key,\n      otherwise = _ref.otherwise;\n  var value = store(scope).getItem(namespaced(key));\n\n  if (value === null && !~[null, undefined].indexOf(otherwise)) {\n    value = otherwise;\n    store(scope).setItem(namespaced(key), value);\n  }\n\n  return value;\n}\nfunction set(_ref2) {\n  var _ref2$scope = _ref2.scope,\n      scope = _ref2$scope === void 0 ? 'local' : _ref2$scope,\n      key = _ref2.key,\n      value = _ref2.value;\n  store(scope).setItem(namespaced(key), value);\n  return store(scope).getItem(namespaced(key));\n}\n\nfunction store(scope) {\n  try {\n    var _store = STORES[scope]();\n\n    _store.setItem(NAMESPACE, NAMESPACE);\n\n    _store.removeItem(NAMESPACE);\n\n    return _store;\n  } catch (e) {\n    debug('Web storage is not available due to', e);\n    return objectStore;\n  }\n}\n\n//# sourceURL=webpack://recurly/./lib/util/web-storage.js?");

/***/ }),

/***/ "./node_modules/array-unique/index.js":
/*!********************************************!*\
  !*** ./node_modules/array-unique/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/*!\n * array-unique <https://github.com/jonschlinkert/array-unique>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n\n\nmodule.exports = function unique(arr) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('array-unique expects an array.');\n  }\n\n  var len = arr.length;\n  var i = -1;\n\n  while (i++ < len) {\n    var j = i + 1;\n\n    for (; j < arr.length; ++j) {\n      if (arr[i] === arr[j]) {\n        arr.splice(j--, 1);\n      }\n    }\n  }\n  return arr;\n};\n\nmodule.exports.immutable = function uniqueImmutable(arr) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('array-unique expects an array.');\n  }\n\n  var arrLen = arr.length;\n  var newArr = new Array(arrLen);\n\n  for (var i = 0; i < arrLen; i++) {\n    newArr[i] = arr[i];\n  }\n\n  return module.exports(newArr);\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/array-unique/index.js?");

/***/ }),

/***/ "./node_modules/asap/browser-asap.js":
/*!*******************************************!*\
  !*** ./node_modules/asap/browser-asap.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = __webpack_require__(/*! ./raw */ \"./node_modules/asap/browser-raw.js\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/asap/browser-asap.js?");

/***/ }),

/***/ "./node_modules/asap/browser-raw.js":
/*!******************************************!*\
  !*** ./node_modules/asap/browser-raw.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n\n//# sourceURL=webpack://recurly/./node_modules/asap/browser-raw.js?");

/***/ }),

/***/ "./node_modules/bowser/src/bowser.js":
/*!*******************************************!*\
  !*** ./node_modules/bowser/src/bowser.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (root, name, definition) {\n  if ( true && module.exports) module.exports = definition()\n  else if (true) __webpack_require__(/*! !webpack amd define */ \"./node_modules/webpack/buildin/amd-define.js\")(name, definition)\n  else {}\n}(this, 'bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)(o|0)s/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua) && !/tablet pc/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr\\/|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/Whale/i.test(ua)) {\n      result = {\n        name: 'NAVER Whale browser'\n        , whale: t\n        , version: getFirstMatch(/(?:whale)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/MZBrowser/i.test(ua)) {\n      result = {\n        name: 'MZ Browser'\n        , mzbrowser: t\n        , version: getFirstMatch(/(?:MZBrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/focus/i.test(ua)) {\n      result = {\n        name: 'Focus'\n        , focus: t\n        , version: getFirstMatch(/(?:focus)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , osname: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , osname: 'Chrome OS'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/edg([ea]|ios)/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , osname: 'Sailfish OS'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n        result.osname = 'Firefox OS'\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , osname: 'BlackBerry OS'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , osname: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , osname: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , osname: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.windowsphone && (android || result.silk)) {\n      result.android = t\n      result.osname = 'Android'\n    } else if (!result.windowsphone && iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n      result.osname = 'iOS'\n    } else if (mac) {\n      result.mac = t\n      result.osname = 'macOS'\n    } else if (xbox) {\n      result.xbox = t\n      result.osname = 'Xbox'\n    } else if (windows) {\n      result.windows = t\n      result.osname = 'Windows'\n    } else if (linux) {\n      result.linux = t\n      result.osname = 'Linux'\n    }\n\n    function getWindowsVersion (s) {\n      switch (s) {\n        case 'NT': return 'NT'\n        case 'XP': return 'XP'\n        case 'NT 5.0': return '2000'\n        case 'NT 5.1': return 'XP'\n        case 'NT 5.2': return '2003'\n        case 'NT 6.0': return 'Vista'\n        case 'NT 6.1': return '7'\n        case 'NT 6.2': return '8'\n        case 'NT 6.3': return '8.1'\n        case 'NT 10.0': return '10'\n        default: return undefined\n      }\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windows) {\n      osVersion = getWindowsVersion(getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i))\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.mac) {\n      osVersion = getFirstMatch(/Mac OS X (\\d+([_\\.\\s]\\d+)*)/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = !result.windows && osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.whale && compareVersions([result.version, '1.0']) === 1) ||\n        (result.mzbrowser && compareVersions([result.version, '6.0']) === 1) ||\n        (result.focus && compareVersions([result.version, '1.0']) === 1) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          if (typeof minVersions[browser] !== 'string') {\n            throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n          }\n\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  /*\n   * Set our detect public method to the main bowser object\n   * This is needed to implement bowser in server side\n   */\n  bowser.detect = detect;\n  return bowser\n});\n\n\n//# sourceURL=webpack://recurly/./node_modules/bowser/src/bowser.js?");

/***/ }),

/***/ "./node_modules/component-clone/index.js":
/*!***********************************************!*\
  !*** ./node_modules/component-clone/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Module dependencies.\n */\n\nvar type;\ntry {\n  type = __webpack_require__(/*! component-type */ \"./node_modules/component-type/index.js\");\n} catch (_) {\n  type = __webpack_require__(/*! type */ \"./node_modules/component-type/index.js\");\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = clone;\n\n/**\n * Clones objects.\n *\n * @param {Mixed} any object\n * @api public\n */\n\nfunction clone(obj){\n  switch (type(obj)) {\n    case 'object':\n      var copy = {};\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          copy[key] = clone(obj[key]);\n        }\n      }\n      return copy;\n\n    case 'array':\n      var copy = new Array(obj.length);\n      for (var i = 0, l = obj.length; i < l; i++) {\n        copy[i] = clone(obj[i]);\n      }\n      return copy;\n\n    case 'regexp':\n      // from millermedeiros/amd-utils - MIT\n      var flags = '';\n      flags += obj.multiline ? 'm' : '';\n      flags += obj.global ? 'g' : '';\n      flags += obj.ignoreCase ? 'i' : '';\n      return new RegExp(obj.source, flags);\n\n    case 'date':\n      return new Date(obj.getTime());\n\n    default: // string, number, boolean, …\n      return obj;\n  }\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/component-clone/index.js?");

/***/ }),

/***/ "./node_modules/component-each/index.js":
/*!**********************************************!*\
  !*** ./node_modules/component-each/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\n/**\n * Module dependencies.\n */\n\ntry {\n  var type = __webpack_require__(/*! type */ \"./node_modules/component-each/node_modules/component-type/index.js\");\n} catch (err) {\n  var type = __webpack_require__(/*! component-type */ \"./node_modules/component-each/node_modules/component-type/index.js\");\n}\n\nvar toFunction = __webpack_require__(/*! to-function */ \"./node_modules/to-function/index.js\");\n\n/**\n * HOP reference.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Iterate the given `obj` and invoke `fn(val, i)`\n * in optional context `ctx`.\n *\n * @param {String|Array|Object} obj\n * @param {Function} fn\n * @param {Object} [ctx]\n * @api public\n */\n\nmodule.exports = function(obj, fn, ctx){\n  fn = toFunction(fn);\n  ctx = ctx || this;\n  switch (type(obj)) {\n    case 'array':\n      return array(obj, fn, ctx);\n    case 'object':\n      if ('number' == typeof obj.length) return array(obj, fn, ctx);\n      return object(obj, fn, ctx);\n    case 'string':\n      return string(obj, fn, ctx);\n  }\n};\n\n/**\n * Iterate string chars.\n *\n * @param {String} obj\n * @param {Function} fn\n * @param {Object} ctx\n * @api private\n */\n\nfunction string(obj, fn, ctx) {\n  for (var i = 0; i < obj.length; ++i) {\n    fn.call(ctx, obj.charAt(i), i);\n  }\n}\n\n/**\n * Iterate object keys.\n *\n * @param {Object} obj\n * @param {Function} fn\n * @param {Object} ctx\n * @api private\n */\n\nfunction object(obj, fn, ctx) {\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      fn.call(ctx, key, obj[key]);\n    }\n  }\n}\n\n/**\n * Iterate array-ish.\n *\n * @param {Array|Object} obj\n * @param {Function} fn\n * @param {Object} ctx\n * @api private\n */\n\nfunction array(obj, fn, ctx) {\n  for (var i = 0; i < obj.length; ++i) {\n    fn.call(ctx, obj[i], i);\n  }\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/component-each/index.js?");

/***/ }),

/***/ "./node_modules/component-each/node_modules/component-type/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/component-each/node_modules/component-type/index.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\n/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Function]': return 'function';\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n    case '[object String]': return 'string';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val && val.nodeType === 1) return 'element';\n  if (val === Object(val)) return 'object';\n\n  return typeof val;\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/component-each/node_modules/component-type/index.js?");

/***/ }),

/***/ "./node_modules/component-emitter/index.js":
/*!*************************************************!*\
  !*** ./node_modules/component-emitter/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (true) {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n\n//# sourceURL=webpack://recurly/./node_modules/component-emitter/index.js?");

/***/ }),

/***/ "./node_modules/component-find/index.js":
/*!**********************************************!*\
  !*** ./node_modules/component-find/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\n/**\n * Module dependencies.\n */\n\nvar toFunction = __webpack_require__(/*! to-function */ \"./node_modules/to-function/index.js\");\n\n/**\n * Find the first value in `arr` with when `fn(val, i)` is truthy.\n *\n * @param {Array} arr\n * @param {Function} fn\n * @return {Array}\n * @api public\n */\n\nmodule.exports = function(arr, fn){\n  // callback\n  if ('function' != typeof fn) {\n    if (Object(fn) === fn) fn = objectToFunction(fn);\n    else fn = toFunction(fn);\n  }\n\n  // filter\n  for (var i = 0, len = arr.length; i < len; ++i) {\n    if (fn(arr[i], i)) return arr[i];\n  }\n};\n\n/**\n * Convert `obj` into a match function.\n *\n * @param {Object} obj\n * @return {Function}\n * @api private\n */\n\nfunction objectToFunction(obj) {\n  return function(o){\n    for (var key in obj) {\n      if (o[key] != obj[key]) return false;\n    }\n    return true;\n  }\n}\n\n//# sourceURL=webpack://recurly/./node_modules/component-find/index.js?");

/***/ }),

/***/ "./node_modules/component-props/index.js":
/*!***********************************************!*\
  !*** ./node_modules/component-props/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * Global Names\n */\n\nvar globals = /\\b(Array|Date|Object|Math|JSON)\\b/g;\n\n/**\n * Return immediate identifiers parsed from `str`.\n *\n * @param {String} str\n * @param {String|Function} map function or prefix\n * @return {Array}\n * @api public\n */\n\nmodule.exports = function(str, fn){\n  var p = unique(props(str));\n  if (fn && 'string' == typeof fn) fn = prefixed(fn);\n  if (fn) return map(str, p, fn);\n  return p;\n};\n\n/**\n * Return immediate identifiers in `str`.\n *\n * @param {String} str\n * @return {Array}\n * @api private\n */\n\nfunction props(str) {\n  return str\n    .replace(/\\.\\w+|\\w+ *\\(|\"[^\"]*\"|'[^']*'|\\/([^/]+)\\//g, '')\n    .replace(globals, '')\n    .match(/[a-zA-Z_]\\w*/g)\n    || [];\n}\n\n/**\n * Return `str` with `props` mapped with `fn`.\n *\n * @param {String} str\n * @param {Array} props\n * @param {Function} fn\n * @return {String}\n * @api private\n */\n\nfunction map(str, props, fn) {\n  var re = /\\.\\w+|\\w+ *\\(|\"[^\"]*\"|'[^']*'|\\/([^/]+)\\/|[a-zA-Z_]\\w*/g;\n  return str.replace(re, function(_){\n    if ('(' == _[_.length - 1]) return fn(_);\n    if (!~props.indexOf(_)) return _;\n    return fn(_);\n  });\n}\n\n/**\n * Return unique array.\n *\n * @param {Array} arr\n * @return {Array}\n * @api private\n */\n\nfunction unique(arr) {\n  var ret = [];\n\n  for (var i = 0; i < arr.length; i++) {\n    if (~ret.indexOf(arr[i])) continue;\n    ret.push(arr[i]);\n  }\n\n  return ret;\n}\n\n/**\n * Map with prefix `str`.\n */\n\nfunction prefixed(str) {\n  return function(_){\n    return str + _;\n  };\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/component-props/index.js?");

/***/ }),

/***/ "./node_modules/component-type/index.js":
/*!**********************************************!*\
  !*** ./node_modules/component-type/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n    case '[object Error]': return 'error';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val !== val) return 'nan';\n  if (val && val.nodeType === 1) return 'element';\n\n  if (isBuffer(val)) return 'buffer';\n\n  val = val.valueOf\n    ? val.valueOf()\n    : Object.prototype.valueOf.apply(val);\n\n  return typeof val;\n};\n\n// code borrowed from https://github.com/feross/is-buffer/blob/master/index.js\nfunction isBuffer(obj) {\n  return !!(obj != null &&\n    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n      (obj.constructor &&\n      typeof obj.constructor.isBuffer === 'function' &&\n      obj.constructor.isBuffer(obj))\n    ))\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/component-type/index.js?");

/***/ }),

/***/ "./node_modules/currency-symbol-map/currency-symbol-map.js":
/*!*****************************************************************!*\
  !*** ./node_modules/currency-symbol-map/currency-symbol-map.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var currencySymbolMap = __webpack_require__(/*! ./map */ \"./node_modules/currency-symbol-map/map.js\")\n\nmodule.exports = function getSymbolFromCurrency (currencyCode) {\n  if (typeof currencyCode !== 'string') return undefined\n  var code = currencyCode.toUpperCase()\n  if (!currencySymbolMap.hasOwnProperty(code)) return undefined\n  return currencySymbolMap[code]\n}\n\nmodule.exports.currencySymbolMap = currencySymbolMap\n\n\n//# sourceURL=webpack://recurly/./node_modules/currency-symbol-map/currency-symbol-map.js?");

/***/ }),

/***/ "./node_modules/currency-symbol-map/map.js":
/*!*************************************************!*\
  !*** ./node_modules/currency-symbol-map/map.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = {\n  'AED': 'د.إ',\n  'AFN': '؋',\n  'ALL': 'L',\n  'AMD': '֏',\n  'ANG': 'ƒ',\n  'AOA': 'Kz',\n  'ARS': '$',\n  'AUD': '$',\n  'AWG': 'ƒ',\n  'AZN': '₼',\n  'BAM': 'KM',\n  'BBD': '$',\n  'BDT': '৳',\n  'BGN': 'лв',\n  'BHD': '.د.ب',\n  'BIF': 'FBu',\n  'BMD': '$',\n  'BND': '$',\n  'BOB': '$b',\n  'BRL': 'R$',\n  'BSD': '$',\n  'BTC': '฿',\n  'BTN': 'Nu.',\n  'BWP': 'P',\n  'BYR': 'Br',\n  'BYN': 'Br',\n  'BZD': 'BZ$',\n  'CAD': '$',\n  'CDF': 'FC',\n  'CHF': 'CHF',\n  'CLP': '$',\n  'CNY': '¥',\n  'COP': '$',\n  'CRC': '₡',\n  'CUC': '$',\n  'CUP': '₱',\n  'CVE': '$',\n  'CZK': 'Kč',\n  'DJF': 'Fdj',\n  'DKK': 'kr',\n  'DOP': 'RD$',\n  'DZD': 'دج',\n  'EEK': 'kr',\n  'EGP': '£',\n  'ERN': 'Nfk',\n  'ETB': 'Br',\n  'ETH': 'Ξ',\n  'EUR': '€',\n  'FJD': '$',\n  'FKP': '£',\n  'GBP': '£',\n  'GEL': '₾',\n  'GGP': '£',\n  'GHC': '₵',\n  'GHS': 'GH₵',\n  'GIP': '£',\n  'GMD': 'D',\n  'GNF': 'FG',\n  'GTQ': 'Q',\n  'GYD': '$',\n  'HKD': '$',\n  'HNL': 'L',\n  'HRK': 'kn',\n  'HTG': 'G',\n  'HUF': 'Ft',\n  'IDR': 'Rp',\n  'ILS': '₪',\n  'IMP': '£',\n  'INR': '₹',\n  'IQD': 'ع.د',\n  'IRR': '﷼',\n  'ISK': 'kr',\n  'JEP': '£',\n  'JMD': 'J$',\n  'JOD': 'JD',\n  'JPY': '¥',\n  'KES': 'KSh',\n  'KGS': 'лв',\n  'KHR': '៛',\n  'KMF': 'CF',\n  'KPW': '₩',\n  'KRW': '₩',\n  'KWD': 'KD',\n  'KYD': '$',\n  'KZT': 'лв',\n  'LAK': '₭',\n  'LBP': '£',\n  'LKR': '₨',\n  'LRD': '$',\n  'LSL': 'M',\n  'LTC': 'Ł',\n  'LTL': 'Lt',\n  'LVL': 'Ls',\n  'LYD': 'LD',\n  'MAD': 'MAD',\n  'MDL': 'lei',\n  'MGA': 'Ar',\n  'MKD': 'ден',\n  'MMK': 'K',\n  'MNT': '₮',\n  'MOP': 'MOP$',\n  'MRO': 'UM',\n  'MRU': 'UM',\n  'MUR': '₨',\n  'MVR': 'Rf',\n  'MWK': 'MK',\n  'MXN': '$',\n  'MYR': 'RM',\n  'MZN': 'MT',\n  'NAD': '$',\n  'NGN': '₦',\n  'NIO': 'C$',\n  'NOK': 'kr',\n  'NPR': '₨',\n  'NZD': '$',\n  'OMR': '﷼',\n  'PAB': 'B/.',\n  'PEN': 'S/.',\n  'PGK': 'K',\n  'PHP': '₱',\n  'PKR': '₨',\n  'PLN': 'zł',\n  'PYG': 'Gs',\n  'QAR': '﷼',\n  'RMB': '￥',\n  'RON': 'lei',\n  'RSD': 'Дин.',\n  'RUB': '₽',\n  'RWF': 'R₣',\n  'SAR': '﷼',\n  'SBD': '$',\n  'SCR': '₨',\n  'SDG': 'ج.س.',\n  'SEK': 'kr',\n  'SGD': '$',\n  'SHP': '£',\n  'SLL': 'Le',\n  'SOS': 'S',\n  'SRD': '$',\n  'SSP': '£',\n  'STD': 'Db',\n  'STN': 'Db',\n  'SVC': '$',\n  'SYP': '£',\n  'SZL': 'E',\n  'THB': '฿',\n  'TJS': 'SM',\n  'TMT': 'T',\n  'TND': 'د.ت',\n  'TOP': 'T$',\n  'TRL': '₤',\n  'TRY': '₺',\n  'TTD': 'TT$',\n  'TVD': '$',\n  'TWD': 'NT$',\n  'TZS': 'TSh',\n  'UAH': '₴',\n  'UGX': 'USh',\n  'USD': '$',\n  'UYU': '$U',\n  'UZS': 'лв',\n  'VEF': 'Bs',\n  'VND': '₫',\n  'VUV': 'VT',\n  'WST': 'WS$',\n  'XAF': 'FCFA',\n  'XBT': 'Ƀ',\n  'XCD': '$',\n  'XOF': 'CFA',\n  'XPF': '₣',\n  'YER': '﷼',\n  'ZAR': 'R',\n  'ZWD': 'Z$'\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/currency-symbol-map/map.js?");

/***/ }),

/***/ "./node_modules/debug/src/browser.js":
/*!*******************************************!*\
  !*** ./node_modules/debug/src/browser.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console;\n\n  // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = __webpack_require__(/*! ./common */ \"./node_modules/debug/src/common.js\")(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://recurly/./node_modules/debug/src/browser.js?");

/***/ }),

/***/ "./node_modules/debug/src/common.js":
/*!******************************************!*\
  !*** ./node_modules/debug/src/common.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = __webpack_require__(/*! ms */ \"./node_modules/ms/index.js\");\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;\n\n\n\n//# sourceURL=webpack://recurly/./node_modules/debug/src/common.js?");

/***/ }),

/***/ "./node_modules/deep-filter/index.js":
/*!*******************************************!*\
  !*** ./node_modules/deep-filter/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar isPlainObject = __webpack_require__(/*! is-plain-object */ \"./node_modules/is-plain-object/index.js\");\n\nfunction filter(value, fn) {\n    if (Array.isArray(value)) {\n        return filterArray(value, fn);\n    } else if (isPlainObject(value)) {\n        return filterObject(value, fn);\n    }\n\n    return value;\n}\n\nfunction filterObject(obj, fn) {\n    var newObj = {};\n    var key;\n    var value;\n\n    for (key in obj) {\n        value = filter(obj[key], fn);\n\n        if (fn.call(obj, value, key, obj)) {\n            if (value !== obj[key] && !isCollection(value)) {\n                value = obj[key];\n            }\n\n            newObj[key] = value;\n        }\n    }\n\n    return newObj;\n}\n\nfunction filterArray(array, fn) {\n    var filtered = [];\n\n    array.forEach(function (value, index, array) {\n        value = filter(value, fn);\n\n        if (fn.call(array, value, index, array)) {\n            if (value !== array[index] && !isCollection(value)) {\n                value = array[index];\n            }\n\n            filtered.push(value);\n        }\n    });\n\n    return filtered;\n}\n\nfunction isCollection(value) {\n    return Array.isArray(value) || isPlainObject(value);\n}\n\nmodule.exports = filter;\n\n\n//# sourceURL=webpack://recurly/./node_modules/deep-filter/index.js?");

/***/ }),

/***/ "./node_modules/intersect/index.js":
/*!*****************************************!*\
  !*** ./node_modules/intersect/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = intersect;\n\nfunction many (sets) {\n  var o = {};\n  var l = sets.length - 1;\n  var first = sets[0];\n  var last = sets[l];\n  \n  for(var i in first) o[first[i]] = 0;\n  \n  for(var i = 1; i <= l; i++) {\n    var row = sets[i];\n    for(var j in row) {\n      var key = row[j];\n      if(o[key] === i - 1) o[key] = i;\n    }\n  }\n  \n  var a = [];\n  for(var i in last) {\n    var key = last[i];\n    if(o[key] === l) a.push(key);\n  }\n  \n  return a;\n}\n\nfunction intersect (a, b) {\n  if (!b) return many(a);\n\n  var res = [];\n  for (var i = 0; i < a.length; i++) {\n    if (indexOf(b, a[i]) > -1) res.push(a[i]);\n  }\n  return res;\n}\n\nintersect.big = function(a, b) {\n  if (!b) return many(a);\n  \n  var ret = [];\n  var temp = {};\n  \n  for (var i = 0; i < b.length; i++) {\n    temp[b[i]] = true;\n  }\n  for (var i = 0; i < a.length; i++) {\n    if (temp[a[i]]) ret.push(a[i]);\n  }\n  \n  return ret;\n}\n\nfunction indexOf(arr, el) {\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i] === el) return i;\n  }\n  return -1;\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/intersect/index.js?");

/***/ }),

/***/ "./node_modules/is-plain-object/index.js":
/*!***********************************************!*\
  !*** ./node_modules/is-plain-object/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n\n\nvar isObject = __webpack_require__(/*! isobject */ \"./node_modules/isobject/index.js\");\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/is-plain-object/index.js?");

/***/ }),

/***/ "./node_modules/isobject/index.js":
/*!****************************************!*\
  !*** ./node_modules/isobject/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/isobject/index.js?");

/***/ }),

/***/ "./node_modules/jsonp/index.js":
/*!*************************************!*\
  !*** ./node_modules/jsonp/index.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Module dependencies\n */\n\nvar debug = __webpack_require__(/*! debug */ \"./node_modules/jsonp/node_modules/debug/src/browser.js\")('jsonp');\n\n/**\n * Module exports.\n */\n\nmodule.exports = jsonp;\n\n/**\n * Callback index.\n */\n\nvar count = 0;\n\n/**\n * Noop function.\n */\n\nfunction noop(){}\n\n/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - prefix {String} qs parameter (`__jp`)\n *  - name {String} qs parameter (`prefix` + incr)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */\n\nfunction jsonp(url, opts, fn){\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n  if (!opts) opts = {};\n\n  var prefix = opts.prefix || '__jp';\n\n  // use the callback name that was passed if one was provided.\n  // otherwise generate a unique name by incrementing our counter.\n  var id = opts.name || (prefix + (count++));\n\n  var param = opts.param || 'callback';\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\n  var enc = encodeURIComponent;\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script;\n  var timer;\n\n\n  if (timeout) {\n    timer = setTimeout(function(){\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup(){\n    if (script.parentNode) script.parentNode.removeChild(script);\n    window[id] = noop;\n    if (timer) clearTimeout(timer);\n  }\n\n  function cancel(){\n    if (window[id]) {\n      cleanup();\n    }\n  }\n\n  window[id] = function(data){\n    debug('jsonp got', data);\n    cleanup();\n    if (fn) fn(null, data);\n  };\n\n  // add qs component\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?');\n\n  debug('jsonp req \"%s\"', url);\n\n  // create script\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n\n  return cancel;\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/jsonp/index.js?");

/***/ }),

/***/ "./node_modules/jsonp/node_modules/debug/src/browser.js":
/*!**************************************************************!*\
  !*** ./node_modules/jsonp/node_modules/debug/src/browser.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = __webpack_require__(/*! ./debug */ \"./node_modules/jsonp/node_modules/debug/src/debug.js\");\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://recurly/./node_modules/jsonp/node_modules/debug/src/browser.js?");

/***/ }),

/***/ "./node_modules/jsonp/node_modules/debug/src/debug.js":
/*!************************************************************!*\
  !*** ./node_modules/jsonp/node_modules/debug/src/debug.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = __webpack_require__(/*! ms */ \"./node_modules/jsonp/node_modules/ms/index.js\");\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/jsonp/node_modules/debug/src/debug.js?");

/***/ }),

/***/ "./node_modules/jsonp/node_modules/ms/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/jsonp/node_modules/ms/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/jsonp/node_modules/ms/index.js?");

/***/ }),

/***/ "./node_modules/load-script/index.js":
/*!*******************************************!*\
  !*** ./node_modules/load-script/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\nmodule.exports = function load (src, opts, cb) {\n  var head = document.head || document.getElementsByTagName('head')[0]\n  var script = document.createElement('script')\n\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  opts = opts || {}\n  cb = cb || function() {}\n\n  script.type = opts.type || 'text/javascript'\n  script.charset = opts.charset || 'utf8';\n  script.async = 'async' in opts ? !!opts.async : true\n  script.src = src\n\n  if (opts.attrs) {\n    setAttributes(script, opts.attrs)\n  }\n\n  if (opts.text) {\n    script.text = '' + opts.text\n  }\n\n  var onend = 'onload' in script ? stdOnEnd : ieOnEnd\n  onend(script, cb)\n\n  // some good legacy browsers (firefox) fail the 'in' detection above\n  // so as a fallback we always set onload\n  // old IE will ignore this and new IE will set onload\n  if (!script.onload) {\n    stdOnEnd(script, cb);\n  }\n\n  head.appendChild(script)\n}\n\nfunction setAttributes(script, attrs) {\n  for (var attr in attrs) {\n    script.setAttribute(attr, attrs[attr]);\n  }\n}\n\nfunction stdOnEnd (script, cb) {\n  script.onload = function () {\n    this.onerror = this.onload = null\n    cb(null, script)\n  }\n  script.onerror = function () {\n    // this.onload = null here is necessary\n    // because even IE9 works not like others\n    this.onerror = this.onload = null\n    cb(new Error('Failed to load ' + this.src), script)\n  }\n}\n\nfunction ieOnEnd (script, cb) {\n  script.onreadystatechange = function () {\n    if (this.readyState != 'complete' && this.readyState != 'loaded') return\n    this.onreadystatechange = null\n    cb(null, script) // there is no way to catch loading errors in IE8\n  }\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/load-script/index.js?");

/***/ }),

/***/ "./node_modules/lodash.chunk/index.js":
/*!********************************************!*\
  !*** ./node_modules/lodash.chunk/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Creates an array of elements split into groups the length of `size`.\n * If `array` can't be split evenly, the final chunk will be the remaining\n * elements.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to process.\n * @param {number} [size=1] The length of each chunk\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the new array of chunks.\n * @example\n *\n * _.chunk(['a', 'b', 'c', 'd'], 2);\n * // => [['a', 'b'], ['c', 'd']]\n *\n * _.chunk(['a', 'b', 'c', 'd'], 3);\n * // => [['a', 'b', 'c'], ['d']]\n */\nfunction chunk(array, size, guard) {\n  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n    size = 1;\n  } else {\n    size = nativeMax(toInteger(size), 0);\n  }\n  var length = array ? array.length : 0;\n  if (!length || size < 1) {\n    return [];\n  }\n  var index = 0,\n      resIndex = 0,\n      result = Array(nativeCeil(length / size));\n\n  while (index < length) {\n    result[resIndex++] = baseSlice(array, index, (index += size));\n  }\n  return result;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = chunk;\n\n\n//# sourceURL=webpack://recurly/./node_modules/lodash.chunk/index.js?");

/***/ }),

/***/ "./node_modules/lodash.isempty/index.js":
/*!**********************************************!*\
  !*** ./node_modules/lodash.isempty/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports =  true && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap');\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' ||\n        typeof value.splice == 'function' || isBuffer(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (nonEnumShadows || isPrototype(value)) {\n    return !nativeKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEmpty;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://recurly/./node_modules/lodash.isempty/index.js?");

/***/ }),

/***/ "./node_modules/lodash.pick/index.js":
/*!*******************************************!*\
  !*** ./node_modules/lodash.pick/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = baseRest(function(object, props) {\n  return object == null ? {} : basePick(object, arrayMap(baseFlatten(props, 1), toKey));\n});\n\nmodule.exports = pick;\n\n\n//# sourceURL=webpack://recurly/./node_modules/lodash.pick/index.js?");

/***/ }),

/***/ "./node_modules/ms/index.js":
/*!**********************************!*\
  !*** ./node_modules/ms/index.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/ms/index.js?");

/***/ }),

/***/ "./node_modules/nanoid/format.browser.js":
/*!***********************************************!*\
  !*** ./node_modules/nanoid/format.browser.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (random, alphabet, size) {\n  var mask = (2 << Math.log(alphabet.length - 1) / Math.LN2) - 1\n  var step = -~(1.6 * mask * size / alphabet.length)\n  var id = ''\n\n  while (true) {\n    var i = step\n    var bytes = random(i)\n    while (i--) {\n      id += alphabet[bytes[i] & mask] || ''\n      if (id.length === +size) return id\n    }\n  }\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/nanoid/format.browser.js?");

/***/ }),

/***/ "./node_modules/nanoid/generate.js":
/*!*****************************************!*\
  !*** ./node_modules/nanoid/generate.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var random = __webpack_require__(/*! ./random */ \"./node_modules/nanoid/random.browser.js\")\nvar format = __webpack_require__(/*! ./format */ \"./node_modules/nanoid/format.browser.js\")\n\n/**\n * Low-level function to change alphabet and ID size.\n *\n * Alphabet must contain 256 symbols or less. Otherwise, the generator\n * will not be secure.\n *\n * @param {string} alphabet Symbols to be used in ID.\n * @param {number} size The number of symbols in ID.\n *\n * @return {string} Unique ID.\n *\n * @example\n * const generate = require('nanoid/generate')\n * model.id = generate('0123456789абвгдеё', 5) //=> \"8ё56а\"\n *\n * @name generate\n * @function\n */\nmodule.exports = format.bind(null, random)\n\n\n//# sourceURL=webpack://recurly/./node_modules/nanoid/generate.js?");

/***/ }),

/***/ "./node_modules/nanoid/random.browser.js":
/*!***********************************************!*\
  !*** ./node_modules/nanoid/random.browser.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var crypto = self.crypto || self.msCrypto\n\nmodule.exports = function (bytes) {\n  return crypto.getRandomValues(new Uint8Array(bytes))\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/nanoid/random.browser.js?");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack://recurly/./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/promise/index.js":
/*!***************************************!*\
  !*** ./node_modules/promise/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = __webpack_require__(/*! ./lib */ \"./node_modules/promise/lib/index.js\")\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/index.js?");

/***/ }),

/***/ "./node_modules/promise/lib/core.js":
/*!******************************************!*\
  !*** ./node_modules/promise/lib/core.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar asap = __webpack_require__(/*! asap/raw */ \"./node_modules/asap/browser-raw.js\");\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._h = 0;\n  this._i = 0;\n  this._j = null;\n  this._k = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._l = null;\nPromise._m = null;\nPromise._n = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._i === 3) {\n    self = self._j;\n  }\n  if (Promise._l) {\n    Promise._l(self);\n  }\n  if (self._i === 0) {\n    if (self._h === 0) {\n      self._h = 1;\n      self._k = deferred;\n      return;\n    }\n    if (self._h === 1) {\n      self._h = 2;\n      self._k = [self._k, deferred];\n      return;\n    }\n    self._k.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._i === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._i === 1) {\n        resolve(deferred.promise, self._j);\n      } else {\n        reject(deferred.promise, self._j);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._j);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._i = 3;\n      self._j = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._i = 1;\n  self._j = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._i = 2;\n  self._j = newValue;\n  if (Promise._m) {\n    Promise._m(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._h === 1) {\n    handle(self, self._k);\n    self._k = null;\n  }\n  if (self._h === 2) {\n    for (var i = 0; i < self._k.length; i++) {\n      handle(self, self._k[i]);\n    }\n    self._k = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/lib/core.js?");

/***/ }),

/***/ "./node_modules/promise/lib/done.js":
/*!******************************************!*\
  !*** ./node_modules/promise/lib/done.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar Promise = __webpack_require__(/*! ./core.js */ \"./node_modules/promise/lib/core.js\");\n\nmodule.exports = Promise;\nPromise.prototype.done = function (onFulfilled, onRejected) {\n  var self = arguments.length ? this.then.apply(this, arguments) : this;\n  self.then(null, function (err) {\n    setTimeout(function () {\n      throw err;\n    }, 0);\n  });\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/lib/done.js?");

/***/ }),

/***/ "./node_modules/promise/lib/es6-extensions.js":
/*!****************************************************!*\
  !*** ./node_modules/promise/lib/es6-extensions.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = __webpack_require__(/*! ./core.js */ \"./node_modules/promise/lib/core.js\");\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._n);\n  p._i = 1;\n  p._j = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._i === 3) {\n            val = val._j;\n          }\n          if (val._i === 1) return res(i, val._j);\n          if (val._i === 2) reject(val._j);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/lib/es6-extensions.js?");

/***/ }),

/***/ "./node_modules/promise/lib/finally.js":
/*!*********************************************!*\
  !*** ./node_modules/promise/lib/finally.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar Promise = __webpack_require__(/*! ./core.js */ \"./node_modules/promise/lib/core.js\");\n\nmodule.exports = Promise;\nPromise.prototype.finally = function (f) {\n  return this.then(function (value) {\n    return Promise.resolve(f()).then(function () {\n      return value;\n    });\n  }, function (err) {\n    return Promise.resolve(f()).then(function () {\n      throw err;\n    });\n  });\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/lib/finally.js?");

/***/ }),

/***/ "./node_modules/promise/lib/index.js":
/*!*******************************************!*\
  !*** ./node_modules/promise/lib/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = __webpack_require__(/*! ./core.js */ \"./node_modules/promise/lib/core.js\");\n__webpack_require__(/*! ./done.js */ \"./node_modules/promise/lib/done.js\");\n__webpack_require__(/*! ./finally.js */ \"./node_modules/promise/lib/finally.js\");\n__webpack_require__(/*! ./es6-extensions.js */ \"./node_modules/promise/lib/es6-extensions.js\");\n__webpack_require__(/*! ./node-extensions.js */ \"./node_modules/promise/lib/node-extensions.js\");\n__webpack_require__(/*! ./synchronous.js */ \"./node_modules/promise/lib/synchronous.js\");\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/lib/index.js?");

/***/ }),

/***/ "./node_modules/promise/lib/node-extensions.js":
/*!*****************************************************!*\
  !*** ./node_modules/promise/lib/node-extensions.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// This file contains then/promise specific extensions that are only useful\n// for node.js interop\n\nvar Promise = __webpack_require__(/*! ./core.js */ \"./node_modules/promise/lib/core.js\");\nvar asap = __webpack_require__(/*! asap */ \"./node_modules/asap/browser-asap.js\");\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nPromise.denodeify = function (fn, argumentCount) {\n  if (\n    typeof argumentCount === 'number' && argumentCount !== Infinity\n  ) {\n    return denodeifyWithCount(fn, argumentCount);\n  } else {\n    return denodeifyWithoutCount(fn);\n  }\n};\n\nvar callbackFn = (\n  'function (err, res) {' +\n  'if (err) { rj(err); } else { rs(res); }' +\n  '}'\n);\nfunction denodeifyWithCount(fn, argumentCount) {\n  var args = [];\n  for (var i = 0; i < argumentCount; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'return new Promise(function (rs, rj) {',\n    'var res = fn.call(',\n    ['self'].concat(args).concat([callbackFn]).join(','),\n    ');',\n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n  return Function(['Promise', 'fn'], body)(Promise, fn);\n}\nfunction denodeifyWithoutCount(fn) {\n  var fnLength = Math.max(fn.length - 1, 3);\n  var args = [];\n  for (var i = 0; i < fnLength; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'var args;',\n    'var argLength = arguments.length;',\n    'if (arguments.length > ' + fnLength + ') {',\n    'args = new Array(arguments.length + 1);',\n    'for (var i = 0; i < arguments.length; i++) {',\n    'args[i] = arguments[i];',\n    '}',\n    '}',\n    'return new Promise(function (rs, rj) {',\n    'var cb = ' + callbackFn + ';',\n    'var res;',\n    'switch (argLength) {',\n    args.concat(['extra']).map(function (_, index) {\n      return (\n        'case ' + (index) + ':' +\n        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +\n        'break;'\n      );\n    }).join(''),\n    'default:',\n    'args[argLength] = cb;',\n    'res = fn.apply(self, args);',\n    '}',\n    \n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n\n  return Function(\n    ['Promise', 'fn'],\n    body\n  )(Promise, fn);\n}\n\nPromise.nodeify = function (fn) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    var callback =\n      typeof args[args.length - 1] === 'function' ? args.pop() : null;\n    var ctx = this;\n    try {\n      return fn.apply(this, arguments).nodeify(callback, ctx);\n    } catch (ex) {\n      if (callback === null || typeof callback == 'undefined') {\n        return new Promise(function (resolve, reject) {\n          reject(ex);\n        });\n      } else {\n        asap(function () {\n          callback.call(ctx, ex);\n        })\n      }\n    }\n  }\n};\n\nPromise.prototype.nodeify = function (callback, ctx) {\n  if (typeof callback != 'function') return this;\n\n  this.then(function (value) {\n    asap(function () {\n      callback.call(ctx, null, value);\n    });\n  }, function (err) {\n    asap(function () {\n      callback.call(ctx, err);\n    });\n  });\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/lib/node-extensions.js?");

/***/ }),

/***/ "./node_modules/promise/lib/synchronous.js":
/*!*************************************************!*\
  !*** ./node_modules/promise/lib/synchronous.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar Promise = __webpack_require__(/*! ./core.js */ \"./node_modules/promise/lib/core.js\");\n\nmodule.exports = Promise;\nPromise.enableSynchronous = function () {\n  Promise.prototype.isPending = function() {\n    return this.getState() == 0;\n  };\n\n  Promise.prototype.isFulfilled = function() {\n    return this.getState() == 1;\n  };\n\n  Promise.prototype.isRejected = function() {\n    return this.getState() == 2;\n  };\n\n  Promise.prototype.getValue = function () {\n    if (this._i === 3) {\n      return this._j.getValue();\n    }\n\n    if (!this.isFulfilled()) {\n      throw new Error('Cannot get a value of an unfulfilled promise.');\n    }\n\n    return this._j;\n  };\n\n  Promise.prototype.getReason = function () {\n    if (this._i === 3) {\n      return this._j.getReason();\n    }\n\n    if (!this.isRejected()) {\n      throw new Error('Cannot get a rejection reason of a non-rejected promise.');\n    }\n\n    return this._j;\n  };\n\n  Promise.prototype.getState = function () {\n    if (this._i === 3) {\n      return this._j.getState();\n    }\n    if (this._i === -1 || this._i === -2) {\n      return 0;\n    }\n\n    return this._i;\n  };\n};\n\nPromise.disableSynchronous = function() {\n  Promise.prototype.isPending = undefined;\n  Promise.prototype.isFulfilled = undefined;\n  Promise.prototype.isRejected = undefined;\n  Promise.prototype.getValue = undefined;\n  Promise.prototype.getReason = undefined;\n  Promise.prototype.getState = undefined;\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/promise/lib/synchronous.js?");

/***/ }),

/***/ "./node_modules/qs/lib/formats.js":
/*!****************************************!*\
  !*** ./node_modules/qs/lib/formats.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = __webpack_require__(/*! ./utils */ \"./node_modules/qs/lib/utils.js\");\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n\n\n//# sourceURL=webpack://recurly/./node_modules/qs/lib/formats.js?");

/***/ }),

/***/ "./node_modules/qs/lib/index.js":
/*!**************************************!*\
  !*** ./node_modules/qs/lib/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar stringify = __webpack_require__(/*! ./stringify */ \"./node_modules/qs/lib/stringify.js\");\nvar parse = __webpack_require__(/*! ./parse */ \"./node_modules/qs/lib/parse.js\");\nvar formats = __webpack_require__(/*! ./formats */ \"./node_modules/qs/lib/formats.js\");\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/qs/lib/index.js?");

/***/ }),

/***/ "./node_modules/qs/lib/parse.js":
/*!**************************************!*\
  !*** ./node_modules/qs/lib/parse.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/qs/lib/utils.js\");\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj; // eslint-disable-line no-param-reassign\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/qs/lib/parse.js?");

/***/ }),

/***/ "./node_modules/qs/lib/stringify.js":
/*!******************************************!*\
  !*** ./node_modules/qs/lib/stringify.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/qs/lib/utils.js\");\nvar formats = __webpack_require__(/*! ./formats */ \"./node_modules/qs/lib/formats.js\");\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        }).join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n        var value = obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly,\n            charset\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/qs/lib/stringify.js?");

/***/ }),

/***/ "./node_modules/qs/lib/utils.js":
/*!**************************************!*\
  !*** ./node_modules/qs/lib/utils.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n\n\n//# sourceURL=webpack://recurly/./node_modules/qs/lib/utils.js?");

/***/ }),

/***/ "./node_modules/string-squish/index.js":
/*!*********************************************!*\
  !*** ./node_modules/string-squish/index.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var CONSECUTIVE_SPACES = /\\s+/g;\n\nmodule.exports = function squish (string) {\n  if (typeof string !== 'string') throw 'Invalid \\'string\\'. Expected String, got ' + typeof string;\n  return string.trim().replace(CONSECUTIVE_SPACES, ' ');\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/string-squish/index.js?");

/***/ }),

/***/ "./node_modules/tabbable/index.js":
/*!****************************************!*\
  !*** ./node_modules/tabbable/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n];\nvar candidateSelector = candidateSelectors.join(',');\n\nvar matches = typeof Element === 'undefined'\n  ? function () {}\n  : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nfunction tabbable(el, options) {\n  options = options || {};\n\n  var regularTabbables = [];\n  var orderedTabbables = [];\n\n  var candidates = el.querySelectorAll(candidateSelector);\n\n  if (options.includeContainer) {\n    if (matches.call(el, candidateSelector)) {\n      candidates = Array.prototype.slice.apply(candidates);\n      candidates.unshift(el);\n    }\n  }\n\n  var i, candidate, candidateTabindex;\n  for (i = 0; i < candidates.length; i++) {\n    candidate = candidates[i];\n\n    if (!isNodeMatchingSelectorTabbable(candidate)) continue;\n\n    candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map(function(a) { return a.node })\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n}\n\ntabbable.isTabbable = isTabbable;\ntabbable.isFocusable = isFocusable;\n\nfunction isNodeMatchingSelectorTabbable(node) {\n  if (\n    !isNodeMatchingSelectorFocusable(node)\n    || isNonTabbableRadio(node)\n    || getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n}\n\nfunction isTabbable(node) {\n  if (!node) throw new Error('No node provided');\n  if (matches.call(node, candidateSelector) === false) return false;\n  return isNodeMatchingSelectorTabbable(node);\n}\n\nfunction isNodeMatchingSelectorFocusable(node) {\n  if (\n    node.disabled\n    || isHiddenInput(node)\n    || isHidden(node)\n  ) {\n    return false;\n  }\n  return true;\n}\n\nvar focusableCandidateSelector = candidateSelectors.concat('iframe').join(',');\nfunction isFocusable(node) {\n  if (!node) throw new Error('No node provided');\n  if (matches.call(node, focusableCandidateSelector) === false) return false;\n  return isNodeMatchingSelectorFocusable(node);\n}\n\nfunction getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n  if (!isNaN(tabindexAttr)) return tabindexAttr;\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) return 0;\n  return node.tabIndex;\n}\n\nfunction sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n}\n\nfunction isContentEditable(node) {\n  return node.contentEditable === 'true';\n}\n\nfunction isInput(node) {\n  return node.tagName === 'INPUT';\n}\n\nfunction isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n}\n\nfunction isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n}\n\nfunction isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n}\n\nfunction getCheckedRadio(nodes) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked) {\n      return nodes[i];\n    }\n  }\n}\n\nfunction isTabbableRadio(node) {\n  if (!node.name) return true;\n  // This won't account for the edge case where you have radio groups with the same\n  // in separate forms on the same page.\n  var radioSet = node.ownerDocument.querySelectorAll('input[type=\"radio\"][name=\"' + node.name + '\"]');\n  var checked = getCheckedRadio(radioSet);\n  return !checked || checked === node;\n}\n\nfunction isHidden(node) {\n  // offsetParent being null will allow detecting cases where an element is invisible or inside an invisible element,\n  // as long as the element does not use position: fixed. For them, their visibility has to be checked directly as well.\n  return node.offsetParent === null || getComputedStyle(node).visibility === 'hidden';\n}\n\nmodule.exports = tabbable;\n\n\n//# sourceURL=webpack://recurly/./node_modules/tabbable/index.js?");

/***/ }),

/***/ "./node_modules/to-function/index.js":
/*!*******************************************!*\
  !*** ./node_modules/to-function/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\n/**\n * Module Dependencies\n */\n\nvar expr;\ntry {\n  expr = __webpack_require__(/*! props */ \"./node_modules/component-props/index.js\");\n} catch(e) {\n  expr = __webpack_require__(/*! component-props */ \"./node_modules/component-props/index.js\");\n}\n\n/**\n * Expose `toFunction()`.\n */\n\nmodule.exports = toFunction;\n\n/**\n * Convert `obj` to a `Function`.\n *\n * @param {Mixed} obj\n * @return {Function}\n * @api private\n */\n\nfunction toFunction(obj) {\n  switch ({}.toString.call(obj)) {\n    case '[object Object]':\n      return objectToFunction(obj);\n    case '[object Function]':\n      return obj;\n    case '[object String]':\n      return stringToFunction(obj);\n    case '[object RegExp]':\n      return regexpToFunction(obj);\n    default:\n      return defaultToFunction(obj);\n  }\n}\n\n/**\n * Default to strict equality.\n *\n * @param {Mixed} val\n * @return {Function}\n * @api private\n */\n\nfunction defaultToFunction(val) {\n  return function(obj){\n    return val === obj;\n  };\n}\n\n/**\n * Convert `re` to a function.\n *\n * @param {RegExp} re\n * @return {Function}\n * @api private\n */\n\nfunction regexpToFunction(re) {\n  return function(obj){\n    return re.test(obj);\n  };\n}\n\n/**\n * Convert property `str` to a function.\n *\n * @param {String} str\n * @return {Function}\n * @api private\n */\n\nfunction stringToFunction(str) {\n  // immediate such as \"> 20\"\n  if (/^ *\\W+/.test(str)) return new Function('_', 'return _ ' + str);\n\n  // properties such as \"name.first\" or \"age > 18\" or \"age > 18 && age < 36\"\n  return new Function('_', 'return ' + get(str));\n}\n\n/**\n * Convert `object` to a function.\n *\n * @param {Object} object\n * @return {Function}\n * @api private\n */\n\nfunction objectToFunction(obj) {\n  var match = {};\n  for (var key in obj) {\n    match[key] = typeof obj[key] === 'string'\n      ? defaultToFunction(obj[key])\n      : toFunction(obj[key]);\n  }\n  return function(val){\n    if (typeof val !== 'object') return false;\n    for (var key in match) {\n      if (!(key in val)) return false;\n      if (!match[key](val[key])) return false;\n    }\n    return true;\n  };\n}\n\n/**\n * Built the getter function. Supports getter style functions\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction get(str) {\n  var props = expr(str);\n  if (!props.length) return '_.' + str;\n\n  var val, i, prop;\n  for (i = 0; i < props.length; i++) {\n    prop = props[i];\n    val = '_.' + prop;\n    val = \"('function' == typeof \" + val + \" ? \" + val + \"() : \" + val + \")\";\n\n    // mimic negative lookbehind to avoid problems with nested properties\n    str = stripNested(prop, str, val);\n  }\n\n  return str;\n}\n\n/**\n * Mimic negative lookbehind to avoid problems with nested properties.\n *\n * See: http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript\n *\n * @param {String} prop\n * @param {String} str\n * @param {String} val\n * @return {String}\n * @api private\n */\n\nfunction stripNested (prop, str, val) {\n  return str.replace(new RegExp('(\\\\.)?' + prop, 'g'), function($0, $1) {\n    return $1 ? $0 : val;\n  });\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/to-function/index.js?");

/***/ }),

/***/ "./node_modules/to-no-case/index.js":
/*!******************************************!*\
  !*** ./node_modules/to-no-case/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\n/**\n * Export.\n */\n\nmodule.exports = toNoCase\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/\nvar hasSeparator = /(_|-|\\.|:)/\nvar hasCamel = /([a-z][A-Z]|[A-Z][a-z])/\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase(string) {\n  if (hasSpace.test(string)) return string.toLowerCase()\n  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase()\n  if (hasCamel.test(string)) return uncamelize(string).toLowerCase()\n  return string.toLowerCase()\n}\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate(string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : ''\n  })\n}\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize(string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ')\n  })\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/to-no-case/index.js?");

/***/ }),

/***/ "./node_modules/to-slug-case/index.js":
/*!********************************************!*\
  !*** ./node_modules/to-slug-case/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar toSpace = __webpack_require__(/*! to-space-case */ \"./node_modules/to-space-case/index.js\")\n\n/**\n * Export.\n */\n\nmodule.exports = toSlugCase\n\n/**\n * Convert a `string` to slug case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toSlugCase(string) {\n  return toSpace(string).replace(/\\s/g, '-')\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/to-slug-case/index.js?");

/***/ }),

/***/ "./node_modules/to-space-case/index.js":
/*!*********************************************!*\
  !*** ./node_modules/to-space-case/index.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar clean = __webpack_require__(/*! to-no-case */ \"./node_modules/to-no-case/index.js\")\n\n/**\n * Export.\n */\n\nmodule.exports = toSpaceCase\n\n/**\n * Convert a `string` to space case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toSpaceCase(string) {\n  return clean(string).replace(/[\\W_]+(.|$)/g, function (matches, match) {\n    return match ? ' ' + match : ''\n  }).trim()\n}\n\n\n//# sourceURL=webpack://recurly/./node_modules/to-space-case/index.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/amd-define.js":
/*!***************************************!*\
  !*** (webpack)/buildin/amd-define.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n\n\n//# sourceURL=webpack://recurly/(webpack)/buildin/amd-define.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack://recurly/(webpack)/buildin/module.js?");

/***/ })

/******/ })["default"];